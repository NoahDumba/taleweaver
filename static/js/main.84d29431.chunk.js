(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,function(t,e,n){var o;void 0===(o=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.listeners=[]}return t.prototype.on=function(t){this.listeners.push(t)},t.prototype.emit=function(t){this.listeners.forEach(function(e){return e(t)})},t}();e.EventEmitter=n}.apply(e,[n,e]))||(t.exports=o)},function(t,e,n){var o;void 0===(o=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.generateId=function(){return Math.random().toString(36).substring(2)}}.apply(e,[n,e]))||(t.exports=o)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(10),n(15)],void 0===(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(o.Position);e.LayoutPosition=r;var a=function(t){function e(e,n){var o=t.call(this)||this;return o.componentId=e,o.id=n,o}return i(e,t),e.prototype.getComponentId=function(){return this.componentId},e.prototype.getId=function(){return this.id},e.prototype.getInnerWidth=function(){return this.getWidth()-this.getHorizontalPaddng()},e.prototype.getInnerHeight=function(){return this.getHeight()-this.getVerticalPaddng()},e.prototype.getVerticalPaddng=function(){return this.getPaddingTop()+this.getPaddingBottom()},e.prototype.getHorizontalPaddng=function(){return this.getPaddingLeft()+this.getPaddingRight()},e}(n.Node);e.LayoutNode=a}.apply(e,o))||(t.exports=r)},function(t,e,n){var o;void 0===(o=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CLOSE_TOKEN={}}.apply(e,[n,e]))||(t.exports=o)},function(t,e,n){var o,r;o=[n,e,n(14),n(16),n(17),n(18),n(28),n(29)],void 0===(r=function(t,e,n,o,r,i,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.identifyLayoutNodeType=function(t){if(t instanceof r.DocLayoutNode)return"Doc";if(t instanceof s.PageLayoutNode)return"Page";if(t instanceof o.BlockLayoutNode)return"Block";if(t instanceof a.LineLayoutNode)return"Line";if(t instanceof i.InlineLayoutNode)return"Inline";if(t instanceof n.AtomicLayoutNode)return"Atomic";throw new Error("Unknown layout node type.")}}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(10)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var n=t.call(this)||this;return n.layoutNode=e,n}return i(e,t),e.prototype.getComponentId=function(){return this.layoutNode.getComponentId()},e.prototype.getPartId=function(){return this.layoutNode.getPartId()},e.prototype.getId=function(){return this.layoutNode.getId()},e.prototype.getSize=function(){return this.layoutNode.getSize()},e.prototype.insertChild=function(e){t.prototype.insertChild.call(this,e),this.insertChildDOM(e.getDOMContainer())},e.prototype.insertChildBefore=function(e,n){t.prototype.insertChildBefore.call(this,e,n),this.insertChildDOMBefore(e.getDOMContainer(),n.getDOMContainer())},e.prototype.appendChild=function(e){t.prototype.appendChild.call(this,e),this.appendChildDOM(e.getDOMContainer())},e.prototype.appendChildAfter=function(e,n){t.prototype.appendChildAfter.call(this,e,n),this.appendChildDOMAfter(e.getDOMContainer(),n.getDOMContainer())},e.prototype.removeChild=function(e){t.prototype.removeChild.call(this,e),this.removeChildDOM(e.getDOMContainer())},e.prototype.getLayoutNode=function(){return this.layoutNode},e.prototype.onDidUpdate=function(e){t.prototype.onDidUpdate.call(this,e),this.layoutNode=e.getLayoutNode(),this.onLayoutDidUpdate()},e.prototype.insertChildDOM=function(t){var e=this.getDOMContentContainer();e.insertBefore(t,e.firstChild)},e.prototype.insertChildDOMBefore=function(t,e){this.getDOMContentContainer().insertBefore(t,e)},e.prototype.appendChildDOM=function(t){this.getDOMContentContainer().appendChild(t)},e.prototype.appendChildDOMAfter=function(t,e){this.getDOMContentContainer().insertBefore(t,e.nextSibling)},e.prototype.removeChildDOM=function(t){this.getDOMContentContainer().removeChild(t)},e}(n.Node);e.ViewNode=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o;void 0===(o=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.id=t}return t.prototype.getId=function(){return this.id},t}();e.Component=n}.apply(e,[n,e]))||(t.exports=o)},function(t,e,n){var o;void 0===(o=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.children=[]}return t.prototype.setParent=function(t){this.parent=t},t.prototype.getParent=function(){if(this.isRoot())throw new Error("Getting parent on root node is not allowed.");return this.parent},t.prototype.insertChild=function(t){if(this.isLeaf())throw new Error("Appending child to leaf node is not allowed.");this.children.unshift(t),t.setParent(this),this.clearCache()},t.prototype.insertChildBefore=function(t,e){if(this.isLeaf())throw new Error("Inserting child to leaf node is not allowed.");var n=this.children.indexOf(e);if(n<0)throw new Error("Error inserting, child to insert before is not found.");this.children.splice(n,0,t),t.setParent(this),this.clearCache()},t.prototype.appendChild=function(t){if(this.isLeaf())throw new Error("Appending child to leaf node is not allowed.");this.children.push(t),t.setParent(this),this.clearCache()},t.prototype.appendChildAfter=function(t,e){if(this.isLeaf())throw new Error("Inserting child to leaf node is not allowed.");var n=this.children.indexOf(e);if(n<0)throw new Error("Error inserting, child to insert after is not found.");this.children.splice(n+1,0,t),t.setParent(this),this.clearCache()},t.prototype.removeChild=function(t){if(this.isLeaf())throw new Error("Removing child from leaf node is not allowed.");var e=this.children.indexOf(t);if(e<0)throw new Error("Error removing child, child is not found.");this.children.splice(e,1),t.setParent(void 0),this.clearCache()},t.prototype.getChildren=function(){return this.children},t.prototype.getFirstChild=function(){var t=this.getChildren();if(0!==t.length)return t[0]},t.prototype.getLastChild=function(){var t=this.getChildren();if(0!==t.length)return t[t.length-1]},t.prototype.getPreviousSibling=function(){if(this.isRoot())throw new Error("Getting previous sibling on root node is not allowed.");var t=this.getParent().getChildren(),e=t.indexOf(this);if(e<0)throw new Error("Error getting previous sibling, node is not found in parent.");if(0!==e)return t[e-1]},t.prototype.getNextSibling=function(){if(this.isRoot())throw new Error("Getting next sibling on root node is not allowed.");var t=this.getParent().getChildren(),e=t.indexOf(this);if(e<0)throw new Error("Error getting next sibling, node is not found in parent.");if(e!==t.length-1)return t[e+1]},t.prototype.getPreviousSiblingAllowCrossParent=function(){if(this.isRoot())throw new Error("Getting previous sibling on root node is not allowed.");var t=this.getPreviousSibling();if(t)return t;var e=this.getParent();if(e&&!e.isRoot()){var n=e.getPreviousSiblingAllowCrossParent();if(n)return n.getLastChild()}},t.prototype.getNextSiblingAllowCrossParent=function(){if(this.isRoot())throw new Error("Getting next sibling on root node is not allowed.");var t=this.getNextSibling();if(t)return t;var e=this.getParent();if(e&&!e.isRoot()){var n=e.getNextSiblingAllowCrossParent();if(n)return n.getFirstChild()}},t.prototype.findDescendant=function(t){if(this.getId()===t)return this;if(!this.isLeaf())for(var e=0,n=this.children.length;e<n;e++){var o=this.children[e].findDescendant(t);if(o)return o}},t.prototype.clearCache=function(){if(this.clearOwnCache(),!this.isRoot()){var t=this.getParent();t&&t.clearCache()}},t.prototype.onDidUpdate=function(t){if(!this.isLeaf()){for(var e=this.children.slice(),n=t.children,o=0,r=0,i=n.length;r<i;r++){for(var a=n[r],s=-1,u=o,d=e.length;u<d;u++)if(e[u].getId()===a.getId()){s=u;break}if(s>=0){for(;o<s;)this.removeChild(e[o]),o++;e[o].onDidUpdate(a),o++}else o<e.length?this.insertChildBefore(a,e[o]):this.appendChild(a)}for(;o<e.length;)this.removeChild(e[o]),o++}},t.prototype.clearOwnCache=function(){},t}();e.Node=n}.apply(e,[n,e]))||(t.exports=o)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(10),n(15)],void 0===(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(o.Position);e.RenderPosition=r;var a=function(t){function e(e,n,o){var r=t.call(this)||this;return r.componentId=e,r.id=n,r.style=o,r}return i(e,t),e.prototype.getComponentId=function(){return this.componentId},e.prototype.getId=function(){return this.id},e.prototype.getStyle=function(){return this.style},e}(n.Node);e.RenderNode=a}.apply(e,o))||(t.exports=r)},,,function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getNodeClass=function(){return"atomic"},e.prototype.isRoot=function(){return!1},e.prototype.isLeaf=function(){return!0},e.prototype.resolvePosition=function(t,e){if(t>=this.getSize())throw new Error("Offset "+t+" is out of range.");return new n.LayoutPosition(this,e,t)},e.prototype.clearOwnCache=function(){},e}(n.LayoutNode);e.AtomicLayoutNode=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o;void 0===(o=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,n){this.parent=null,this.child=null,this.node=t,this.depth=e,this.offset=n}return t.prototype.getNode=function(){return this.node},t.prototype.getDepth=function(){return this.depth},t.prototype.getOffset=function(){return this.offset},t.prototype.setParent=function(t){this.parent=t},t.prototype.getParent=function(){return this.parent},t.prototype.setChild=function(t){this.child=t},t.prototype.getChild=function(){return this.child},t.prototype.getRoot=function(){return this.parent?this.parent.getRoot():this},t.prototype.getLeaf=function(){return this.child?this.child.getLeaf():this},t}();e.Position=n}.apply(e,[n,e]))||(t.exports=o)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getNodeClass=function(){return"block"},e.prototype.isRoot=function(){return!1},e.prototype.isLeaf=function(){return!1},e.prototype.getSize=function(){return void 0===this.size&&(this.size=this.getChildren().reduce(function(t,e){return t+e.getSize()},0)),this.size},e.prototype.getWidth=function(){var t=this.getParent();return t?t.getInnerWidth():0},e.prototype.getHeight=function(){return void 0===this.height&&(this.height=this.getChildren().reduce(function(t,e){return t+e.getHeight()},this.getVerticalPaddng())),this.height},e.prototype.resolvePosition=function(t,e){for(var o=0,r=0,i=this.getChildren();r<i.length;r++){var a=i[r],s=a.getSize();if(o+s>t){var u=new n.LayoutPosition(this,e,t),d=a.resolvePosition(t-o,e+1);return u.setChild(d),d.setParent(u),u}o+=s}throw new Error("Offset "+t+" is out of range.")},e.prototype.convertCoordinatesToOffset=function(t,e){for(var n=0,o=0,r=0,i=this.getChildren();r<i.length;r++){var a=i[r],s=a.getHeight();if(e>=o&&e<=o+s){n+=a.convertCoordinateToOffset(t);break}n+=a.getSize(),o+=s}return n},e.prototype.resolveRects=function(t,e){var n=this,o=[],r=0,i=0;return this.getChildren().forEach(function(a,s){var u=a.getHeight(),d=a.getSize(),c=Math.max(t-r,0),p=Math.min(e-r,d);c<=d&&p>=0&&a.resolveRects(c,p).forEach(function(t){var e=t.width,r=t.height,a=n.getPaddingTop(),s=n.getPaddingBottom(),d=t.left,c=t.right,p=i+a+t.top,h=n.getHeight()-i-u-t.bottom-s;o.push({width:e,height:r,left:d,right:c,top:p,bottom:h,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,paddingLeft:t.paddingLeft,paddingRight:t.paddingRight})});r+=a.getSize(),i+=u}),o},e.prototype.clearOwnCache=function(){this.size=void 0,this.height=void 0},e}(n.LayoutNode);e.BlockLayoutNode=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getNodeClass=function(){return"doc"},e.prototype.isRoot=function(){return!0},e.prototype.isLeaf=function(){return!1},e.prototype.getSize=function(){return void 0===this.size&&(this.size=this.getChildren().reduce(function(t,e){return t+e.getSize()},0)),this.size},e.prototype.getWidth=function(){return 0},e.prototype.getHeight=function(){return 0},e.prototype.getPaddingTop=function(){return 0},e.prototype.getPaddingBottom=function(){return 0},e.prototype.getPaddingLeft=function(){return 0},e.prototype.getPaddingRight=function(){return 0},e.prototype.resolvePosition=function(t){for(var e=0,o=0,r=this.getChildren();o<r.length;o++){var i=r[o],a=i.getSize();if(e+a>t){var s=new n.LayoutPosition(this,0,t),u=i.resolvePosition(t-e,1);return s.setChild(u),u.setParent(s),s}e+=a}throw new Error("Offset "+t+" is out of range.")},e.prototype.resolvePageRects=function(t,e){var n=[];this.getChildren().forEach(function(){n.push([])});var o=0;return this.getChildren().forEach(function(r,i){var a=r.getSize(),s=a,u=Math.max(t-o,0),d=Math.min(e-o,s);u<=s&&d>=0&&r.resolveRects(u,d).forEach(function(t){n[i].push(t)});o+=a}),n},e.prototype.clearOwnCache=function(){this.size=void 0},e}(n.LayoutNode);e.DocLayoutNode=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(5)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getNodeClass=function(){return"inline"},e.prototype.isRoot=function(){return!1},e.prototype.isLeaf=function(){return!1},e.prototype.getSize=function(){return void 0===this.size&&(this.size=this.getChildren().reduce(function(t,e){return t+e.getSize()},0)),this.size},e.prototype.getWidth=function(){return void 0===this.width&&(this.width=this.getChildren().reduce(function(t,e){return t+e.getWidth()},this.getHorizontalPaddng())),this.width},e.prototype.getHeight=function(){return void 0===this.height&&(this.height=this.getChildren().reduce(function(t,e){return Math.max(t,e.getHeight())},0)+this.getVerticalPaddng()),this.height},e.prototype.getTailTrimmedWidth=function(){if(void 0===this.tailTrimmedWidth){var t=this.getLastChild();this.tailTrimmedWidth=t?this.getWidth()-t.getWidth()+t.getTailTrimmedWidth():0}return this.tailTrimmedWidth},e.prototype.resolvePosition=function(t,e){for(var o=0,r=0,i=this.getChildren();r<i.length;r++){var a=i[r],s=a.getSize();if(o+s>t){var u=new n.LayoutPosition(this,e,t),d=a.resolvePosition(t-o,e+1);return u.setChild(d),d.setParent(u),u}o+=s}throw new Error("Offset "+t+" is out of range.")},e.prototype.convertCoordinateToOffset=function(t){for(var e=0,n=0,o=0,r=this.getChildren();o<r.length;o++){var i=r[o],a=i.getWidth();if(t>=n&&t<=n+a){e+=i.convertCoordinateToOffset(t-n);break}e+=i.getSize(),n+=a}return e},e.prototype.resolveRects=function(t,e){var n=this,o=[],r=0,i=0;return this.getChildren().forEach(function(a,s){var u=a.getWidth(),d=a.getSize(),c=Math.max(t-r,0),p=Math.min(e-r,d);c<=d&&p>=0&&a.resolveRects(c,p).forEach(function(t){var e=t.width,r=t.height,a=n.getPaddingTop(),s=n.getPaddingBottom(),u=i+t.left,d=n.getWidth()-i-t.right,c=a+t.top,p=s+t.bottom;o.push({width:e,height:r,left:u,right:d,top:c,bottom:p,paddingTop:a,paddingBottom:s,paddingLeft:0,paddingRight:0})});r+=a.getSize(),i+=u}),o},e.prototype.clearOwnCache=function(){this.size=void 0,this.width=void 0,this.height=void 0,this.tailTrimmedWidth=void 0},e}(n.LayoutNode);e.InlineLayoutNode=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(11)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.isRoot=function(){return!1},e.prototype.isLeaf=function(){return!0},e.prototype.resolvePosition=function(t,e){return new n.RenderPosition(this,e,t)},e.prototype.convertOffsetToModelOffset=function(t){return t},e.prototype.convertModelOffsetToOffset=function(t){return t},e}(n.RenderNode);e.AtomicRenderNode=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(11)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.isRoot=function(){return!1},e.prototype.isLeaf=function(){return!1},e.prototype.getSize=function(){return void 0===this.size&&(this.size=this.getChildren().reduce(function(t,e){return t+e.getSize()},0)),this.size},e.prototype.getModelSize=function(){return void 0===this.modelSize&&(this.modelSize=this.getChildren().reduce(function(t,e){return t+e.getModelSize()},2)),this.modelSize},e.prototype.resolvePosition=function(t,e){for(var o=0,r=0,i=this.getChildren();r<i.length;r++){var a=i[r],s=a.getSize();if(o+s>t){var u=new n.RenderPosition(this,e,t),d=a.resolvePosition(t-o,e+1);return u.setChild(d),d.setParent(u),u}o+=s}throw new Error("Offset "+t+" is out of range.")},e.prototype.clearOwnCache=function(){this.size=void 0,this.modelSize=void 0},e.prototype.convertOffsetToModelOffset=function(t){for(var e=0,n=1,o=0,r=this.getChildren();o<r.length;o++){var i=r[o],a=i.getSize();if(e+a>t)return n+i.convertOffsetToModelOffset(t-e);e+=a,n+=i.getModelSize()}throw new Error("Offset "+t+" is out of range.")},e.prototype.convertModelOffsetToOffset=function(t){for(var e=1,n=0,o=0,r=this.getChildren();o<r.length;o++){var i=r[o],a=i.getModelSize();if(e+a>t)return n+i.convertModelOffsetToOffset(t-e);e+=a,n+=i.getSize()}throw new Error("Model offset "+t+" is out of range.")},e}(n.RenderNode);e.InlineRenderNode=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o;void 0===(o=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.at=t,this.tokens=e}return t.prototype.getOffsetAdjustment=function(){return{at:this.at,delta:this.tokens.length}},t.prototype.adjustOffset=function(e){var n=this.at;return e.forEach(function(t){n>=t.at&&(n+=t.delta)}),new t(n,this.tokens)},t.prototype.getAt=function(){return this.at},t.prototype.getTokens=function(){return this.tokens},t}();e.InsertOperation=n;var o=function(){function t(t,e){this.from=t,this.to=e}return t.prototype.getOffsetAdjustment=function(){return{at:this.to,delta:this.from-this.to}},t.prototype.adjustOffset=function(e){var n=this.from,o=this.to;return e.forEach(function(t){n>=t.at&&(n+=t.delta),o>=t.at&&(o+=t.delta)}),new t(n,o)},t.prototype.getFrom=function(){return this.from},t.prototype.getTo=function(){return this.to},t}();e.DeleteOperation=o;var r=function(){function t(t,e){this.at=t,this.tokens=e}return t.prototype.getAt=function(){return this.at},t.prototype.getTokens=function(){return this.tokens},t}();e.AppliedInsertOperation=r;var i=function(){function t(t,e){this.at=t,this.tokens=e}return t.prototype.getAt=function(){return this.at},t.prototype.getTokens=function(){return this.tokens},t}();e.AppliedDeleteOperation=i;var a=function(){function t(){this.operations=[],this.cursorAnchor=null,this.cursorHead=null,this.cursorLockLeft=null}return t.prototype.addOperation=function(t){this.operations.push(t)},t.prototype.getOperations=function(){return this.operations},t.prototype.setCursor=function(t){this.cursorAnchor=t,this.cursorHead=t},t.prototype.setCursorHead=function(t){this.cursorHead=t},t.prototype.setCursorLockLeft=function(t){this.cursorLockLeft=t},t.prototype.getCursorAnchor=function(){return this.cursorAnchor},t.prototype.getCursorHead=function(){return this.cursorHead},t.prototype.getCursorLockLeft=function(){return this.cursorLockLeft},t}();e.Transformation=a;var s=function(){function t(t,e,n,o){this.originalTransformation=t,this.originalCursorHead=e,this.originalCursorAnchor=n,this.originalCursorLockLeft=o,this.operations=[]}return t.prototype.addOperation=function(t){var e,n,o,a;if(this.operations.push(t),t instanceof r){e=s=t.getAt(),n=s,o=s,a=s+t.getTokens().length}else{if(!(t instanceof i))throw new Error("Invalid applied operation encountered.");var s;e=s=t.getAt(),n=s+t.getTokens().length,o=s,a=s}(void 0===this.beforeFrom||e<this.beforeFrom)&&(this.beforeFrom=e),(void 0===this.beforeTo||n>this.beforeTo)&&(this.beforeTo=n),(void 0===this.afterFrom||o<this.afterFrom)&&(this.afterFrom=o),(void 0===this.afterTo||a>this.afterTo)&&(this.afterTo=a)},t.prototype.getOperations=function(){return this.operations},t.prototype.getOriginalTransformation=function(){return this.originalTransformation},t.prototype.getOriginalCursorHead=function(){return this.originalCursorHead},t.prototype.getOriginalCursorAnchor=function(){return this.originalCursorAnchor},t.prototype.getOriginalCursorLockLeft=function(){return this.originalCursorLockLeft},t.prototype.getTransformedRange=function(){if(void 0!==this.beforeFrom)return{beforeFrom:this.beforeFrom,beforeTo:this.beforeTo,afterFrom:this.afterFrom,afterTo:this.afterTo}},t}();e.AppliedTransformation=s}.apply(e,[n,e]))||(t.exports=o)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(10),n(15)],void 0===(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(o.Position);e.ModelPosition=r;var a=function(t){function e(e,n,o){var r=t.call(this)||this;return r.componentId=e,r.id=n,r.attributes=o,r}return i(e,t),e.prototype.getComponentId=function(){return this.componentId},e.prototype.getId=function(){return this.id},e.prototype.getAttributes=function(){return this.attributes},e}(n.Node);e.ModelNode=a}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(6),n(22)],void 0===(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n,o){var r=t.call(this,e,n,o)||this;return r.content="",r}return i(e,t),e.prototype.isRoot=function(){return!1},e.prototype.isLeaf=function(){return!0},e.prototype.setContent=function(t){this.content=t,this.clearCache()},e.prototype.getContent=function(){return this.content},e.prototype.getSize=function(){return void 0===this.size?2+this.content.length:this.size},e.prototype.resolvePosition=function(t,e){if(t>=this.getSize())throw new Error("Offset "+t+" is out of range.");return new o.ModelPosition(this,e,t)},e.prototype.clearOwnCache=function(){this.size=void 0},e.prototype.onDidUpdate=function(e){t.prototype.onDidUpdate.call(this,e),this.content!==e.getContent()&&(this.content=e.getContent(),this.clearCache())},e.prototype.toTokens=function(){var t=[];return t.push({componentId:this.getComponentId(),partId:this.getPartId(),id:this.getId(),attributes:this.getAttributes()}),t.push.apply(t,this.content.split("")),t.push(n.CLOSE_TOKEN),t},e}(o.ModelNode);e.InlineModelNode=r}.apply(e,o))||(t.exports=r)},,,,,function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(4),n(5),n(58)],void 0===(r=function(t,e,n,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var o=t.call(this,e,n.generateId())||this;return o.flowed=!1,o}return i(e,t),e.prototype.getNodeClass=function(){return"line"},e.prototype.isRoot=function(){return!1},e.prototype.isLeaf=function(){return!1},e.prototype.getSize=function(){return void 0===this.size&&(this.size=this.getChildren().reduce(function(t,e){return t+e.getSize()},0)),this.size},e.prototype.getWidth=function(){var t=this.getParent();return t?t.getInnerWidth():0},e.prototype.getHeight=function(){return void 0===this.height&&(this.height=this.getChildren().reduce(function(t,e){return Math.max(t,e.getHeight())},this.getVerticalPaddng())),this.height},e.prototype.getContentWidth=function(){return void 0===this.contentWidth&&(this.contentWidth=this.getChildren().reduce(function(t,e){return t+e.getWidth()},0)),this.contentWidth},e.prototype.getPaddingTop=function(){return 0},e.prototype.getPaddingBottom=function(){return 0},e.prototype.getPaddingLeft=function(){return 0},e.prototype.getPaddingRight=function(){return 0},e.prototype.isFlowed=function(){return this.flowed},e.prototype.markAsFlowed=function(){this.flowed=!0},e.prototype.resolvePosition=function(t,e){for(var n=0,r=0,i=this.getChildren();r<i.length;r++){var a=i[r],s=a.getSize();if(n+s>t){var u=new o.LayoutPosition(this,e,t),d=a.resolvePosition(t-n,e+1);return u.setChild(d),d.setParent(u),u}n+=s}throw new Error("Offset "+t+" is out of range.")},e.prototype.convertCoordinateToOffset=function(t){for(var e=0,n=0,o=0,r=this.getChildren();o<r.length;o++){var i=r[o],a=i.getWidth();if(t>=n&&t<=n+a){e+=i.convertCoordinateToOffset(t-n);break}e+=i.getSize(),n+=a}return e===this.getSize()?e-1:e},e.prototype.resolveRects=function(t,e){var n=this,o=[],i=0,a=0;return this.getChildren().forEach(function(r,s){var u=r.getWidth(),d=r.getSize(),c=Math.max(t-i,0),p=Math.min(e-i,d);c<=d&&p>=0&&(c!==p||p!==d)&&r.resolveRects(c,p).forEach(function(t){var e=t.width,r=t.height,i=a+t.left,s=n.getWidth()-a-t.right,u=t.top,d=t.bottom;o.push({width:e,height:r,left:i,right:s,top:u,bottom:d,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,paddingLeft:0,paddingRight:0})});i+=r.getSize(),a+=u}),r.mergeLayoutRects(o),o},e.prototype.clearOwnCache=function(){this.size=void 0,this.height=void 0,this.contentWidth=void 0,this.flowed=!1},e}(o.LayoutNode);e.LineLayoutNode=a}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(4),n(5)],void 0===(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,o,r,i,a,s,u){var d=t.call(this,e,n.generateId())||this;return d.componentId=e,d.width=o,d.height=r,d.paddingTop=i,d.paddingBottom=a,d.paddingLeft=s,d.paddingRight=u,d.flowed=!1,d}return i(e,t),e.prototype.getNodeClass=function(){return"page"},e.prototype.isRoot=function(){return!1},e.prototype.isLeaf=function(){return!1},e.prototype.getSize=function(){return void 0===this.size&&(this.size=this.getChildren().reduce(function(t,e){return t+e.getSize()},0)),this.size},e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.getPaddingTop=function(){return this.paddingTop},e.prototype.getPaddingBottom=function(){return this.paddingBottom},e.prototype.getPaddingLeft=function(){return this.paddingLeft},e.prototype.getPaddingRight=function(){return this.paddingRight},e.prototype.getContentHeight=function(){return void 0===this.contentHeight&&(this.contentHeight=this.getChildren().reduce(function(t,e){return t+e.getHeight()},0)),this.contentHeight},e.prototype.isFlowed=function(){return this.flowed},e.prototype.markAsFlowed=function(){this.flowed=!0},e.prototype.resolvePosition=function(t,e){for(var n=0,r=0,i=this.getChildren();r<i.length;r++){var a=i[r],s=a.getSize();if(n+s>t){var u=new o.LayoutPosition(this,e,t),d=a.resolvePosition(t-n,e+1);return u.setChild(d),d.setParent(u),u}n+=s}throw new Error("Offset "+t+" is out of range.")},e.prototype.convertCoordinatesToOffset=function(t,e){for(var n=0,o=0,r=Math.min(Math.max(t-this.getPaddingLeft(),0),this.getWidth()-this.getPaddingRight()),i=Math.min(Math.max(e-this.getPaddingTop(),0),this.getHeight()-this.getPaddingBottom()),a=0,s=this.getChildren();a<s.length;a++){var u=s[a],d=u.getHeight();if(i>=o&&i<=o+d){n+=u.convertCoordinatesToOffset(r,i-o);break}n+=u.getSize(),o+=d}if(n===this.getSize()){var c=this.getLastChild();c&&(n-=c.getSize(),n+=c.convertCoordinatesToOffset(r,c.getHeight()))}return n===this.getSize()&&n--,n},e.prototype.resolveRects=function(t,e){var n=this,o=[],r=0,i=0;return this.getChildren().forEach(function(a,s){var u=a.getHeight(),d=a.getSize(),c=Math.max(t-r,0),p=Math.min(e-r,d);c<=d&&p>=0&&a.resolveRects(c,p).forEach(function(t){var e=t.width,r=t.height,a=n.getPaddingTop(),s=n.getPaddingBottom(),d=n.getPaddingLeft(),c=n.getPaddingRight(),p=d+t.left,h=c+t.right,f=i+a+t.top,l=n.getHeight()-i-u-t.bottom-s;o.push({width:e,height:r,left:p,right:h,top:f,bottom:l,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,paddingLeft:t.paddingLeft,paddingRight:t.paddingRight})});r+=a.getSize(),i+=u}),o},e.prototype.clearOwnCache=function(){this.size=void 0,this.contentHeight=void 0,this.flowed=!1},e}(o.LayoutNode);e.PageLayoutNode=r}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(11)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.isRoot=function(){return!1},e.prototype.isLeaf=function(){return!1},e.prototype.getSize=function(){return void 0===this.size&&(this.size=this.getChildren().reduce(function(t,e){return t+e.getSize()},0)),this.size},e.prototype.getModelSize=function(){return void 0===this.modelSize&&(this.modelSize=this.getChildren().reduce(function(t,e){return t+e.getModelSize()},2)),this.modelSize},e.prototype.resolvePosition=function(t,e){for(var o=0,r=0,i=this.getChildren();r<i.length;r++){var a=i[r],s=a.getSize();if(o+s>t){var u=new n.RenderPosition(this,e,t),d=a.resolvePosition(t-o,e+1);return u.setChild(d),d.setParent(u),u}o+=s}throw new Error("Offset "+t+" is out of range.")},e.prototype.clearOwnCache=function(){this.size=void 0,this.modelSize=void 0},e.prototype.convertOffsetToModelOffset=function(t){for(var e=0,n=1,o=0,r=this.getChildren();o<r.length;o++){var i=r[o],a=i.getSize();if(e+a>t)return n+i.convertOffsetToModelOffset(t-e);e+=a,n+=i.getModelSize()}throw new Error("Offset "+t+" is out of range.")},e.prototype.convertModelOffsetToOffset=function(t){for(var e=1,n=0,o=0,r=this.getChildren();o<r.length;o++){var i=r[o],a=i.getModelSize();if(e+a>t)return n+i.convertModelOffsetToOffset(t-e);e+=a,n+=i.getSize()}throw new Error("Model offset "+t+" is out of range.")},e}(n.RenderNode);e.BlockRenderNode=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(11)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.isRoot=function(){return!0},e.prototype.isLeaf=function(){return!1},e.prototype.getSize=function(){return void 0===this.size&&(this.size=this.getChildren().reduce(function(t,e){return t+e.getSize()},0)),this.size},e.prototype.getModelSize=function(){return void 0===this.modelSize&&(this.modelSize=this.getChildren().reduce(function(t,e){return t+e.getModelSize()},2)),this.modelSize},e.prototype.resolvePosition=function(t){for(var e=0,o=0,r=this.getChildren();o<r.length;o++){var i=r[o],a=i.getSize();if(e+a>t){var s=new n.RenderPosition(this,0,t),u=i.resolvePosition(t-e,1);return s.setChild(u),u.setParent(s),s}e+=a}throw new Error("Offset "+t+" is out of range.")},e.prototype.clearOwnCache=function(){this.size=void 0,this.modelSize=void 0},e.prototype.convertOffsetToModelOffset=function(t){for(var e=0,n=1,o=0,r=this.getChildren();o<r.length;o++){var i=r[o],a=i.getSize();if(e+a>t)return n+i.convertOffsetToModelOffset(t-e);e+=a,n+=i.getModelSize()}throw new Error("Offset "+t+" is out of range.")},e.prototype.convertModelOffsetToOffset=function(t){for(var e=1,n=0,o=0,r=this.getChildren();o<r.length;o++){var i=r[o],a=i.getModelSize();if(e+a>t)return n+i.convertModelOffsetToOffset(t-e);e+=a,n+=i.getSize()}throw new Error("Model offset "+t+" is out of range.")},e}(n.RenderNode);e.DocRenderNode=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(6),n(22)],void 0===(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.isRoot=function(){return!1},e.prototype.isLeaf=function(){return!1},e.prototype.getSize=function(){return void 0===this.size&&(this.size=this.getChildren().reduce(function(t,e){return t+e.getSize()},2)),this.size},e.prototype.resolvePosition=function(t,e){for(var n=1,r=0,i=this.getChildren();r<i.length;r++){var a=i[r],s=a.getSize();if(n+s>t){var u=new o.ModelPosition(this,e,t),d=a.resolvePosition(t-n,e+1);return u.setChild(d),d.setParent(u),u}n+=s}if(t<this.getSize())return new o.ModelPosition(this,e,t);throw new Error("Offset "+t+" is out of range.")},e.prototype.clearOwnCache=function(){this.size=void 0},e.prototype.toTokens=function(){var t=[];return t.push({componentId:this.getComponentId(),partId:this.getPartId(),id:this.getId(),attributes:this.getAttributes()}),this.getChildren().forEach(function(e){t.push.apply(t,e.toTokens())}),t.push(n.CLOSE_TOKEN),t},e}(o.ModelNode);e.BlockModelNode=r}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(6),n(22)],void 0===(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.isRoot=function(){return!0},e.prototype.isLeaf=function(){return!1},e.prototype.getSize=function(){return void 0===this.size&&(this.size=this.getChildren().reduce(function(t,e){return t+e.getSize()},2)),this.size},e.prototype.resolvePosition=function(t){for(var e=1,n=0,r=this.getChildren();n<r.length;n++){var i=r[n],a=i.getSize();if(e+a>t){var s=new o.ModelPosition(this,0,t),u=i.resolvePosition(t-e,1);return s.setChild(u),u.setParent(s),s}e+=a}if(t<this.getSize())return new o.ModelPosition(this,0,t);throw new Error("Offset "+t+" is out of range.")},e.prototype.clearOwnCache=function(){this.size=void 0},e.prototype.toTokens=function(){var t=[];return t.push({componentId:this.getComponentId(),partId:this.getPartId(),id:this.getId(),attributes:this.getAttributes()}),this.getChildren().forEach(function(e){t.push.apply(t,e.toTokens())}),t.push(n.CLOSE_TOKEN),t},e}(o.ModelNode);e.DocModelNode=r}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(8)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getNodeClass=function(){return"inline"},e.prototype.isRoot=function(){return!1},e.prototype.isLeaf=function(){return!0},e}(n.ViewNode);e.InlineViewNode=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o;void 0===(o=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.detectPlatform=function(){return navigator.platform.startsWith("Linux")?"Linux":["Windows","Win16","Win32"].includes(navigator.platform)?"Windows":["Macintosh","MacIntel","MacPPC","Mac68K"].includes(navigator.platform)?"macOS":"Unknown"}}.apply(e,[n,e]))||(t.exports=o)},function(t,e,n){var o;void 0===(o=function(t,e){"use strict";function n(t){for(var e=[],n=t;;){if(e.unshift(n),n.isRoot())return e;n=n.getParent()}}Object.defineProperty(e,"__esModule",{value:!0}),e.getNodeLineage=n,e.findCommonLineage=function(t,e){for(var o=n(t),r=n(e),i=0;i<o.length&&i<r.length&&o[i]===r[i];)i++;if(0===i)throw new Error("No common lineage found.");return o[i-1]}}.apply(e,[n,e]))||(t.exports=o)},function(t,e,n){var o,r;o=[n,e,n(7)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.prototype.join=function(t,e){if(n.identifyLayoutNodeType(t)!==n.identifyLayoutNodeType(e))throw new Error("Nodes to be joined must be of the same type.");switch(n.identifyLayoutNodeType(t)){case"Page":this.joinPageNodes(t,e);break;case"Line":this.joinLineNodes(t,e)}},t.prototype.joinPageNodes=function(t,e){var n=t.getLastChild(),o=e.getFirstChild();n&&o&&n.getId()===o.getId()&&this.joinBlockNodes(n,o),e.getChildren().slice().forEach(function(n){e.removeChild(n),t.appendChild(n)});var r=e.getParent();r&&r.removeChild(e)},t.prototype.joinBlockNodes=function(t,e){e.getChildren().slice().forEach(function(n){e.removeChild(n),t.appendChild(n)});var n=e.getParent();n&&n.removeChild(e)},t.prototype.joinLineNodes=function(t,e){var n=t.getLastChild(),o=e.getFirstChild();n&&o&&n.getId()===o.getId()&&this.joinInlineNodes(n,o),e.getChildren().slice().forEach(function(n){e.removeChild(n),t.appendChild(n)});var r=e.getParent();r&&r.removeChild(e)},t.prototype.joinInlineNodes=function(t,e){e.getChildren().slice().forEach(function(n){e.removeChild(n),t.appendChild(n)});var n=e.getParent();n&&n.removeChild(e)},t}();e.NodeJoiner=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.identifyTokenType=function(t){if(t===n.CLOSE_TOKEN)return"CloseToken";if("string"===typeof t)return"ContentToken";if("object"===typeof t&&t.hasOwnProperty("componentId"))return"OpenToken";throw new Error("Failed to identify token type: "+t+".")}}.apply(e,o))||(t.exports=r)},,,,function(t,e,n){var o,r;o=[n,e,n(56)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Taleweaver=n.Taleweaver}.apply(e,o))||(t.exports=r)},,,,,,function(t,e,n){t.exports=n(114)},,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){var o,r,i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};o=[n,e,n(57),n(60),n(61),n(63),n(64),n(66),n(68),n(70),n(72),n(78),n(79),n(81),n(84),n(85),n(90),n(93),n(96),n(97),n(4),n(100)],void 0===(r=function(t,e,n,o,r,a,s,u,d,c,p,h,f,l,g,v,y,m,w,b,C,S){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n=i(n),o=i(o),r=i(r),a=i(a);var O=function(){function t(t,e){this.instanceId=C.generateId(),this.serviceRegistry=new w.ServiceRegistry,this.configService=new h.ConfigService(this.buildBaseConfig(),e),this.commandService=new s.CommandService(this.configService,this.serviceRegistry),this.componentService=new p.ComponentService(this.configService),this.cursorService=new f.CursorService(this.configService),this.stateService=new b.StateService(this.cursorService,t),this.historyService=new l.HistoryService(this.configService,this.stateService),this.modelService=new y.ModelService(this.componentService,this.stateService),this.renderService=new m.RenderService(this.componentService,this.modelService),this.layoutService=new v.LayoutService(this.componentService,this.renderService),this.viewService=new S.ViewService(this.instanceId,this.componentService,this.layoutService,this.cursorService,this.renderService,this.commandService),this.keyBindingService=new g.KeyBindingService(this.configService,this.commandService,this.viewService),this.registerServices()}return t.prototype.attach=function(t){this.viewService.attach(t)},t.prototype.getServiceRegistry=function(){return this.serviceRegistry},t.prototype.buildBaseConfig=function(){return{commands:{"tw.cursor.move":n.move,"tw.cursor.moveUp":n.moveUp,"tw.cursor.moveDown":n.moveDown,"tw.cursor.moveLeft":n.moveLeft,"tw.cursor.moveRight":n.moveRight,"tw.cursor.moveLeftByWord":n.moveLeftByWord,"tw.cursor.moveRightByWord":n.moveRightByWord,"tw.cursor.moveToLineStart":n.moveToLineStart,"tw.cursor.moveToLineEnd":n.moveToLineEnd,"tw.cursor.moveToDocStart":n.moveToDocStart,"tw.cursor.moveToDocEnd":n.moveToDocEnd,"tw.cursor.moveHead":n.moveHead,"tw.cursor.moveHeadUp":n.moveHeadUp,"tw.cursor.moveHeadDown":n.moveHeadDown,"tw.cursor.moveHeadLeft":n.moveHeadLeft,"tw.cursor.moveHeadRight":n.moveHeadRight,"tw.cursor.moveHeadLeftByWord":n.moveHeadLeftByWord,"tw.cursor.moveHeadRightByWord":n.moveHeadRightByWord,"tw.cursor.moveHeadToLineStart":n.moveHeadToLineStart,"tw.cursor.moveHeadToLineEnd":n.moveHeadToLineEnd,"tw.cursor.moveHeadToDocStart":n.moveHeadToDocStart,"tw.cursor.moveHeadToDocEnd":n.moveHeadToDocEnd,"tw.cursor.selectAll":n.selectAll,"tw.cursor.selectWord":n.selectWord,"tw.cursor.selectBlock":n.selectBlock,"tw.history.undo":o.undo,"tw.history.redo":o.redo,"tw.state.insert":r.insert,"tw.state.deleteBackward":r.deleteBackward,"tw.state.deleteForward":r.deleteForward,"tw.state.splitLine":r.splitLine,"tw.view.focus":a.focus,"tw.view.blur":a.blur},components:{doc:new u.DocComponent("doc"),paragraph:new d.ParagraphComponent("paragraph"),text:new c.TextComponent("text",new c.TextMeasurer)},cursor:{disable:!1},history:{collapseThreshold:500,maxCollapseDuration:2e3},keyBindings:{common:{left:{command:"tw.cursor.moveLeft"},right:{command:"tw.cursor.moveRight"},up:{command:"tw.cursor.moveUp"},down:{command:"tw.cursor.moveDown"},"shift+left":{command:"tw.cursor.moveHeadLeft"},"shift+right":{command:"tw.cursor.moveHeadRight"},"shift+up":{command:"tw.cursor.moveHeadUp"},"shift+down":{command:"tw.cursor.moveHeadDown"},backspace:{command:"tw.state.deleteBackward"},delete:{command:"tw.state.deleteForward"},enter:{command:"tw.state.splitLine"}},macos:{"alt+left":{command:"tw.cursor.moveLeftByWord"},"alt+right":{command:"tw.cursor.moveRightByWord"},"shift+alt+left":{command:"tw.cursor.moveHeadLeftByWord"},"shift+alt+right":{command:"tw.cursor.moveHeadRightByWord"},"cmd+left":{command:"tw.cursor.moveToLineStart"},"cmd+right":{command:"tw.cursor.moveToLineEnd"},"cmd+up":{command:"tw.cursor.moveToDocStart"},"cmd+down":{command:"tw.cursor.moveToDocEnd"},"shift+cmd+left":{command:"tw.cursor.moveHeadToLineStart"},"shift+cmd+right":{command:"tw.cursor.moveHeadToLineEnd"},"shift+cmd+up":{command:"tw.cursor.moveHeadToDocStart"},"shift+cmd+down":{command:"tw.cursor.moveHeadToDocEnd"},"cmd+a":{command:"tw.cursor.selectAll"},"cmd+z":{command:"tw.history.undo"},"shift+cmd+z":{command:"tw.history.redo"}},windows:{"ctrl+left":{command:"tw.cursor.moveLeftByWord"},"ctrl+right":{command:"tw.cursor.moveRightByWord"},"ctrl+shift+left":{command:"tw.cursor.moveHeadLeftByWord"},"ctrl+shift+right":{command:"tw.cursor.moveHeadRightByWord"},home:{command:"tw.cursor.moveToLineStart"},end:{command:"tw.cursor.moveToLineEnd"},"ctrl+home":{command:"tw.cursor.moveToDocStart"},"ctrl+end":{command:"tw.cursor.moveToDocEnd"},"shift+home":{command:"tw.cursor.moveHeadToLineStart"},"shift+end":{command:"tw.cursor.moveHeadToLineEnd"},"ctrl+shift+home":{command:"tw.cursor.moveHeadToDocStart"},"ctrl+shift+end":{command:"tw.cursor.moveHeadToDocEnd"},"ctrl+a":{command:"tw.cursor.selectAll"},"ctrl+z":{command:"tw.history.undo"},"ctrl+shift+z":{command:"tw.history.redo"}},linux:{"ctrl+left":{command:"tw.cursor.moveLeftByWord"},"ctrl+right":{command:"tw.cursor.moveRightByWord"},"ctrl+shift+left":{command:"tw.cursor.moveHeadLeftByWord"},"ctrl+shift+right":{command:"tw.cursor.moveHeadRightByWord"},home:{command:"tw.cursor.moveToLineStart"},end:{command:"tw.cursor.moveToLineEnd"},"ctrl+home":{command:"tw.cursor.moveToDocStart"},"ctrl+end":{command:"tw.cursor.moveToDocEnd"},"shift+home":{command:"tw.cursor.moveHeadToLineStart"},"shift+end":{command:"tw.cursor.moveHeadToLineEnd"},"ctrl+shift+home":{command:"tw.cursor.moveHeadToDocStart"},"ctrl+shift+end":{command:"tw.cursor.moveHeadToDocEnd"},"ctrl+a":{command:"tw.cursor.selectAll"},"ctrl+z":{command:"tw.history.undo"},"ctrl+shift+z":{command:"tw.history.redo"}}},page:{width:816,height:1056,paddingTop:40,paddingBottom:40,paddingLeft:40,paddingRight:40}}},t.prototype.registerServices=function(){this.serviceRegistry.registerService("config",this.configService),this.serviceRegistry.registerService("command",this.commandService),this.serviceRegistry.registerService("component",this.componentService),this.serviceRegistry.registerService("cursor",this.cursorService),this.serviceRegistry.registerService("history",this.historyService),this.serviceRegistry.registerService("state",this.stateService),this.serviceRegistry.registerService("model",this.modelService),this.serviceRegistry.registerService("render",this.renderService),this.serviceRegistry.registerService("layout",this.layoutService),this.serviceRegistry.registerService("view",this.viewService),this.serviceRegistry.registerService("keyBinding",this.keyBindingService)},t}();e.Taleweaver=O}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{u(o.next(t))}catch(e){i(e)}}function s(t){try{u(o.throw(t))}catch(e){i(e)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}u((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};o=[n,e,n(7),n(59),n(21)],void 0===(r=function(t,e,n,o,r){"use strict";var s=this;Object.defineProperty(e,"__esModule",{value:!0}),e.move=function(t,e){return i(s,void 0,void 0,function(){var n;return a(this,function(o){return(n=new r.Transformation).setCursor(e),t.getService("state").applyTransformation(n),[2]})})},e.moveLeft=function(t){return i(s,void 0,void 0,function(){var e,n,o,i,s;return a(this,function(a){if(!(e=t.getService("cursor")).hasCursor())return[2];if(n=new r.Transformation,o=e.getCursorState(),i=o.anchor,s=o.head,i===s){if(s<1)return[2];n.setCursor(s-1)}else i<s?n.setCursor(i):i>s&&n.setCursor(s);return t.getService("state").applyTransformation(n),[2]})})},e.moveRight=function(t){return i(s,void 0,void 0,function(){var e,n,o,i,s,u,d;return a(this,function(a){if(e=t.getService("cursor"),n=t.getService("render"),!e.hasCursor())return[2];if(o=new r.Transformation,i=e.getCursorState(),s=i.anchor,u=i.head,d=n.getDocSize(),s===u){if(u>=d-1)return[2];o.setCursor(u+1)}else s<u?o.setCursor(u):s>u&&o.setCursor(s);return t.getService("state").applyTransformation(o),[2]})})},e.moveUp=function(t){return i(s,void 0,void 0,function(){var e,o,i,s,u,d,c,p,h,f,l;return a(this,function(a){if(e=t.getService("cursor"),o=t.getService("layout"),!e.hasCursor())return[2];if(i=new r.Transformation,s=e.getCursorState(),u=Math.min(s.anchor,s.head),d=o.resolvePosition(u),c=d.getLeaf().getParent().getParent(),p=c.getNode(),"Line"!==n.identifyLayoutNodeType(p))throw new Error("Expecting position to be referencing an line node.");return(h=p.getPreviousSiblingAllowCrossParent())?(null===(f=s.leftLock)&&(f=p.resolveRects(c.getOffset(),c.getOffset())[0].left),i.setCursorLockLeft(f),l=h.convertCoordinateToOffset(f),i.setCursor(u-c.getOffset()-h.getSize()+l)):i.setCursor(u-c.getOffset()),t.getService("state").applyTransformation(i),[2]})})},e.moveDown=function(t){return i(s,void 0,void 0,function(){var e,o,i,s,u,d,c,p,h,f,l;return a(this,function(a){if(e=t.getService("cursor"),o=t.getService("layout"),!e.hasCursor())return[2];if(i=new r.Transformation,s=e.getCursorState(),u=Math.max(s.anchor,s.head),d=o.resolvePosition(u),c=d.getLeaf().getParent().getParent(),p=c.getNode(),"Line"!==n.identifyLayoutNodeType(p))throw new Error("Expecting position to be referencing an line node.");return(h=p.getNextSiblingAllowCrossParent())?(null===(f=s.leftLock)&&(f=p.resolveRects(c.getOffset(),c.getOffset())[0].left),i.setCursorLockLeft(f),l=h.convertCoordinateToOffset(f),i.setCursor(u-c.getOffset()+p.getSize()+l)):i.setCursor(u-c.getOffset()+p.getSize()-1),t.getService("state").applyTransformation(i),[2]})})},e.moveLeftByWord=function(t){return i(s,void 0,void 0,function(){var e,n,i,s,u,d,c,p,h;return a(this,function(a){if(e=t.getService("cursor"),n=t.getService("render"),!e.hasCursor())return[2];if(i=new r.Transformation,s=e.getCursorState(),u=Math.min(s.anchor,s.head),d=n.resolvePosition(u),c=d.getLeaf(),p=c.getNode(),"atomic"!==o.identifyRenderNodeType(p))throw new Error("Expecting position to be referencing an atomic node.");return c.getOffset()>0?i.setCursor(u-c.getOffset()):(h=p.getPreviousSiblingAllowCrossParent())?i.setCursor(u-h.getSize()):i.setCursor(u),t.getService("state").applyTransformation(i),[2]})})},e.moveRightByWord=function(t){return i(s,void 0,void 0,function(){var e,n,i,s,u,d,c,p,h,f;return a(this,function(a){if(e=t.getService("cursor"),n=t.getService("render"),!e.hasCursor())return[2];if(i=new r.Transformation,s=e.getCursorState(),u=Math.max(s.anchor,s.head),d=n.resolvePosition(u),c=d.getLeaf(),p=c.getNode(),"atomic"!==o.identifyRenderNodeType(p))throw new Error("Expecting position to be referencing an atomic node.");return c.getOffset()<p.getSize()-1?i.setCursor(u-c.getOffset()+p.getSize()-1):(h=p.getNextSiblingAllowCrossParent())?(f=u-c.getOffset()+p.getSize()+h.getSize(),h.isBreakable()&&f--,i.setCursor(f)):i.setCursor(u),t.getService("state").applyTransformation(i),[2]})})},e.moveToLineStart=function(t){return i(s,void 0,void 0,function(){var e,n,o,i,s,u,d;return a(this,function(a){return e=t.getService("cursor"),n=t.getService("layout"),e.hasCursor()?(o=new r.Transformation,i=e.getCursorState(),s=Math.min(i.anchor,i.head),u=n.resolvePosition(s),(d=u.getLeaf().getParent().getParent()).getOffset()>0?o.setCursor(s-d.getOffset()):o.setCursor(s),t.getService("state").applyTransformation(o),[2]):[2]})})},e.moveToLineEnd=function(t){return i(s,void 0,void 0,function(){var e,o,i,s,u,d,c,p;return a(this,function(a){if(e=t.getService("cursor"),o=t.getService("layout"),!e.hasCursor())return[2];if(i=new r.Transformation,s=e.getCursorState(),u=Math.max(s.anchor,s.head),d=o.resolvePosition(u),c=d.getLeaf().getParent().getParent(),p=c.getNode(),"Line"!==n.identifyLayoutNodeType(p))throw new Error("Expecting position to be referencing an line layout node.");return c.getOffset()<p.getSize()-1?i.setCursor(u-c.getOffset()+p.getSize()-1):i.setCursor(u),t.getService("state").applyTransformation(i),[2]})})},e.moveToDocStart=function(t){return i(s,void 0,void 0,function(){var e;return a(this,function(n){return t.getService("cursor").hasCursor()?((e=new r.Transformation).setCursor(0),t.getService("state").applyTransformation(e),[2]):[2]})})},e.moveToDocEnd=function(t){return i(s,void 0,void 0,function(){var e,n,o,i;return a(this,function(a){return e=t.getService("cursor"),n=t.getService("render"),e.hasCursor()?(o=new r.Transformation,i=n.getDocSize(),o.setCursor(i-1),t.getService("state").applyTransformation(o),[2]):[2]})})},e.moveHead=function(t,e){return i(s,void 0,void 0,function(){var n;return a(this,function(o){return(n=new r.Transformation).setCursorHead(e),t.getService("state").applyTransformation(n),[2]})})},e.moveHeadLeft=function(t){return i(s,void 0,void 0,function(){var e,n,o,i;return a(this,function(a){return(e=t.getService("cursor")).hasCursor()?(n=new r.Transformation,o=e.getCursorState(),(i=o.head)<1?[2]:(n.setCursorHead(i-1),t.getService("state").applyTransformation(n),[2])):[2]})})},e.moveHeadRight=function(t){return i(s,void 0,void 0,function(){var e,n,o,i,s,u;return a(this,function(a){return e=t.getService("cursor"),n=t.getService("render"),e.hasCursor()?(o=new r.Transformation,i=e.getCursorState(),s=i.head,u=n.getDocSize(),s>=u-1?[2]:(o.setCursorHead(s+1),t.getService("state").applyTransformation(o),[2])):[2]})})},e.moveHeadUp=function(t){return i(s,void 0,void 0,function(){var e,o,i,s,u,d,c,p,h,f;return a(this,function(a){if(e=t.getService("cursor"),o=t.getService("layout"),!e.hasCursor())return[2];if(i=new r.Transformation,s=e.getCursorState(),u=o.resolvePosition(s.head),d=u.getLeaf().getParent().getParent(),c=d.getNode(),"Line"!==n.identifyLayoutNodeType(c))throw new Error("Expecting position to be referencing an line node.");return(p=c.getPreviousSiblingAllowCrossParent())?(null===(h=s.leftLock)&&(h=c.resolveRects(d.getOffset(),d.getOffset())[0].left),i.setCursorLockLeft(h),f=p.convertCoordinateToOffset(h),i.setCursorHead(s.head-d.getOffset()-p.getSize()+f)):i.setCursorHead(s.head-d.getOffset()),t.getService("state").applyTransformation(i),[2]})})},e.moveHeadDown=function(t){return i(s,void 0,void 0,function(){var e,o,i,s,u,d,c,p,h,f,l;return a(this,function(a){if(e=t.getService("cursor"),o=t.getService("layout"),!e.hasCursor())return[2];if(i=new r.Transformation,s=e.getCursorState(),u=s.head,d=o.resolvePosition(u),c=d.getLeaf().getParent().getParent(),p=c.getNode(),"Line"!==n.identifyLayoutNodeType(p))throw new Error("Expecting position to be referencing an line node.");return(h=p.getNextSiblingAllowCrossParent())?(null===(f=s.leftLock)&&(f=p.resolveRects(c.getOffset(),c.getOffset())[0].left),i.setCursorLockLeft(f),l=h.convertCoordinateToOffset(f),i.setCursorHead(u-c.getOffset()+p.getSize()+l)):i.setCursorHead(u-c.getOffset()+p.getSize()-1),t.getService("state").applyTransformation(i),[2]})})},e.moveHeadLeftByWord=function(t){return i(s,void 0,void 0,function(){var e,n,i,s,u,d,c,p,h;return a(this,function(a){if(e=t.getService("cursor"),n=t.getService("render"),!e.hasCursor())return[2];if(i=new r.Transformation,s=e.getCursorState(),u=s.head,d=n.resolvePosition(u),c=d.getLeaf(),p=c.getNode(),"atomic"!==o.identifyRenderNodeType(p))throw new Error("Expecting position to be referencing an atomic node.");return c.getOffset()>0?i.setCursorHead(u-c.getOffset()):(h=p.getPreviousSiblingAllowCrossParent())&&i.setCursorHead(u-h.getSize()),t.getService("state").applyTransformation(i),[2]})})},e.moveHeadRightByWord=function(t){return i(s,void 0,void 0,function(){var e,n,i,s,u,d,c,p,h,f;return a(this,function(a){if(e=t.getService("cursor"),n=t.getService("render"),!e.hasCursor())return[2];if(i=new r.Transformation,s=e.getCursorState(),u=s.head,d=n.resolvePosition(u),c=d.getLeaf(),p=c.getNode(),"atomic"!==o.identifyRenderNodeType(p))throw new Error("Expecting position to be referencing an atomic node.");return c.getOffset()<p.getSize()-1?i.setCursorHead(u-c.getOffset()+p.getSize()-1):(h=p.getNextSiblingAllowCrossParent())&&(f=u-c.getOffset()+p.getSize()+h.getSize(),h.isBreakable()&&f--,i.setCursorHead(f)),t.getService("state").applyTransformation(i),[2]})})},e.moveHeadToLineStart=function(t){return i(s,void 0,void 0,function(){var e,n,o,i,s,u,d;return a(this,function(a){return e=t.getService("cursor"),n=t.getService("layout"),e.hasCursor()?(o=new r.Transformation,i=e.getCursorState(),s=i.head,u=n.resolvePosition(s),(d=u.getLeaf().getParent().getParent()).getOffset()>0?o.setCursorHead(s-d.getOffset()):o.setCursorHead(s),t.getService("state").applyTransformation(o),[2]):[2]})})},e.moveHeadToLineEnd=function(t){return i(s,void 0,void 0,function(){var e,o,i,s,u,d,c,p;return a(this,function(a){if(e=t.getService("cursor"),o=t.getService("layout"),!e.hasCursor())return[2];if(i=new r.Transformation,s=e.getCursorState(),u=s.head,d=o.resolvePosition(u),c=d.getLeaf().getParent().getParent(),p=c.getNode(),"Line"!==n.identifyLayoutNodeType(p))throw new Error("Expecting position to be referencing an line layout node.");return c.getOffset()<p.getSize()-1?i.setCursorHead(u-c.getOffset()+p.getSize()-1):i.setCursorHead(u),t.getService("state").applyTransformation(i),[2]})})},e.moveHeadToDocStart=function(t){return i(s,void 0,void 0,function(){var e;return a(this,function(n){return t.getService("cursor").hasCursor()?((e=new r.Transformation).setCursorHead(0),t.getService("state").applyTransformation(e),[2]):[2]})})},e.moveHeadToDocEnd=function(t){return i(s,void 0,void 0,function(){var e,n,o,i;return a(this,function(a){return e=t.getService("cursor"),n=t.getService("render"),e.hasCursor()?(o=new r.Transformation,i=n.getDocSize(),o.setCursorHead(i-1),t.getService("state").applyTransformation(o),[2]):[2]})})},e.selectAll=function(t){return i(s,void 0,void 0,function(){var e,n,o,i;return a(this,function(a){return e=t.getService("cursor"),n=t.getService("render"),e.hasCursor()?(o=new r.Transformation,i=n.getDocSize(),o.setCursor(0),o.setCursorHead(i-1),t.getService("state").applyTransformation(o),[2]):[2]})})},e.selectWord=function(t,e){return i(s,void 0,void 0,function(){var n,o,i,s,u,d;return a(this,function(a){return n=t.getService("cursor"),o=t.getService("render"),n.hasCursor()?(i=new r.Transformation,s=o.resolvePosition(e),u=s.getLeaf(),d=u.getNode(),i.setCursor(e-u.getOffset()),i.setCursorHead(e-u.getOffset()+d.getSize()-1),t.getService("state").applyTransformation(i),[2]):[2]})})},e.selectBlock=function(t,e){return i(s,void 0,void 0,function(){var n,i,s,u,d,c,p;return a(this,function(a){return n=t.getService("cursor"),i=t.getService("render"),n.hasCursor()?(s=new r.Transformation,u=i.resolvePosition(e),d=u.getLeaf(),(c=function t(e){if("block"===o.identifyRenderNodeType(e.getNode()))return e;var n=e.getParent();if(!n)return null;return t(n)}(d))?(p=c.getNode(),s.setCursor(e-c.getOffset()),s.setCursorHead(e-c.getOffset()+p.getSize()-1),t.getService("state").applyTransformation(s),[2]):[2]):[2]})})}}.apply(e,o))||(t.exports=r)},function(t,e,n){var o;void 0===(o=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeLayoutRects=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(0!==e){var o=t[e-1];n.top===o.top&&n.height===o.height&&n.left===o.left+o.width&&(o.width+=n.width,o.right=n.right,t.splice(e,1),e-=1)}}}}.apply(e,[n,e]))||(t.exports=o)},function(t,e,n){var o,r;o=[n,e,n(19),n(30),n(31),n(20)],void 0===(r=function(t,e,n,o,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.identifyRenderNodeType=function(t){if(t instanceof r.DocRenderNode)return"doc";if(t instanceof o.BlockRenderNode)return"block";if(t instanceof i.InlineRenderNode)return"inline";if(t instanceof n.AtomicRenderNode)return"atomic";throw new Error("Unknown render node type.")}}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{u(o.next(t))}catch(e){i(e)}}function s(t){try{u(o.throw(t))}catch(e){i(e)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}u((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};void 0===(o=function(t,e){"use strict";var n=this;Object.defineProperty(e,"__esModule",{value:!0}),e.undo=function(t){return r(n,void 0,void 0,function(){return i(this,function(e){return t.getService("history").undo(),[2]})})},e.redo=function(t){return r(n,void 0,void 0,function(){return i(this,function(e){return t.getService("history").redo(),[2]})})}}.apply(e,[n,e]))||(t.exports=o)},function(t,e,n){var o,r,i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{u(o.next(t))}catch(e){i(e)}}function s(t){try{u(o.throw(t))}catch(e){i(e)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}u((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};o=[n,e,n(62),n(6),n(21),n(4)],void 0===(r=function(t,e,n,o,r,s){"use strict";var u=this;function d(t,e){var n=t.getService("render").convertModelOffsetToOffset(e),o=new r.Transformation;o.setCursor(n),t.getService("state").applyTransformation(o)}Object.defineProperty(e,"__esModule",{value:!0}),e.insert=function(t,e){return i(u,void 0,void 0,function(){var n,o,i,s,u,c,p,h;return a(this,function(a){return n=t.getService("cursor"),o=t.getService("render"),n.hasCursor()?(i=new r.Transformation,s=n.getCursorState(),u=s.anchor,c=s.head,p=Math.min(u,c),u!==c&&i.addOperation(new r.DeleteOperation(o.convertOffsetToModelOffset(Math.min(u,c)),o.convertOffsetToModelOffset(Math.max(u,c)))),h=o.convertOffsetToModelOffset(p),i.addOperation(new r.InsertOperation(h,e)),t.getService("state").applyTransformation(i),d(t,h+e.length),[2]):[2]})})},e.deleteBackward=function(t){return i(u,void 0,void 0,function(){var e,n,o,i,s,u,c,p,h,f;return a(this,function(a){if(e=t.getService("cursor"),n=t.getService("render"),!e.hasCursor())return[2];if(o=new r.Transformation,i=e.getCursorState(),s=i.anchor,u=i.head,s===u){if(u<1)return[2];c=u-1,p=u}else c=Math.min(s,u),p=Math.max(s,u);return h=n.convertOffsetToModelOffset(c),f=n.convertOffsetToModelOffset(p),o.addOperation(new r.DeleteOperation(h,f)),t.getService("state").applyTransformation(o),d(t,h),[2]})})},e.deleteForward=function(t){return i(u,void 0,void 0,function(){var e,n,o,i,s,u,c,p,h,f;return a(this,function(a){if(e=t.getService("cursor"),n=t.getService("render"),!e.hasCursor())return[2];if(o=new r.Transformation,i=e.getCursorState(),s=i.anchor,u=i.head,s===u){if(u>=n.getDocSize()-1)return[2];c=u,p=u+1}else c=Math.min(s,u),p=Math.max(s,u);return h=n.convertOffsetToModelOffset(c),f=n.convertOffsetToModelOffset(p),o.addOperation(new r.DeleteOperation(h,f)),t.getService("state").applyTransformation(o),d(t,h),[2]})})},e.splitLine=function(t){return i(u,void 0,void 0,function(){var r,i,u,d,c,p,h,f;return a(this,function(a){if(r=t.getService("cursor"),i=t.getService("render"),u=t.getService("model"),!r.hasCursor())return[2];for(d=r.getCursorState().anchor,c=u.resolvePosition(i.convertOffsetToModelOffset(d)).getLeaf(),p=[];c&&(h=c.getNode(),p.push(h),"block"!==n.identifyModelNodeType(h));)c=c.getParent();return f=[],p.reverse().forEach(function(t){f.unshift(o.CLOSE_TOKEN),f.push({componentId:t.getComponentId(),partId:t.getPartId(),id:s.generateId(),attributes:t.getAttributes()})}),[2,e.insert(t,f)]})})}}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(32),n(33),n(23)],void 0===(r=function(t,e,n,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.identifyModelNodeType=function(t){if(t instanceof o.DocModelNode)return"doc";if(t instanceof n.BlockModelNode)return"block";if(t instanceof r.InlineModelNode)return"inline";throw new Error("Unknown model node type.")}}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{u(o.next(t))}catch(e){i(e)}}function s(t){try{u(o.throw(t))}catch(e){i(e)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}u((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};void 0===(o=function(t,e){"use strict";var n=this;Object.defineProperty(e,"__esModule",{value:!0}),e.focus=function(t){return r(n,void 0,void 0,function(){return i(this,function(e){return t.getService("view").requestFocus(),[2]})})},e.blur=function(t){return r(n,void 0,void 0,function(){return i(this,function(e){return t.getService("view").requestBlur(),[2]})})}}.apply(e,[n,e]))||(t.exports=o)},function(t,e,n){var o,r,i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{u(o.next(t))}catch(e){i(e)}}function s(t){try{u(o.throw(t))}catch(e){i(e)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}u((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};o=[n,e,n(3),n(65)],void 0===(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.serviceRegistry=e,this.willExecuteCommandEventEmitter=new n.EventEmitter,this.didExecuteCommandEventEmitter=new n.EventEmitter,this.registry=new o.CommandRegistry;for(var r=0,i=Object.entries(t.getConfig().commands);r<i.length;r++){var a=i[r],s=a[0],u=a[1];this.registry.registerCommand(s,u)}}return t.prototype.onWillExecuteCommand=function(t){this.willExecuteCommandEventEmitter.on(t)},t.prototype.onDidExecuteCommand=function(t){this.didExecuteCommandEventEmitter.on(t)},t.prototype.executeCommand=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return i(this,void 0,void 0,function(){var n;return a(this,function(o){switch(o.label){case 0:return(n=this.registry.getCommandHandler(t))?(this.willExecuteCommandEventEmitter.emit({commandId:t,args:e}),[4,n.apply(void 0,[this.serviceRegistry].concat(e))]):[2];case 1:return o.sent(),this.didExecuteCommandEventEmitter.emit({commandId:t,args:e}),[2]}})})},t}();e.CommandService=r}.apply(e,o))||(t.exports=r)},function(t,e,n){var o;void 0===(o=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.commandsMap=new Map}return t.prototype.registerCommand=function(t,e){this.commandsMap.set(t,e)},t.prototype.getCommandHandler=function(t){return this.commandsMap.get(t)},t}();e.CommandRegistry=n}.apply(e,[n,e]))||(t.exports=o)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(17),n(33),n(31),n(4),n(67),n(9)],void 0===(r=function(t,e,n,o,r,a,s,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getPartId=function(){return"doc"},e.prototype.toDOM=function(t,e){for(var n=document.createElement("div"),o=1,r=this.getChildren(),i=0,a=r.length;i<a&&o<e;i++){var s=r[i],u=s.getSize(),d=Math.max(0,t-o),c=Math.min(d+u,e-o);if(o+=u,!(d>u||c<0)){var p=s.toDOM(d,c);n.appendChild(p)}}return n},e.prototype.clone=function(){return new e(this.componentId,a.generateId(),this.attributes)},e}(o.DocModelNode);e.DocModelNode=d;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getPartId=function(){return"doc"},e}(r.DocRenderNode);e.DocRenderNode=c;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getPartId=function(){return"doc"},e}(n.DocLayoutNode);e.DocLayoutNode=p;var h=function(t){function e(e){var n=t.call(this,e)||this;return n.domContainer=document.createElement("div"),n.domContainer.style.textAlign="left",n.domContainer.style.cursor="text",n.domContainer.style.userSelect="none",n}return i(e,t),e.prototype.getDOMContainer=function(){return this.domContainer},e.prototype.getDOMContentContainer=function(){return this.domContainer},e.prototype.onLayoutDidUpdate=function(){},e}(s.DocViewNode);e.DocViewNode=h;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.buildModelNode=function(t,e,n){return new d(this.id,e,n)},e.prototype.buildRenderNode=function(t){if(t instanceof d)return new c(this.id,t.getId(),{});throw new Error("Invalid doc model node.")},e.prototype.buildLayoutNode=function(t){if(t instanceof c)return new p(this.id,t.getId());throw new Error("Invalid doc render node.")},e.prototype.buildViewNode=function(t){if(t instanceof p)return new h(t);throw new Error("Invalid layout render node.")},e}(u.Component);e.DocComponent=f}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(8)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.attached=!1,e}return i(e,t),e.prototype.getNodeClass=function(){return"doc"},e.prototype.isRoot=function(){return!0},e.prototype.isLeaf=function(){return!1},e.prototype.getSize=function(){return void 0===this.size&&(this.size=this.getChildren().reduce(function(t,e){return t+e.getSize()},0)),this.size},e.prototype.clearOwnCache=function(){this.size=void 0},e.prototype.attach=function(t){if(this.attached)throw new Error("Already attached to the DOM.");t.appendChild(this.getDOMContainer()),this.attached=!0},e.prototype.isAttached=function(){return this.attached},e}(n.ViewNode);e.DocViewNode=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(14),n(16),n(18),n(32),n(19),n(30),n(20),n(4),n(69),n(34),n(9)],void 0===(r=function(t,e,n,o,r,a,s,u,d,c,p,h,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getPartId=function(){return"paragraph"},e.prototype.toDOM=function(t,e){for(var n=document.createElement("p"),o=1,r=this.getChildren(),i=0,a=r.length;i<a&&o<e;i++){var s=r[i],u=s.getSize(),d=Math.max(0,t-o),c=Math.min(d+u,e-o);if(o+=u,!(d>u||c<0)){var p=s.toDOM(d,c);n.appendChild(p)}}return n},e.prototype.clone=function(){return new e(this.componentId,c.generateId(),this.attributes)},e}(a.BlockModelNode);e.ParagraphModelNode=l;var g=function(t){function e(e,n,o){var r=t.call(this,e,n,o)||this;return r.componentId=e,r.id=n,r.style=o,r.lineBreakNode=r.buildLineBreakNode(),r}return i(e,t),e.prototype.getPartId=function(){return"paragraph"},e.prototype.getChildren=function(){return t.prototype.getChildren.call(this).concat([this.lineBreakNode])},e.prototype.convertOffsetToModelOffset=function(e){return e===this.getSize()-1?t.prototype.convertOffsetToModelOffset.call(this,e-1)+1:t.prototype.convertOffsetToModelOffset.call(this,e)},e.prototype.convertModelOffsetToOffset=function(e){return 1===this.getSize()?0:t.prototype.convertModelOffsetToOffset.call(this,e-1)+1===this.getSize()-1?this.getSize()-1:t.prototype.convertModelOffsetToOffset.call(this,e)},e.prototype.buildLineBreakNode=function(){var t=new v(this.componentId,this.id+".line-break",{}),e=new y(this.componentId,this.id+".line-break-atomic",{});return t.appendChild(e),t.setParent(this),t},e}(u.BlockRenderNode);e.ParagraphRenderNode=g;var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getPartId=function(){return"line-break"},e.prototype.getModelSize=function(){return 0},e}(d.InlineRenderNode);e.ParagraphLineBreakRenderNode=v;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getPartId=function(){return"line-break-atomic"},e.prototype.getModelSize=function(){return 0},e.prototype.getSize=function(){return 1},e.prototype.isBreakable=function(){return!0},e.prototype.clearOwnCache=function(){},e}(s.AtomicRenderNode);e.ParagraphLineBreakAtomicRenderNode=y;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getPartId=function(){return"paragraph"},e.prototype.getPaddingTop=function(){return 0},e.prototype.getPaddingBottom=function(){return 12},e.prototype.getPaddingLeft=function(){return 0},e.prototype.getPaddingRight=function(){return 0},e.prototype.clone=function(){return new e(this.componentId,this.id)},e}(o.BlockLayoutNode);e.ParagraphLayoutNode=m;var w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getPartId=function(){return"line-break"},e.prototype.getPaddingTop=function(){var t=this.getPreviousSibling();return t?t.getPaddingTop():0},e.prototype.getPaddingBottom=function(){var t=this.getPreviousSibling();return t?t.getPaddingBottom():0},e.prototype.getPaddingLeft=function(){return 0},e.prototype.getPaddingRight=function(){return 0},e.prototype.clone=function(){return new e(this.componentId,this.id)},e}(r.InlineLayoutNode);e.ParagraphLineBreakLayoutNode=w;var b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getPartId=function(){return"line-break-atomic"},e.prototype.getSize=function(){return 1},e.prototype.getWidth=function(){return 5},e.prototype.getHeight=function(){return void 0===this.height&&this.takeMeasurement(),this.height},e.prototype.getPaddingTop=function(){return 0},e.prototype.getPaddingBottom=function(){return 0},e.prototype.getPaddingLeft=function(){return 0},e.prototype.getPaddingRight=function(){return 0},e.prototype.getTailTrimmedWidth=function(){return 0},e.prototype.breakAtWidth=function(t){throw new Error("Method should never be called, there is a bug.")},e.prototype.convertCoordinateToOffset=function(t){return 0},e.prototype.resolveRects=function(t,e){return t===e?[{left:0,right:this.getWidth(),top:0,bottom:0,width:0,height:this.getHeight(),paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}]:[{left:0,right:0,top:0,bottom:0,width:this.getWidth(),height:this.getHeight(),paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}]},e.prototype.takeMeasurement=function(){this.height=0;var t=this.getPreviousSiblingAllowCrossParent();t&&(this.height=t.getHeight())},e}(n.AtomicLayoutNode);e.ParagraphLineBreakAtomicLayoutNode=b;var C=function(t){function e(e){var n=t.call(this,e)||this;return n.domContainer=document.createElement("div"),n}return i(e,t),e.prototype.getDOMContainer=function(){return this.domContainer},e.prototype.getDOMContentContainer=function(){return this.domContainer},e.prototype.onLayoutDidUpdate=function(){this.domContainer.style.width=this.layoutNode.getWidth()+"px",this.domContainer.style.height=this.layoutNode.getHeight()+"px",this.domContainer.style.paddingTop=this.layoutNode.getPaddingTop()+"px",this.domContainer.style.paddingBottom=this.layoutNode.getPaddingBottom()+"px",this.domContainer.style.paddingLeft=this.layoutNode.getPaddingLeft()+"px",this.domContainer.style.paddingRight=this.layoutNode.getPaddingRight()+"px"},e}(p.BlockViewNode);e.ParagraphViewNode=C;var S=function(t){function e(e){var n=t.call(this,e)||this;return n.domContainer=document.createElement("div"),n}return i(e,t),e.prototype.getDOMContainer=function(){return this.domContainer},e.prototype.getDOMContentContainer=function(){return this.domContainer},e.prototype.onLayoutDidUpdate=function(){},e}(h.InlineViewNode);e.ParagraphLineBreakViewNode=S;var O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.buildModelNode=function(t,e,n){return new l(this.id,e,n)},e.prototype.buildRenderNode=function(t){if(t instanceof l)return new g(this.id,t.getId(),{});throw new Error("Invalid paragraph model node.")},e.prototype.buildLayoutNode=function(t){if(t instanceof g)return new m(this.id,t.getId());if(t instanceof v)return new w(this.id,t.getId());if(t instanceof y)return new b(this.id,t.getId());throw new Error("Invalid paragraph render node.")},e.prototype.buildViewNode=function(t){if(t instanceof m)return new C(t);if(t instanceof w)return new S(t);throw new Error("Invalid paragraph layout node.")},e}(f.Component);e.ParagraphComponent=O}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(8)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getNodeClass=function(){return"block"},e.prototype.isRoot=function(){return!1},e.prototype.isLeaf=function(){return!1},e.prototype.getSize=function(){return void 0===this.size&&(this.size=this.getChildren().reduce(function(t,e){return t+e.getSize()},0)),this.size},e.prototype.clearOwnCache=function(){this.size=void 0},e}(n.ViewNode);e.BlockViewNode=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__assign||function(){return(a=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};o=[n,e,n(14),n(18),n(23),n(19),n(20),n(4),n(71),n(34),n(9)],void 0===(r=function(t,e,n,o,r,s,u,d,c,p,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getPartId=function(){return"text"},e.prototype.toDOM=function(t,e){var n=document.createElement("span");return n.innerText=this.content.substring(t-1,e-1),n},e.prototype.clone=function(){var t=new e(this.componentId,d.generateId(),this.attributes);return t.setContent(this.getContent()),t},e}(r.InlineModelNode);e.TextModelNode=f,e.DEFAULT_TEXT_STYLE={weight:400,size:14,font:"sans-serif",letterSpacing:0,underline:!1,italic:!1,strikethrough:!1,color:"black"};var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getPartId=function(){return"text"},e}(u.InlineRenderNode);e.TextRenderNode=l;var g=function(t){function e(e,n,o,r){var i=t.call(this,e,n,o)||this;return i.word=r,i}return i(e,t),e.prototype.getPartId=function(){return"word"},e.prototype.getWord=function(){return this.word},e.prototype.getModelSize=function(){return this.word.text.length},e.prototype.getSize=function(){return this.word.text.length},e.prototype.isBreakable=function(){return this.word.breakable},e.prototype.clearOwnCache=function(){},e.prototype.onDidUpdate=function(e){t.prototype.onDidUpdate.call(this,e);var n=this.word,o=e.getWord();n.text===o.text&&n.breakable===o.breakable||(this.word=e.getWord(),this.clearCache())},e}(s.AtomicRenderNode);e.WordRenderNode=g;var v=function(t){function e(e,n,o){var r=t.call(this,e,n)||this;return r.style=o,r}return i(e,t),e.prototype.getPartId=function(){return"text"},e.prototype.getPaddingTop=function(){return 3},e.prototype.getPaddingBottom=function(){return 6},e.prototype.getPaddingLeft=function(){return 0},e.prototype.getPaddingRight=function(){return 0},e.prototype.getStyle=function(){return this.style},e.prototype.clone=function(){return new e(this.componentId,this.id,this.style)},e}(o.InlineLayoutNode);e.TextLayoutNode=v;var y=function(t){function e(e,n,o,r,i){var a=t.call(this,e,n)||this;return a.word=o,a.style=r,a.textMeasurer=i,a}return i(e,t),e.prototype.getPartId=function(){return"word"},e.prototype.getSize=function(){return this.word.text.length},e.prototype.getWidth=function(){return void 0===this.width&&this.takeMeasurement(),this.width},e.prototype.getHeight=function(){return void 0===this.height&&this.takeMeasurement(),this.height},e.prototype.getPaddingTop=function(){return 0},e.prototype.getPaddingBottom=function(){return 0},e.prototype.getPaddingLeft=function(){return 0},e.prototype.getPaddingRight=function(){return 0},e.prototype.getTailTrimmedWidth=function(){if(void 0===this.tailTrimmedWidth)if(this.word.breakable){var t=this.word.text,e=this.textMeasurer.measure(t.substring(0,t.length-1),this.style);this.tailTrimmedWidth=e.width}else this.tailTrimmedWidth=this.getWidth();return this.tailTrimmedWidth},e.prototype.breakAtWidth=function(t){for(var n=this.word.text,o=0,r=n.length;r-o>1;){var i=Math.floor((r+o)/2),s=n.substring(0,i);this.textMeasurer.measure(s,this.style).width>t?r=i:o=i}var u=o,d=a({},this.word,{text:n.substring(u)}),c=new e(this.componentId,this.id,d,this.style,this.textMeasurer);return this.word.text=n.substring(0,u),this.clearCache(),c},e.prototype.getWord=function(){return this.word},e.prototype.convertCoordinateToOffset=function(t){for(var e=0,n=this.word.text,o=0,r=n.length;o<r;o++){var i=this.textMeasurer.measure(n.substring(0,o),this.style).width;if(!(i<t))return t-e<i-t?o-1:o;e=i}return t-e<this.getWidth()-t?n.length-1:n.length},e.prototype.resolveRects=function(t,e){if(0===t&&e===this.getSize())return[{left:0,right:0,top:0,bottom:0,width:this.getWidth(),height:this.getHeight(),paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}];var n=this.textMeasurer.measure(this.word.text.substring(0,t),this.style),o=this.textMeasurer.measure(this.word.text.substring(0,e),this.style);return[{width:o.width-n.width,height:this.getHeight(),left:n.width,right:this.getWidth()-o.width,top:0,bottom:0,paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}]},e.prototype.onDidUpdate=function(e){t.prototype.onDidUpdate.call(this,e);var n=this.word,o=e.getWord();n.text===o.text&&n.breakable===o.breakable||(this.word=e.getWord(),this.clearCache())},e.prototype.clearOwnCache=function(){this.width=void 0,this.height=void 0,this.tailTrimmedWidth=void 0},e.prototype.takeMeasurement=function(){var t=this.textMeasurer.measure(this.word.text,this.style);this.width=t.width,this.height=t.height},e}(n.AtomicLayoutNode);e.WordLayoutNode=y;var m=function(t){function e(e){var n=t.call(this,e)||this;return n.domContainer=document.createElement("span"),n.domContainer.style.display="inline-block",n.domContainer.style.whiteSpace="pre",n.domContainer.style.lineHeight="1em",n.domContent=document.createElement("span"),n.domContainer.appendChild(n.domContent),n.onLayoutDidUpdate(),n}return i(e,t),e.prototype.getDOMContainer=function(){return this.domContainer},e.prototype.getDOMContentContainer=function(){return this.domContainer},e.prototype.onLayoutDidUpdate=function(){var t=this.layoutNode.getChildren().map(function(t){return t instanceof y?t.getWord().text:""}).join(""),e=this.layoutNode.getStyle();this.domContainer.style.width=this.layoutNode.getWidth()+"px",this.domContainer.style.height=this.layoutNode.getHeight()+"px",this.domContainer.style.paddingTop=this.layoutNode.getPaddingTop()+"px",this.domContainer.style.paddingBottom=this.layoutNode.getPaddingBottom()+"px",this.domContainer.style.paddingLeft=this.layoutNode.getPaddingLeft()+"px",this.domContainer.style.paddingRight=this.layoutNode.getPaddingRight()+"px",this.domContainer.style.fontFamily=e.font,this.domContainer.style.fontSize=e.size+"px",this.domContainer.style.letterSpacing=e.letterSpacing+"px",this.domContainer.style.fontWeight=""+e.weight,this.domContainer.style.color=e.color,this.domContainer.style.textDecoration=e.underline?"underline":"",this.domContainer.style.fontStyle=e.italic?"italic":"",this.domContent.style.textDecoration=e.strikethrough?"line-through":"",this.domContent.innerText=t},e}(p.InlineViewNode);e.TextViewNode=m;var w=function(t){function n(e,n){var o=t.call(this,e)||this;return o.textMeasurer=n,o}return i(n,t),n.prototype.buildModelNode=function(t,e,n){return new f(this.id,e,n)},n.prototype.buildRenderNode=function(t){var n=this;if(t instanceof f){var o=t.getAttributes(),r=a({},e.DEFAULT_TEXT_STYLE,o),i=new l(this.id,t.getId(),r),s=c.breakTextToWords(t.getContent());return s.forEach(function(e,o){var a=new g(n.id,t.getId()+"-"+o,r,e);i.appendChild(a)}),0===s.length&&i.appendChild(new g(this.id,t.getId()+"-0",r,{text:"",breakable:!1})),i}throw new Error("Invalid text model node.")},n.prototype.buildLayoutNode=function(t){if(t instanceof l)return new v(this.id,t.getId(),t.getStyle());if(t instanceof g)return new y(this.id,t.getId(),t.getWord(),t.getStyle(),this.textMeasurer);throw new Error("Invalid text render node.")},n.prototype.buildViewNode=function(t){if(t instanceof v)return new m(t);throw new Error("Invalid text layout node")},n}(h.Component);e.TextComponent=w;var b=function(){function t(){this.$canvas=document.createElement("canvas")}return t.prototype.measure=function(t,e){var n=this.$canvas.getContext("2d"),o=e.weight,r=e.size,i=this.fixFont(e.font),a=e.letterSpacing;n.font=o+" "+r+"px "+i;var s=n.measureText(t);return{width:0===a||t.length<=1?s.width:s.width+(t.length-1)*a,height:r}},t.prototype.fixFont=function(t){return t.indexOf(" ")>=0?"'"+t+"'":t},t}();e.TextMeasurer=b}.apply(e,o))||(t.exports=r)},function(t,e,n){var o;void 0===(o=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=[" ","\n","\t"];e.breakTextToWords=function(t){for(var e=[],o="",r=0,i=t.length;r<i;r++){var a=t[r];o+=a,n.includes(a)&&(e.push({text:o,breakable:!0}),o="")}return o.length>0&&e.push({text:o,breakable:!1}),e}}.apply(e,[n,e]))||(t.exports=o)},function(t,e,n){var o,r;o=[n,e,n(73),n(75),n(77)],void 0===(r=function(t,e,n,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.registry=new r.ComponentRegistry,this.pageComponent=new o.PageComponent("page",t),this.lineComponent=new n.LineComponent("line");for(var e=0,i=Object.entries(t.getConfig().components);e<i.length;e++){var a=i[e],s=a[0],u=a[1];this.registry.registerComponent(s,u)}this.registry.registerComponent(this.pageComponent.getId(),this.pageComponent),this.registry.registerComponent(this.lineComponent.getId(),this.lineComponent)}return t.prototype.getComponent=function(t){return this.registry.getComponent(t)},t.prototype.getPageComponent=function(){return this.pageComponent},t.prototype.getLineComponent=function(){return this.lineComponent},t}();e.ComponentService=i}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(28),n(74),n(9)],void 0===(r=function(t,e,n,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getPartId=function(){return"line"},e.prototype.clone=function(){return new e(this.getComponentId())},e}(n.LineLayoutNode);e.LineLayoutNode=a;var s=function(t){function e(e){var n=t.call(this,e)||this;return n.domContainer=document.createElement("div"),n}return i(e,t),e.prototype.getDOMContainer=function(){return this.domContainer},e.prototype.getDOMContentContainer=function(){return this.domContainer},e.prototype.onLayoutDidUpdate=function(){this.domContainer.style.width=this.layoutNode.getWidth()+"px",this.domContainer.style.height=this.layoutNode.getHeight()+"px",this.domContainer.style.paddingTop=this.layoutNode.getPaddingTop()+"px",this.domContainer.style.paddingBottom=this.layoutNode.getPaddingBottom()+"px",this.domContainer.style.paddingLeft=this.layoutNode.getPaddingLeft()+"px",this.domContainer.style.paddingRight=this.layoutNode.getPaddingRight()+"px"},e}(o.LineViewNode);e.LineViewNode=s;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.buildModelNode=function(t,e,n){throw new Error("Line component does not support buildModelNode.")},e.prototype.buildRenderNode=function(t){throw new Error("Line component does not support buildRenderNode.")},e.prototype.buildLayoutNode=function(t){throw new Error("Line component does not support buildLayoutNode.")},e.prototype.buildLineLayoutNode=function(){return new a(this.getId())},e.prototype.buildViewNode=function(t){if(t instanceof a)return new s(t);throw new Error("Invalid layout render node.")},e}(r.Component);e.LineComponent=u}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(8)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var n=t.call(this,e)||this;return n.domContainer=document.createElement("div"),n}return i(e,t),e.prototype.getNodeClass=function(){return"line"},e.prototype.isRoot=function(){return!1},e.prototype.isLeaf=function(){return!1},e.prototype.getSize=function(){return void 0===this.size&&(this.size=this.getChildren().reduce(function(t,e){return t+e.getSize()},0)),this.size},e.prototype.clearOwnCache=function(){this.size=void 0},e.prototype.getDOMContainer=function(){return this.domContainer},e.prototype.getDOMContentContainer=function(){return this.domContainer},e}(n.ViewNode);e.LineViewNode=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(29),n(76),n(9)],void 0===(r=function(t,e,n,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getPartId=function(){return"page"},e.prototype.clone=function(){return new e(this.getComponentId(),this.width,this.height,this.paddingTop,this.paddingBottom,this.paddingLeft,this.paddingRight)},e}(n.PageLayoutNode);e.PageLayoutNode=a;var s=function(t){function e(e){var n=t.call(this,e)||this;return n.domContainer=document.createElement("div"),n.domContainer.style.position="relative",n.domContainer.style.marginLeft="auto",n.domContainer.style.marginRight="auto",n.domContentContainer=document.createElement("div"),n.domContainer.appendChild(n.domContentContainer),n}return i(e,t),e.prototype.getDOMContainer=function(){return this.domContainer},e.prototype.getDOMContentContainer=function(){return this.domContentContainer},e.prototype.onLayoutDidUpdate=function(){this.domContainer.style.width=this.layoutNode.getWidth()+"px",this.domContainer.style.height=this.layoutNode.getHeight()+"px",this.domContainer.style.paddingTop=this.layoutNode.getPaddingTop()+"px",this.domContainer.style.paddingBottom=this.layoutNode.getPaddingBottom()+"px",this.domContainer.style.paddingLeft=this.layoutNode.getPaddingLeft()+"px",this.domContainer.style.paddingRight=this.layoutNode.getPaddingRight()+"px"},e}(o.PageViewNode);e.PageViewNode=s;var u=function(t){function e(e,n){var o=t.call(this,e)||this;return o.configService=n,o}return i(e,t),e.prototype.buildModelNode=function(t,e,n){throw new Error("Page component does not support buildModelNode.")},e.prototype.buildRenderNode=function(t){throw new Error("Page component does not support buildRenderNode.")},e.prototype.buildLayoutNode=function(t){throw new Error("Page component does not support buildLayoutNode.")},e.prototype.buildPageLayoutNode=function(){var t=this.configService.getConfig().page;return new a(this.getId(),t.width,t.height,t.paddingTop,t.paddingBottom,t.paddingLeft,t.paddingRight)},e.prototype.buildViewNode=function(t){if(t instanceof a)return new s(t);throw new Error("Invalid layout render node.")},e}(r.Component);e.PageComponent=u}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();o=[n,e,n(8)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getNodeClass=function(){return"page"},e.prototype.isRoot=function(){return!1},e.prototype.isLeaf=function(){return!1},e.prototype.getSize=function(){return void 0===this.size&&(this.size=this.getChildren().reduce(function(t,e){return t+e.getSize()},0)),this.size},e.prototype.clearOwnCache=function(){this.size=void 0},e}(n.ViewNode);e.PageViewNode=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o;void 0===(o=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.componentsMap=new Map}return t.prototype.registerComponent=function(t,e){this.componentsMap.set(t,e)},t.prototype.getComponent=function(t){return this.componentsMap.get(t)},t}();e.ComponentRegistry=n}.apply(e,[n,e]))||(t.exports=o)},function(t,e,n){var o;void 0===(o=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.config=t,this.applyExternalConfig(e)}return t.prototype.getConfig=function(){return this.config},t.prototype.applyExternalConfig=function(t){var e=t["tw.core"];e&&e.page&&(this.config.page=e.page)},t}();e.ConfigService=n}.apply(e,[n,e]))||(t.exports=o)},function(t,e,n){var o,r;o=[n,e,n(80)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){t.getConfig().cursor.disable||(this.cursor=new n.Cursor)}return t.prototype.onDidUpdateCursor=function(t){this.cursor&&this.cursor.onDidUpdateCursor(t)},t.prototype.hasCursor=function(){return!!this.cursor},t.prototype.setCursorState=function(t){this.assertCursor(),this.cursor.set(t.anchor,t.head,t.leftLock)},t.prototype.getCursorState=function(){return this.assertCursor(),{anchor:this.cursor.getAnchor(),head:this.cursor.getHead(),leftLock:this.cursor.getLeftLock()}},t.prototype.assertCursor=function(){if(!this.cursor)throw new Error("Cursor is disabled.")},t}();e.CursorService=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(3)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this.didUpdateCursorEventEmitter=new n.EventEmitter,this.anchor=0,this.head=0,this.leftLock=null}return t.prototype.onDidUpdateCursor=function(t){this.didUpdateCursorEventEmitter.on(t)},t.prototype.set=function(t,e,n){this.anchor=t,this.head=e,this.leftLock=n,this.didUpdateCursorEventEmitter.emit({})},t.prototype.getAnchor=function(){return this.anchor},t.prototype.getHead=function(){return this.head},t.prototype.getLeftLock=function(){return this.leftLock},t}();e.Cursor=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(82)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){this.state=new n.HistoryState(t,e)}return t.prototype.undo=function(){this.state.undo()},t.prototype.redo=function(){this.state.redo()},t}();e.HistoryService=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(83)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var n=this;this.configService=t,this.stateService=e,this.actions=[],this.offset=-1,this.handleDidApplyTransformation=function(t){var e=t.transformation,o=t.appliedTransformation;if(!(n.offset>=0&&n.actions[n.offset].getAppliedTransformations().some(function(t){return t.getOriginalTransformation()===e})))if(n.offset<0)n.recordAppliedTransformationToNewAction(o);else{var r=n.actions[n.offset],i=Date.now();i-r.getBeganAt()<n.maxCollapseDuration&&i-r.getEndedAt()<n.collapseThreshold?n.recordAppliedTransformationToLastAction(o):n.recordAppliedTransformationToNewAction(o)}};var o=t.getConfig();this.maxCollapseDuration=o.history.maxCollapseDuration,this.collapseThreshold=o.history.collapseThreshold,e.onDidApplyTransformation(this.handleDidApplyTransformation)}return t.prototype.undo=function(){var t=this.consumeNextUndoableAction();if(t){var e=t.getAppliedTransformations();0!==e.length&&this.stateService.unapplyTransformations(e)}},t.prototype.redo=function(){var t=this.consumeNextRedoableAction();if(t){var e=t.getAppliedTransformations().map(function(t){return t.getOriginalTransformation()});this.stateService.applyTransformations(e)}},t.prototype.consumeNextUndoableAction=function(){if(!(this.offset<0)){var t=this.actions[this.offset];return this.offset--,t}},t.prototype.consumeNextRedoableAction=function(){if(!(this.offset>=this.actions.length-1))return this.offset++,this.actions[this.offset]},t.prototype.recordAppliedTransformationToNewAction=function(t){if(0!==t.getOperations().length){this.offset<this.actions.length-1&&this.actions.splice(this.offset+1,this.actions.length-1-this.offset);var e=new n.HistoryAction;e.recordAppliedTransformation(t),this.actions.push(e),this.offset++}},t.prototype.recordAppliedTransformationToLastAction=function(t){var e=this.actions[this.offset];if(!e)throw new Error("Error recording applied transformation, history is empty.");this.offset<this.actions.length-1&&this.actions.splice(this.offset+1,this.actions.length-1-this.offset),e.recordAppliedTransformation(t)},t}();e.HistoryState=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o;void 0===(o=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.appliedTransformations=[],this.beganAt=Date.now(),this.endedAt=this.beganAt}return t.prototype.getBeganAt=function(){return this.beganAt},t.prototype.getEndedAt=function(){return this.endedAt},t.prototype.recordAppliedTransformation=function(t){this.appliedTransformations.push(t),this.endedAt=Date.now()},t.prototype.getAppliedTransformations=function(){return this.appliedTransformations},t}();e.HistoryAction=n}.apply(e,[n,e]))||(t.exports=o)},function(t,e,n){var o,r;o=[n,e,n(35)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e,o){var r=this;this.configService=t,this.commandService=e,this.viewService=o,this.keyBindings=new Map,this.handleDidPressKey=function(t){var e,n=r.keyBindings.get(t.key);n&&(e=r.commandService).executeCommand.apply(e,[n.command].concat(n.args))};var i=this.configService.getConfig().keyBindings;switch(this.bindKeys(i.common),n.detectPlatform()){case"macOS":i.macos&&this.bindKeys(i.macos);break;case"Windows":i.windows&&this.bindKeys(i.windows);break;case"Linux":i.linux&&this.bindKeys(i.linux)}o.onDidPressKey(this.handleDidPressKey)}return t.prototype.bindKeys=function(t){for(var e in t){var n=t[e];this.keyBindings.set(e,{command:n.command,args:n.args||[]})}},t}();e.KeyBindingService=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(86)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){this.state=new n.LayoutState(t,e)}return t.prototype.onDidUpdateLayoutState=function(t){this.state.onDidUpdateLayoutState(t)},t.prototype.getDocNode=function(){return this.state.getDocNode()},t.prototype.resolvePosition=function(t){return this.state.getDocNode().resolvePosition(t)},t.prototype.resolvePageRects=function(t,e){return this.state.getDocNode().resolvePageRects(t,e)},t}();e.LayoutService=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(3),n(87),n(37),n(89),n(7)],void 0===(r=function(t,e,n,o,r,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){var r=this;this.componentService=t,this.renderService=e,this.didUpdateLayoutStateEventEmitter=new n.EventEmitter,this.handleDidUpdateRenderStateEvent=function(t){var e=new i.LayoutTreeBuilder(r.componentService).buildTree(t.node),n=r.docNode.findDescendant(t.node.getId());if(!n)throw new Error("Render node "+t.node.getId()+" is not found.");r.deduplicateNode(n),n.onDidUpdate(e);var a=(new o.LayoutFlower).flow(n);r.didUpdateLayoutStateEventEmitter.emit({node:a})};var a=e.getDocNode(),s=new i.LayoutTreeBuilder(t);this.docNode=s.buildTree(a),(new o.LayoutFlower).flow(this.docNode),e.onDidUpdateRenderState(this.handleDidUpdateRenderStateEvent)}return t.prototype.onDidUpdateLayoutState=function(t){this.didUpdateLayoutStateEventEmitter.on(t)},t.prototype.getDocNode=function(){return this.docNode},t.prototype.deduplicateNode=function(t){switch(a.identifyLayoutNodeType(t)){case"Inline":this.deduplicateInlineNode(t);break;case"Block":this.deduplicateBlockNode(t)}},t.prototype.deduplicateInlineNode=function(t){for(var e,n=new r.NodeJoiner,o=t.getParent();(e=t.getNextSiblingAllowCrossParent())&&e.getId()===t.getId();){var i=e.getParent();n.join(o,i)}},t.prototype.deduplicateBlockNode=function(t){for(var e,n=new r.NodeJoiner,o=t.getParent();(e=t.getNextSiblingAllowCrossParent())&&e.getId()===t.getId();){var i=e.getParent();n.join(o,i)}},t}();e.LayoutState=s}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(36),n(88),n(37),n(7)],void 0===(r=function(t,e,n,o,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(){this.lineNodes=[],this.pageNodes=[]}return t.prototype.queue=function(t){switch(i.identifyLayoutNodeType(t)){case"Doc":this.queueDocNode(t);break;case"Page":this.queuePageNode(t);break;case"Block":this.queueBlockNode(t);break;case"Line":this.queueLineNode(t);break;case"Inline":this.queueInlineNode(t);break;case"Atomic":this.queueAtomicNode(t);break;default:throw new Error("Invalid layout node type.")}},t.prototype.popLineNode=function(){return this.lineNodes.shift()},t.prototype.popPageNode=function(){return this.pageNodes.shift()},t.prototype.queueDocNode=function(t){var e=this;t.getChildren().forEach(function(t){return e.queue(t)})},t.prototype.queuePageNode=function(t){var e=this;this.pageNodes.push(t),t.getChildren().forEach(function(t){return e.queue(t)})},t.prototype.queueBlockNode=function(t){var e=this;t.getChildren().forEach(function(t){return e.queue(t)})},t.prototype.queueLineNode=function(t){this.lineNodes.push(t)},t.prototype.queueInlineNode=function(t){this.queue(t.getParent())},t.prototype.queueAtomicNode=function(t){this.queue(t.getParent())},t}(),s=function(){function t(){this.nodeQueue=new a,this.nodeJoiner=new r.NodeJoiner,this.nodeBreaker=new o.NodeBreaker,this.ran=!1}return t.prototype.flow=function(t){if(this.ran)throw new Error("Layout flower has already been run.");return this.updatedNode=t,this.nodeQueue.queue(t),this.flushLineNodeQueue(),this.flushPageNodeQueue(),this.updatedNode},t.prototype.flushLineNodeQueue=function(){for(var t;t=this.nodeQueue.popLineNode();)this.flowLineNode(t)},t.prototype.flushPageNodeQueue=function(){for(var t;t=this.nodeQueue.popPageNode();)this.flowPageNode(t)},t.prototype.flowPageNode=function(t){if(!t.isFlowed()&&t.getParent())if(this.joinNextPageNode(t))this.nodeQueue.queue(t);else for(var e=t;e;){this.recordNodeAsUpdated(e);var n=this.nodeBreaker.break(e);if(!n){e.markAsFlowed();break}e.getParent().appendChildAfter(n,e),e.markAsFlowed(),e=n}},t.prototype.flowLineNode=function(t){if(!t.isFlowed()&&t.getParent())if(this.joinNextLineNode(t))this.nodeQueue.queue(t);else{for(var e=t;e;){this.recordNodeAsUpdated(e);var n=this.nodeBreaker.break(e);if(!n){e.markAsFlowed();break}e.getParent().appendChildAfter(n,e),e.markAsFlowed(),e=n}for(var o=t.getParent();o;){if("Page"===i.identifyLayoutNodeType(o)){this.nodeQueue.queue(t.getParent().getParent());break}o=o.getParent()}}},t.prototype.joinNextPageNode=function(t){var e=t.getNextSibling();if(!e)return!1;var n=t.getFirstChild();if(!n)return!1;var o=n.getFirstChild();return!!o&&(!(t.getContentHeight()+o.getHeight()>t.getHeight())&&(this.nodeJoiner.join(t,e),!0))},t.prototype.joinNextLineNode=function(t){var e=t.getNextSibling();if(!e)return!1;var n=e.getFirstChild();if(!n)return!1;var o=n.getFirstChild();return!!o&&(!(t.getContentWidth()+o.getWidth()>t.getWidth())&&(this.nodeJoiner.join(t,e),!0))},t.prototype.recordNodeAsUpdated=function(t){this.updatedNode=n.findCommonLineage(t,this.updatedNode)},t.prototype.getNodeLineage=function(t){for(var e=[],n=t;;){if(e.unshift(n),n.isRoot())return e;n=n.getParent()}},t}();e.LayoutFlower=s}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(7)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.prototype.break=function(t){switch(n.identifyLayoutNodeType(t)){case"Page":return this.breakPageNode(t);case"Line":return this.breakLineNode(t);default:return}},t.prototype.breakPageNode=function(t){for(var e=t.getInnerHeight(),n=0,o=t.getChildren(),r=0;r<o.length;r++){var i=o[r];if(n+(i.getHeight()-i.getPaddingBottom())>e){for(var a=t.clone(),s=0,u=t.getChildren().slice(r+1);s<u.length;s++){var d=u[s];t.removeChild(d),a.appendChild(d)}var c=t.getLastChild();if(c){var p=this.breakBlockNode(c,e-n);p&&a.insertChild(p),0===c.getChildren().length&&t.removeChild(c)}return a}n+=i.getHeight()}},t.prototype.breakBlockNode=function(t,e){for(var n=0,o=t.getChildren(),r=0;r<o.length;r++){var i=o[r];if(n+i.getHeight()>e){for(var a=t.clone(),s=0,u=t.getChildren().slice(r);s<u.length;s++){var d=u[s];t.removeChild(d),a.appendChild(d)}return a}n+=i.getHeight()}},t.prototype.breakLineNode=function(t){for(var e=t.getInnerWidth(),n=0,o=t.getChildren(),r=0;r<o.length;r++){var i=o[r];if(n+i.getTailTrimmedWidth()>e){for(var a=t.clone(),s=0,u=t.getChildren().slice(r+1);s<u.length;s++){var d=u[s];t.removeChild(d),a.appendChild(d)}var c=t.getLastChild();if(c){var p=this.breakInlineNode(c,e-n,e);p&&a.insertChild(p),0===c.getChildren().length&&t.removeChild(c)}return a}n+=i.getWidth()}},t.prototype.breakInlineNode=function(t,e,n){for(var o=0,r=t.getChildren(),i=0;i<r.length;i++){var a=r[i];if(o+a.getTailTrimmedWidth()>e){for(var s=t.clone(),u=0,d=t.getChildren().slice(i);u<d.length;u++){var c=d[u];t.removeChild(c),s.appendChild(c)}var p=s.getFirstChild();if(p){var h=this.breakAtomicNode(p,n);h&&s.appendChildAfter(h,p)}return s}o+=a.getWidth()}},t.prototype.breakAtomicNode=function(t,e){return t.getTailTrimmedWidth()<=e?null:t.breakAtWidth(e)},t}();e.NodeBreaker=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(16),n(17)],void 0===(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.componentService=t,this.ran=!1}return t.prototype.buildTree=function(t){if(this.ran)throw new Error("Tree builder has already been run.");return this.rootRenderNode=t,this._buildTree(),this.ran=!0,this.rootLayoutNode},t.prototype._buildTree=function(){this.rootLayoutNode=this.buildNode(this.rootRenderNode),this.ran=!0},t.prototype.buildNode=function(t){var e=this,r=this.componentService.getComponent(t.getComponentId());if(!r)throw new Error("Component "+t.getComponentId()+" is not registered.");var i=r.buildLayoutNode(t);if(!i)throw new Error("Could not build layout node from render node "+t.getId()+".");if(!t.isLeaf()&&!i.isLeaf()){var a=t.getChildren().map(function(t){return e.buildNode(t)});if(i instanceof o.DocLayoutNode){var s=this.componentService.getPageComponent().buildPageLayoutNode();a.forEach(function(t){s.appendChild(t)}),i.appendChild(s)}else if(i instanceof n.BlockLayoutNode){var u=this.componentService.getLineComponent().buildLineLayoutNode();a.forEach(function(t){u.appendChild(t)}),i.appendChild(u)}else a.forEach(function(t){i.appendChild(t)})}return i},t}();e.LayoutTreeBuilder=r}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(91)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){this.state=new n.ModelState(t,e)}return t.prototype.onDidUpdateModelState=function(t){this.state.onDidUpdateModelState(t)},t.prototype.getDocNode=function(){return this.state.getDocNode()},t.prototype.toHTML=function(t,e){return this.state.getDocNode().toDOM(t,e).outerHTML},t.prototype.resolvePosition=function(t){return this.state.getDocNode().resolvePosition(t)},t}();e.ModelService=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(3),n(38),n(36),n(92)],void 0===(r=function(t,e,n,o,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){var o=this;this.componentService=t,this.stateService=e,this.didUpdateModelStateEventEmitter=new n.EventEmitter,this.handleDidUpdateStateEvent=function(t){var e=o.findWrappedDepth(o.stateService.getTokens(),t.afterFrom,t.afterTo),n=o.findNodeContainingRange(t.beforeFrom,t.beforeTo,e),r=o.findNodeTokenRange(o.stateService.getTokens(),n.getId(),t.afterFrom,t.afterTo),a=new i.TokenParser(o.componentService).parse(r);n.onDidUpdate(a),o.didUpdateModelStateEventEmitter.emit({node:n})};var r=e.getTokens(),a=new i.TokenParser(t);this.docNode=a.parse(r),e.onDidUpdateState(this.handleDidUpdateStateEvent)}return t.prototype.onDidUpdateModelState=function(t){this.didUpdateModelStateEventEmitter.on(t)},t.prototype.getDocNode=function(){return this.docNode},t.prototype.findUpdatedNode=function(t,e,n,o,a){var s=this.docNode.resolvePosition(e).getLeaf(),u=this.docNode.resolvePosition(n).getLeaf(),d=r.findCommonLineage(s.getNode(),u.getNode()),c=this.findParentNodeOfTokenRange(t,o,a),p=t[c[0]].id,h=this.findNodeInLineageById(s.getNode(),p),f=r.findCommonLineage(d,h),l=this.findNodeTokenRange(t,f.getId(),c[0],c[1]);return[f,new i.TokenParser(this.componentService).parse(l)]},t.prototype.findWrappedDepth=function(t,e,n){for(var r,i=0,a=0,s=e;s<n;){switch(r=t[s],s++,o.identifyTokenType(r)){case"OpenToken":i--;break;case"CloseToken":i++}a=Math.max(a,i)}return a},t.prototype.findNodeContainingRange=function(t,e,n){for(var o=this.docNode.resolvePosition(t).getLeaf(),i=this.docNode.resolvePosition(e).getLeaf(),a=0;a<n;a++)o=o.getParent(),i=i.getParent();return r.findCommonLineage(o.getNode(),i.getNode())},t.prototype.findParentNodeOfTokenRange=function(t,e,n){var r=0,i=0;t.slice(e,n).forEach(function(t){switch(o.identifyTokenType(t)){case"OpenToken":i--;break;case"CloseToken":i++}i>r&&(r=i)});for(var a,s=e,u=r+1;u>0&&s>0;)switch(a=t[--s],o.identifyTokenType(a)){case"OpenToken":u--;break;case"CloseToken":u++}for(var d=n,c=r+1,p=t.length;c>0&&d<p;)switch(a=t[++d-1],o.identifyTokenType(a)){case"OpenToken":c++;break;case"CloseToken":c--}return[s,d]},t.prototype.findNodeInLineageById=function(t,e){if(t.getId()===e)return t;if(t.isRoot())throw new Error("Node "+e+" is not found in lineage.");return this.findNodeInLineageById(t.getParent(),e)},t.prototype.findNodeTokenRange=function(t,e,n,o){var r=this.findNodeOpenTokenPositionAndDepth(t,e,n),i=r[0],a=r[1],s=this.findNodeCloseTokenPosition(t,o,a);return t.slice(i,s)},t.prototype.findNodeOpenTokenPositionAndDepth=function(t,e,n){for(var r,i=n,a=0;i>=0;)switch(r=t[--i],o.identifyTokenType(r)){case"OpenToken":if(a--,r.id===e)return[i,a];break;case"CloseToken":a++}return[i,a]},t.prototype.findNodeCloseTokenPosition=function(t,e,n){for(var r,i=t.length,a=e,s=n;a<i;)switch(r=t[a],a++,o.identifyTokenType(r)){case"OpenToken":s--;break;case"CloseToken":if(++s>=0)return a}return a},t}();e.ModelState=a}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(38),n(23)],void 0===(r=function(t,e,n,o){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.NewNode=0]="NewNode",t[t.Content=1]="Content"}(r||(r={}));var i=function(){function t(){this.objects=[]}return t.prototype.push=function(t){this.objects.push(t)},t.prototype.pop=function(){return this.objects.pop()},t.prototype.peek=function(){return this.objects[this.objects.length-1]},t.prototype.getDoc=function(){if(0===this.objects.length)throw new Error("Error parsing state.");return this.objects[0]},t}(),a=function(){function t(t){this.componentService=t,this.parserState=r.NewNode,this.stack=new i,this.contentBuffer="",this.ran=!1}return t.prototype.parse=function(t){if(this.ran)throw new Error("Parser has already been run.");return this.tokens=t,this._parse(),this.ran=!0,this.rootNode},t.prototype._parse=function(){var t,e=this.tokens;this.stack=new i;for(var n=0,o=e.length;n<o;n++){t=e[n];try{this.processToken(t)}catch(r){throw r.message="Error at token "+n+": "+r.message,r}}this.ran=!0},t.prototype.processToken=function(t){switch(this.parserState){case r.NewNode:switch(n.identifyTokenType(t)){case"OpenToken":return void this.newNode(t);case"ContentToken":return void this.appendToContent(t);case"CloseToken":return void this.closeNode(t)}case r.Content:switch(n.identifyTokenType(t)){case"ContentToken":return void this.appendToContent(t);case"CloseToken":return void this.closeNode(t)}default:throw new Error("Unexpected token encountered.")}},t.prototype.newNode=function(t){var e=this.buildNode(t.componentId,t.partId,t.id,t.attributes),n=this.stack.peek();n&&n.node.appendChild(e),this.stack.push({node:e}),this.rootNode||(this.rootNode=e)},t.prototype.appendToContent=function(t){this.contentBuffer+=t,this.parserState=r.Content},t.prototype.closeNode=function(t){var e=this.stack.pop();if(!e)throw new Error("Unexpected end of tokens encountered.");e.node instanceof o.InlineModelNode&&e.node.setContent(this.contentBuffer);this.contentBuffer="",this.parserState=r.NewNode},t.prototype.buildNode=function(t,e,n,o){var r=this.componentService.getComponent(t);if(!r)throw new Error("Component "+t+" is not registered.");var i=r.buildModelNode(e,n,o);if(!i)throw new Error("Could not build model node from part "+e+", id "+n+" and attributes "+JSON.stringify(o)+".");return i},t}();e.TokenParser=a}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(94)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){this.state=new n.RenderState(t,e)}return t.prototype.onDidUpdateRenderState=function(t){this.state.onDidUpdateRenderState(t)},t.prototype.getDocNode=function(){return this.state.getDocNode()},t.prototype.getDocSize=function(){return this.state.getDocNode().getSize()},t.prototype.convertOffsetToModelOffset=function(t){return this.state.getDocNode().convertOffsetToModelOffset(t)},t.prototype.convertModelOffsetToOffset=function(t){return this.state.getDocNode().convertModelOffsetToOffset(t)},t.prototype.resolvePosition=function(t){return this.state.getDocNode().resolvePosition(t)},t.prototype.getStylesBetween=function(t,e){var n={},o=this.state.getDocNode();return this.extractStyle(n,o,t,e),n},t.prototype.extractStyle=function(t,e,n,o){var r=this;if(!(n>o)){var i=t[e.getComponentId()]=t[e.getComponentId()]||{};(i[e.getPartId()]=i[e.getPartId()]||[]).push(e.getStyle());var a=0;e.isLeaf()||e.getChildren().forEach(function(e){var i=e.getSize();if(0<=o-a&&n-a<=i){var s=Math.max(0,Math.min(i,n-a)),u=Math.max(0,Math.min(i,o-a));r.extractStyle(t,e,s,u)}a+=i})}},t}();e.RenderService=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(3),n(95)],void 0===(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){var r=this;this.componentService=t,this.modelService=e,this.didUpdateRenderStateEventEmitter=new n.EventEmitter,this.handleDidUpdateModelStateEvent=function(t){var e=new o.RenderTreeBuilder(r.componentService).buildTree(t.node),n=r.docNode.findDescendant(t.node.getId());if(!n)throw new Error("Render node "+t.node.getId()+" is not found.");n.onDidUpdate(e),r.didUpdateRenderStateEventEmitter.emit({node:n})};var i=e.getDocNode(),a=new o.RenderTreeBuilder(t);this.docNode=a.buildTree(i),e.onDidUpdateModelState(this.handleDidUpdateModelStateEvent)}return t.prototype.onDidUpdateRenderState=function(t){this.didUpdateRenderStateEventEmitter.on(t)},t.prototype.getDocNode=function(){return this.docNode},t}();e.RenderState=r}.apply(e,o))||(t.exports=r)},function(t,e,n){var o;void 0===(o=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.componentService=t,this.ran=!1}return t.prototype.buildTree=function(t){if(this.ran)throw new Error("Tree builder has already been run.");return this.rootModelNode=t,this._buildTree(),this.ran=!0,this.rootRenderNode},t.prototype._buildTree=function(){this.rootRenderNode=this.buildNode(this.rootModelNode),this.ran=!0},t.prototype.buildNode=function(t){var e=this,n=this.componentService.getComponent(t.getComponentId());if(!n)throw new Error("Component "+t.getComponentId()+" is not registered.");var o=n.buildRenderNode(t);if(!o)throw new Error("Could not build render node from model node "+t.getId()+".");return t.isLeaf()||o.isLeaf()||t.getChildren().forEach(function(t){o.appendChild(e.buildNode(t))}),o},t}();e.RenderTreeBuilder=n}.apply(e,[n,e]))||(t.exports=o)},function(t,e,n){var o;void 0===(o=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.services={}}return t.prototype.registerService=function(t,e){this.services[t]=e},t.prototype.getService=function(t){var e=this.services[t];if(!e)throw new Error("Service "+t+" is not registered.");return e},t}();e.ServiceRegistry=n}.apply(e,[n,e]))||(t.exports=o)},function(t,e,n){var o,r;o=[n,e,n(98)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){this.state=new n.State(t,e)}return t.prototype.onDidApplyTransformation=function(t){this.state.onDidApplyTransformation(t)},t.prototype.onDidUpdateState=function(t){this.state.onDidUpdateState(t)},t.prototype.getTokens=function(){return this.state.getTokens()},t.prototype.applyTransformations=function(t){return this.state.applyTransformations(t)},t.prototype.applyTransformation=function(t){return this.state.applyTransformations([t])[0]},t.prototype.unapplyTransformations=function(t){this.state.unapplyTransformations(t)},t.prototype.unapplyTransformation=function(t){return this.state.unapplyTransformations([t])},t}();e.StateService=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(3),n(99),n(21)],void 0===(r=function(t,e,n,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this.cursorService=t,this.didApplyTransformationEventEmitter=new n.EventEmitter,this.didUpdateStateEventEmitter=new n.EventEmitter;var r=new o.Tokenizer;this.tokens=r.tokenize(e)}return t.prototype.onDidApplyTransformation=function(t){this.didApplyTransformationEventEmitter.on(t)},t.prototype.onDidUpdateState=function(t){this.didUpdateStateEventEmitter.on(t)},t.prototype.getTokens=function(){return this.tokens},t.prototype.applyTransformations=function(t){var e=this;this.assertInitialized();var n=t.map(function(t){var n=e.applyTransformation(t);return e.didApplyTransformationEventEmitter.emit({transformation:t,appliedTransformation:n}),n}),o=this.findTransformedRange(n);return o&&this.didUpdateStateEventEmitter.emit({beforeFrom:o.beforeFrom,beforeTo:o.beforeTo,afterFrom:o.afterFrom,afterTo:o.afterTo}),n},t.prototype.unapplyTransformations=function(t){var e=this;this.assertInitialized(),t.slice().reverse().forEach(function(t){return e.unapplyTransformation(t)});var n=this.findTransformedRange(t);n&&this.didUpdateStateEventEmitter.emit({beforeFrom:n.beforeFrom,beforeTo:n.beforeTo,afterFrom:n.afterFrom,afterTo:n.afterTo})},t.prototype.applyTransformation=function(t){var e=this,n=this.cursorService.getCursorState(),o=new r.AppliedTransformation(t,n.anchor,n.head,n.leftLock),i=t.getOperations(),a=[];i.forEach(function(t){var n,i=t.adjustOffset(a);if(i instanceof r.InsertOperation){(n=e.tokens).splice.apply(n,[i.getAt(),0].concat(i.getTokens()));var s=new r.AppliedInsertOperation(i.getAt(),i.getTokens());o.addOperation(s)}else{if(!(i instanceof r.DeleteOperation))throw new Error("Unknown transformation operation encountered.");var u=e.tokens.splice(i.getFrom(),i.getTo()-i.getFrom());s=new r.AppliedDeleteOperation(i.getFrom(),u);o.addOperation(s)}a.push(i.getOffsetAdjustment())});var s=t.getCursorAnchor(),u=t.getCursorHead();return this.cursorService.setCursorState({anchor:null===s?n.anchor:s,head:null===u?n.head:u,leftLock:t.getCursorLockLeft()}),o},t.prototype.unapplyTransformation=function(t){var e=this;t.getOperations().slice().reverse().forEach(function(t){var n;if(t instanceof r.AppliedInsertOperation)e.tokens.splice(t.getAt(),t.getTokens().length);else{if(!(t instanceof r.AppliedDeleteOperation))throw new Error("Unknown applied transformation operation encountered.");(n=e.tokens).splice.apply(n,[t.getAt(),0].concat(t.getTokens()))}}),this.cursorService.setCursorState({anchor:t.getOriginalCursorAnchor(),head:t.getOriginalCursorHead(),leftLock:t.getOriginalCursorLockLeft()})},t.prototype.findTransformedRange=function(t){var e=void 0,n=void 0,o=void 0,r=void 0;if(t.forEach(function(t){var i=t.getTransformedRange();i&&((void 0===e||i.beforeFrom<e)&&(e=i.beforeFrom),(void 0===n||i.beforeTo>n)&&(n=i.beforeTo),(void 0===o||i.afterFrom<o)&&(o=i.afterFrom),(void 0===r||i.afterTo<r)&&(r=i.afterTo))}),void 0!==e)return{beforeFrom:e,beforeTo:n,afterFrom:o,afterTo:r}},t.prototype.assertInitialized=function(){if(!this.tokens)throw new Error("State is not initialized.")},t}();e.State=i}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r,i=this&&this.__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&(n[o[r]]=t[o[r]])}return n};o=[n,e,n(6)],void 0===(r=function(t,e,n){"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.NewToken=0]="NewToken",t[t.NewTag=1]="NewTag",t[t.Tag=2]="Tag",t[t.TagAttributes=3]="TagAttributes",t[t.TagAttributesString=4]="TagAttributesString",t[t.TagAttributesStringEscape=5]="TagAttributesStringEscape",t[t.CloseTag=6]="CloseTag"}(o||(o={}));var r=function(){function t(){this.tokenizerState=o.NewToken,this.tagBuffer="",this.attributesBuffer="",this.ran=!1}return t.prototype.tokenize=function(t){if(this.ran)throw new Error("Tokenizer has already been run.");return this.markup=t,this._tokenize(),this.ran=!0,this.tokens},t.prototype._tokenize=function(){this.tokens=[];for(var t,e=this.markup,n=0,r=e.length;n<r;n++)switch(t=e[n],this.tokenizerState){case o.NewToken:if(/</.test(t)){this.newTag(t);break}this.appendChar(t);break;case o.NewTag:if(/A-Z/.test(t)){this.appendCharToTag(t);break}if(/\//.test(t)){this.closeTag(t);break}case o.Tag:if(/[A-Za-z]/.test(t)){this.appendCharToTag(t);break}if(/{/.test(t)){this.newAttributes(t);break}case o.TagAttributes:if(/"/.test(t)){this.newAttributesString(t);break}if(/>/.test(t)){this.endTag(t);break}this.appendCharToAttributes(t);break;case o.TagAttributesString:if(/"/.test(t)){this.endAttributesString(t);break}if(/\\/.test(t)){this.escapeNextAttributesStringChar(t);break}this.appendCharToAttributes(t);break;case o.TagAttributesStringEscape:this.appendCharToAttributes(t);break;case o.CloseTag:if(/>/.test(t)){this.endCloseTag(t);break}default:throw new Error("Unexpected character "+t+" at offset "+n+".")}},t.prototype.newTag=function(t){this.tokenizerState=o.NewTag},t.prototype.appendChar=function(t){this.tokens.push(t)},t.prototype.appendCharToTag=function(t){this.tagBuffer+=t,this.tokenizerState=o.Tag},t.prototype.newAttributes=function(t){this.attributesBuffer+=t,this.tokenizerState=o.TagAttributes},t.prototype.appendCharToAttributes=function(t){this.attributesBuffer+=t,this.tokenizerState===o.TagAttributesStringEscape&&(this.tokenizerState=o.TagAttributesString)},t.prototype.newAttributesString=function(t){this.attributesBuffer+=t,this.tokenizerState=o.TagAttributesString},t.prototype.endTag=function(t){var e,n,r;try{n=(e=JSON.parse(this.attributesBuffer)).id,r=i(e,["id"])}catch(d){throw new Error("Invalid attributes JSON: "+this.attributesBuffer+".")}if(!n)throw new Error("Missing id in attributes JSON: "+this.attributesBuffer+".");if(!this.tagBuffer)throw new Error("Open tag type cannot be empty.");"Doc"===this.tagBuffer&&(n="doc");var a=this.tagBuffer.split(".",1),s=a[0],u=a[1];u||(u=s),this.tokens.push({componentId:s,partId:u,id:n,attributes:r}),this.attributesBuffer="",this.tagBuffer="",this.tokenizerState=o.NewToken},t.prototype.endAttributesString=function(t){this.attributesBuffer+=t,this.tokenizerState=o.TagAttributes},t.prototype.escapeNextAttributesStringChar=function(t){this.tokenizerState=o.TagAttributesStringEscape},t.prototype.closeTag=function(t){this.tokenizerState=o.CloseTag},t.prototype.endCloseTag=function(t){this.tokens.push(n.CLOSE_TOKEN),this.tokenizerState=o.NewToken},t}();e.Tokenizer=r}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(101),n(102),n(107)],void 0===(r=function(t,e,n,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e,i,a,s,u){this.state=new r.ViewState(t,e,i),this.domController=new o.DOMController(t,u,this),this.cursor=new n.CursorView(t,a,s,i,this)}return t.prototype.onDidUpdateViewState=function(t){this.state.onDidUpdateViewState(t)},t.prototype.onDidFocus=function(t){this.domController.onDidFocus(t)},t.prototype.onDidBlur=function(t){this.domController.onDidBlur(t)},t.prototype.onDidPressKey=function(t){this.domController.onDidPressKey(t)},t.prototype.getDocNode=function(){return this.state.getDocNode()},t.prototype.isFocused=function(){return this.domController.isFocused()},t.prototype.attach=function(t){this.state.attach(t),this.cursor.attach(),this.domController.attach()},t.prototype.requestFocus=function(){this.domController.requestFocus()},t.prototype.requestBlur=function(){this.domController.requestBlur()},t}();e.ViewService=i}.apply(e,o))||(t.exports=r)},function(t,e,n){var o;void 0===(o=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,n,o,r){var i=this;this.instanceId=t,this.cursorService=e,this.renderService=n,this.layoutService=o,this.viewService=r,this.blinkInterval=null,this.blinkState=!0,this.domSelections=[],this.attached=!1,this.handleDidUpdateCursorState=function(){i.updateView()},this.handleDidUpdateViewState=function(){i.updateView()},this.handleDidFocus=function(){i.updateView()},this.handleDidBlur=function(){i.updateView()},this.domCaret=document.createElement("div"),this.domCaret.className="tw--cursor--caret",this.domCaret.setAttribute("data-tw-instance",this.instanceId),this.domCaret.style.position="absolute",this.domCaret.style.userSelect="none",this.domCaret.style.pointerEvents="none",this.domCaret.style.width="2px",this.domCaret.style.marginLeft="-1px",e.onDidUpdateCursor(this.handleDidUpdateCursorState),r.onDidUpdateViewState(this.handleDidUpdateViewState),r.onDidFocus(this.handleDidFocus),r.onDidBlur(this.handleDidBlur)}return t.prototype.attach=function(){if(this.attached)throw new Error("Already attached to the DOM.");this.attached=!0,this.updateView()},t.prototype.updateView=function(){var t=this;if(this.attached){this.clearDOMSelections();var e,n,o,r,i,a=this.cursorService.getCursorState(),s=this.boundCursorPosition(a.anchor),u=this.boundCursorPosition(a.head),d=Math.min(s,u),c=Math.max(s,u),p=this.layoutService.resolvePageRects(d,c),h=this.viewService.getDocNode().getChildren(),f=this.viewService.isFocused(),l=-1,g=-1,v=-1,y=-1;if(p.forEach(function(e,n){var o=h[n].getDOMContentContainer();e.forEach(function(e,r){if(l<0&&(l=n,g=r),v=n,y=r,0!==e.width){var i=t.buildDOMSelection(e);i.style.background=f?"hsla(213, 100%, 50%, 0.2)":"hsla(0, 0%, 0%, 0.08)",o.appendChild(i),t.domSelections.push(i)}})}),u<s)e=l,n=(i=p[l][g]).left,o=i.top,r=i.height;else e=v,n=(i=p[v][y]).left+i.width,o=i.top,r=i.height;if(u===s){this.domCaret.style.display="block",this.domCaret.style.top=o+"px",this.domCaret.style.left=n+"px",this.domCaret.style.height=r+"px",this.domCaret.style.background=f?"hsla(213, 100%, 50%, 1)":"hsla(0, 0%, 0%, 0.5)";var m=h[e].getDOMContentContainer();this.domCaret.parentElement&&this.domCaret.parentElement!==m&&this.domCaret.parentElement.removeChild(this.domCaret),this.domCaret.parentElement||m.appendChild(this.domCaret),this.blinkStop(),f&&this.blinkStart()}else this.domCaret.style.display="none",this.blinkStop()}},t.prototype.blinkStart=function(){var t=this;null===this.blinkInterval&&(this.blinkState=!0,this.blinkInterval=window.setInterval(function(){t.blinkState=!t.blinkState,t.updateDOMBlink()},500))},t.prototype.blinkStop=function(){null!==this.blinkInterval&&(this.domCaret.style.visibility="visible",clearInterval(this.blinkInterval),this.blinkInterval=null)},t.prototype.updateDOMBlink=function(){this.blinkState?this.domCaret.style.visibility="visible":this.domCaret.style.visibility="hidden"},t.prototype.clearDOMSelections=function(){this.domSelections.forEach(function(t){t.parentElement&&t.parentElement.removeChild(t)}),this.domSelections=[]},t.prototype.buildDOMSelection=function(t){var e=document.createElement("div");return e.className="tw--cursor--selection",e.setAttribute("data-tw-instance",this.instanceId),e.style.position="absolute",e.style.top=t.top-t.paddingTop+"px",e.style.left=t.left+"px",e.style.width=t.paddingLeft+t.width+t.paddingRight+"px",e.style.height=t.paddingTop+t.height+t.paddingBottom+"px",e.style.userSelect="none",e.style.pointerEvents="none",e},t.prototype.boundCursorPosition=function(t){return Math.min(Math.max(t,0),this.renderService.getDocNode().getSize()-1)},t}();e.CursorView=n}.apply(e,[n,e]))||(t.exports=o)},function(t,e,n){var o,r;o=[n,e,n(103),n(104),n(105),n(106)],void 0===(r=function(t,e,n,o,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e,a){var s=this;this.instanceId=t,this.commandService=e,this.viewService=a,this.focused=!1,this.composing=!1,this.mouseDown=!1,this.handleDidInsert=function(t){s.commandService.executeCommand("tw.state.insert",t.tokens)},this.handleCompositionDidStart=function(t){s.composing=!0},this.handleCompositionDidEnd=function(t){s.composing=!1},this.handlePointerDidDown=function(t){s.focused||s.commandService.executeCommand("tw.view.focus"),t.consecutive||s.commandService.executeCommand("tw.cursor.move",t.offset)},this.handlePointerDidMove=function(t){t.pointerDown&&s.commandService.executeCommand("tw.cursor.moveHead",t.offset)},this.handlePointerDidClick=function(t){switch(t.consecutiveCount){case 1:break;case 2:s.commandService.executeCommand("tw.cursor.selectWord",t.offset);break;case 3:default:s.commandService.executeCommand("tw.cursor.selectBlock",t.offset)}},this.handleDidFocus=function(t){s.focused=!0},this.handleDidBlur=function(t){s.focused=!1},this.$iframe=this.createIframe(),this.$contentEditable=this.createContentEditable(),this.keyboardObserver=new r.KeyboardObserver(this.$contentEditable),this.keyboardObserver.onDidInsert(this.handleDidInsert),this.keyboardObserver.onCompositionDidStart(this.handleCompositionDidStart),this.keyboardObserver.onCompositionDidEnd(this.handleCompositionDidEnd),this.pointerObserver=new i.PointerObserver(t,a),this.pointerObserver.onPointerDidDown(this.handlePointerDidDown),this.pointerObserver.onPointerDidMove(this.handlePointerDidMove),this.pointerObserver.onPointerDidClick(this.handlePointerDidClick),this.focusObserver=new o.FocusObserver(this.$contentEditable),this.focusObserver.onDidFocus(this.handleDidFocus),this.focusObserver.onDidBlur(this.handleDidBlur),this.clipboardObserver=new n.ClipboardObserver(this.$contentEditable)}return t.prototype.onDidPressKey=function(t){this.keyboardObserver.onDidPressKey(t)},t.prototype.onDidFocus=function(t){this.focusObserver.onDidFocus(t)},t.prototype.onDidBlur=function(t){this.focusObserver.onDidBlur(t)},t.prototype.attach=function(){var t=this;document.body.appendChild(this.$iframe),setTimeout(function(){t.$iframe.contentDocument.body.appendChild(t.$contentEditable)})},t.prototype.requestFocus=function(){this.$contentEditable.focus()},t.prototype.requestBlur=function(){this.$contentEditable.blur()},t.prototype.isFocused=function(){return this.focused},t.prototype.isComposing=function(){return this.composing},t.prototype.createIframe=function(){var t=document.createElement("iframe");return t.scrolling="no",t.src="about:blank",t.style.width="0",t.style.height="0",t.style.border="none",t.style.position="fixed",t.style.zIndex="-1",t.style.opacity="0",t.style.overflow="hidden",t.style.left="0",t.style.top="0",t},t.prototype.createContentEditable=function(){var t=document.createElement("div");return t.contentEditable="true",t.style.whiteSpace="pre",t},t}();e.DOMController=a}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(3)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){var e=this;this.$contentEditable=t,this.didCopyEventEmitter=new n.EventEmitter,this.didPasteEventEmitter=new n.EventEmitter,this.handleCopy=function(t){t.preventDefault(),e.didCopyEventEmitter.emit({})},this.handlePaste=function(t){t.preventDefault();var n=t.clipboardData;n&&e.didCopyEventEmitter.emit({data:n})},t.addEventListener("copy",this.handleCopy),t.addEventListener("paste",this.handlePaste)}return t.prototype.onDidCopy=function(t){this.didCopyEventEmitter.on(t)},t.prototype.onDidPaste=function(t){this.didPasteEventEmitter.on(t)},t}();e.ClipboardObserver=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(3)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){var e=this;this.$contentEditable=t,this.didFocusEventEmitter=new n.EventEmitter,this.didBlurEventEmitter=new n.EventEmitter,this.handleFocus=function(){e.didFocusEventEmitter.emit({})},this.handleBlur=function(){e.didBlurEventEmitter.emit({})},t.addEventListener("focus",this.handleFocus),t.addEventListener("blur",this.handleBlur)}return t.prototype.onDidFocus=function(t){this.didFocusEventEmitter.on(t)},t.prototype.onDidBlur=function(t){this.didBlurEventEmitter.on(t)},t}();e.FocusObserver=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(3),n(35)],void 0===(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){var e=this;this.$contentEditable=t,this.composing=!1,this.didInsertEventEmitter=new n.EventEmitter,this.didPressKeyEventEmitter=new n.EventEmitter,this.compositionDidStartEventEmitter=new n.EventEmitter,this.compositionDidEndEventEmitter=new n.EventEmitter,this.keyInterpreter=new i,this.handleDidMutate=function(){setTimeout(function(){if(!e.composing){var t=e.parse();e.$contentEditable.innerHTML="",0!==t.length&&e.didInsertEventEmitter.emit({tokens:t})}})},this.handleKeyDown=function(t){var n=e.keyInterpreter.interpretFromKeyboardEvent(t);n&&((n.includes("cmd+")||n.includes("win+")||n.includes("meta+")||n.includes("ctrl+")||n.includes("alt+"))&&t.preventDefault(),e.didPressKeyEventEmitter.emit({key:n}))},this.handleCompositionStart=function(){e.composing=!0},this.handleCompositionEnd=function(){e.composing=!0},this.mutationObserver=new MutationObserver(this.handleDidMutate),t.addEventListener("keydown",this.handleKeyDown),t.addEventListener("compositionstart",this.handleCompositionStart),t.addEventListener("compositionend",this.handleCompositionEnd),this.mutationObserver.observe(t,{subtree:!0,characterData:!0,childList:!0})}return t.prototype.onDidInsert=function(t){this.didInsertEventEmitter.on(t)},t.prototype.onDidPressKey=function(t){this.didPressKeyEventEmitter.on(t)},t.prototype.onCompositionDidStart=function(t){this.compositionDidStartEventEmitter.on(t)},t.prototype.onCompositionDidEnd=function(t){this.compositionDidEndEventEmitter.on(t)},t.prototype.parse=function(){var t=this,e=[];return this.$contentEditable.childNodes.forEach(function(n){e.push.apply(e,t.parseNode(n))}),e},t.prototype.parseNode=function(t){var e=this;if(t.nodeValue)return t.nodeValue.split("");var n=[];return t.childNodes.forEach(function(t){n.push.apply(n,e.parseNode(t))}),n},t}();e.KeyboardObserver=r;var i=function(){function t(){}return t.prototype.interpretFromKeyboardEvent=function(t){var e;switch(t.key){case"Control":case"Shift":case"Alt":case"Meta":return;case"ArrowLeft":e="left";break;case"ArrowRight":e="right";break;case"ArrowUp":e="up";break;case"ArrowDown":e="down";break;default:e=t.key.toLowerCase()}if(t.metaKey)switch(o.detectPlatform()){case"macOS":e="cmd+"+e;break;case"Windows":e="win+"+e;break;case"Linux":default:e="meta+"+e}return t.altKey&&(e="alt+"+e),t.shiftKey&&(e="shift+"+e),t.ctrlKey&&(e="ctrl+"+e),e},t}()}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(3)],void 0===(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var o=this;this.instanceId=t,this.viewService=e,this.clickThreshold=250,this.consecutiveClickThreshold=250,this.pointerDownAt=null,this.clickedAt=null,this.consecutiveClickCount=0,this.pointerDidDownEventEmitter=new n.EventEmitter,this.pointerDidMoveEventEmitter=new n.EventEmitter,this.pointerDidUpEventEmitter=new n.EventEmitter,this.pointerDidClickEventEmitter=new n.EventEmitter,this.handleMouseDown=function(t){var e=o.resolveCoordinates(t.clientX,t.clientY);if(null!==e){t.preventDefault(),o.pointerDownAt=Date.now();var n=null!==o.clickedAt&&Date.now()-o.clickedAt<o.consecutiveClickThreshold;o.pointerDidDownEventEmitter.emit({offset:e,consecutive:n})}},this.handleMouseMove=function(t){var e=o.resolveCoordinates(t.clientX,t.clientY);null!==e&&o.pointerDidMoveEventEmitter.emit({pointerDown:null!==o.pointerDownAt,offset:e})},this.handleMouseUp=function(t){if(null!==o.pointerDownAt){var e=Date.now(),n=e-o.pointerDownAt<o.clickThreshold;o.pointerDownAt=null,o.pointerDidUpEventEmitter.emit({});var r=o.resolveCoordinates(t.clientX,t.clientY);if(null!==r&&n){if(null!==o.clickedAt)e-o.clickedAt>o.consecutiveClickThreshold&&(o.consecutiveClickCount=0);o.consecutiveClickCount++,o.clickedAt=Date.now(),o.pointerDidClickEventEmitter.emit({offset:r,consecutiveCount:o.consecutiveClickCount})}}},window.addEventListener("mousedown",this.handleMouseDown),window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("mouseup",this.handleMouseUp)}return t.prototype.onPointerDidDown=function(t){this.pointerDidDownEventEmitter.on(t)},t.prototype.onPointerDidMove=function(t){this.pointerDidMoveEventEmitter.on(t)},t.prototype.onPointerDidUp=function(t){this.pointerDidUpEventEmitter.on(t)},t.prototype.onPointerDidClick=function(t){this.pointerDidClickEventEmitter.on(t)},t.prototype.resolveCoordinates=function(t,e){for(var n=0,o=0,r=this.viewService.getDocNode().getChildren();o<r.length;o++){var i=r[o],a=i.getLayoutNode(),s=i.getDOMContainer().getBoundingClientRect();if(s.left<=t&&s.right>=t&&s.top<=e&&s.bottom>=e){var u=t-s.left,d=e-s.top;return n+a.convertCoordinatesToOffset(u,d)}n+=a.getSize()}return null},t}();e.PointerObserver=o}.apply(e,o))||(t.exports=r)},function(t,e,n){var o,r;o=[n,e,n(3),n(108)],void 0===(r=function(t,e,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,r){var i=this;this.instanceId=t,this.componentService=e,this.layoutService=r,this.attached=!1,this.didUpdateViewStateEventEmitter=new n.EventEmitter,this.handleDidUpdateLayoutStateEvent=function(t){var e=new o.ViewTreeBuilder(i.instanceId,i.componentService).buildTree(t.node),n=i.docNode.findDescendant(t.node.getId());if(!n)throw new Error("Layout node "+t.node.getId()+" is not found.");n.onDidUpdate(e),i.didUpdateViewStateEventEmitter.emit({node:n})};var a=r.getDocNode(),s=new o.ViewTreeBuilder(this.instanceId,e);this.docNode=s.buildTree(a),r.onDidUpdateLayoutState(this.handleDidUpdateLayoutStateEvent)}return t.prototype.onDidUpdateViewState=function(t){this.didUpdateViewStateEventEmitter.on(t)},t.prototype.getDocNode=function(){return this.docNode},t.prototype.attach=function(t){if(this.attached)throw new Error("View is already attached to the DOM.");this.docNode.attach(t),this.attached=!0},t}();e.ViewState=r}.apply(e,o))||(t.exports=r)},function(t,e,n){var o;void 0===(o=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.instanceId=t,this.componentService=e,this.ran=!1}return t.prototype.buildTree=function(t){if(this.ran)throw new Error("Tree builder has already been run.");return this.rootLayoutNode=t,this._buildTree(),this.ran=!0,this.rootViewNode},t.prototype._buildTree=function(){this.rootViewNode=this.buildNode(this.rootLayoutNode),this.ran=!0},t.prototype.buildNode=function(t){var e=this,n=this.componentService.getComponent(t.getComponentId());if(!n)throw new Error("Component "+t.getComponentId()+" is not registered.");var o=n.buildViewNode(t);if(!o)throw new Error("Could not build view node from layout node "+t.getId()+".");o.isLeaf()||o.isLeaf()||t.getChildren().map(function(t){return e.buildNode(t)}).forEach(function(t){return o.appendChild(t)});return this.applyMetadataToDOMContainer(o),o.onLayoutDidUpdate(),o},t.prototype.applyMetadataToDOMContainer=function(t){var e=t.getDOMContainer(),n=t.getComponentId(),o=t.getPartId(),r=t.getId();e.className="tw--"+n+"--"+o,e.setAttribute("data-tw-instance",this.instanceId),e.setAttribute("data-tw-component",n),e.setAttribute("data-tw-part",o),e.setAttribute("data-tw-id",r)},t}();e.ViewTreeBuilder=n}.apply(e,[n,e]))||(t.exports=o)},,,,,,function(t,e,n){"use strict";n.r(e);var o=n(0),r=n.n(o),i=n(12),a=n.n(i),s=(n(54),n(39)),u=n(40),d=n(45),c=n(41),p=n(46),h=n(1),f=n(2),l=(n(55),n(13)),g=n(42);function v(){var t=Object(h.a)(["\n    position: absolute;\n    bottom: 8px;\n    left: 9px;\n    right: 9px;\n    height: 3px;\n    background: ",";\n"]);return v=function(){return t},t}function y(){var t=Object(h.a)(["\n    -webkit-appearance: none;\n    border: none;\n    font-size: 12px;\n    font-weight: 500;\n    width: ","px;\n    background: white;\n    border-radius: 3px;\n    padding: 0 9px;\n    outline: none;\n    position: relative;\n    &:hover,\n    &:focus {\n        background: rgba(0, 0, 0, 0.04);\n    }\n    option {\n        color: rgba(0, 0, 0, 0.85);\n    }\n    ","\n"]);return y=function(){return t},t}function m(){var t=Object(h.a)(["\n    flex: 0 0 auto;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 36px;\n    height: 36px;\n    font-size: 18px;\n    position: relative;\n    color: rgba(0, 0, 0, 0.85);\n    background: transparent;\n    padding: 0;\n    border: none;\n    border-radius: 3px;\n    outline: none;\n    &:after {\n        content: '';\n        position: absolute;\n        bottom: 0;\n        left: 3px;\n        right: 3px;\n        height: 3px;\n    }\n    &:hover,\n    &:focus {\n        background: rgba(0, 0, 0, 0.04);\n    }\n    ","\n    ","\n"]);return m=function(){return t},t}function w(){var t=Object(h.a)(["\n    flex: 0 0 auto;\n    display: flex;\n    border-radius: 4px;\n    padding: 0 6px;\n    position: relative;\n    &::before {\n        content: '';\n        position: absolute;\n        top: 9px;\n        bottom: 9px;\n        left: 0;\n        width: 1px;\n        background: rgba(0, 0, 0, 0.15);\n    }\n    &:last-child {\n        &::after {\n            content: '';\n            position: absolute;\n            top: 9px;\n            bottom: 9px;\n            right: 0;\n            width: 1px;\n            background: rgba(0, 0, 0, 0.15);\n        }\n    }\n"]);return w=function(){return t},t}function b(){var t=Object(h.a)(["\n    display: flex;\n    margin: 0 auto;\n    width: 816px;\n"]);return b=function(){return t},t}function C(){var t=Object(h.a)(["\n    position: sticky;\n    top: 0;\n    padding: 3px 24px;\n    background: white;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.09);\n    z-index: 10;\n"]);return C=function(){return t},t}var S=f.a.div(C()),O=f.a.div(b()),T=f.a.div(w()),E=f.a.button(m(),function(t){return t.disabled&&"\n        opacity: 0.45;\n        &:hover,\n        &:focus {\n            background: transparent;\n        }\n    "},function(t){return t.active&&"\n        color: rgba(255, 0, 0, 1);\n        &:after {\n            background: rgba(255, 0, 0, 1);\n        }\n    "}),P=f.a.select(y(),function(t){return t.width},function(t){return t.disabled&&"\n        opacity: 0.45;\n        &:hover,\n        &:focus {\n            background: transparent;\n        }\n    "}),_=f.a.div(v(),function(t){return t.color});function N(t){var e=t.taleweaver,n=Object(o.useState)([]),i=Object(l.a)(n,2),a=i[0],s=i[1],u=Object(o.useMemo)(function(){return function(t){s(function(t){var e=t.getServiceRegistry().getService("render"),n=t.getServiceRegistry().getService("cursor").getCursorState(),o=e.getStylesBetween(Math.min(n.anchor,n.head),Math.max(n.anchor,n.head));return o.text&&o.text.text?o.text.text:[]}(t))}},[]);Object(o.useEffect)(function(){if(e){var t=e.getServiceRegistry().getService("cursor"),n=e.getServiceRegistry().getService("render");t.onDidUpdateCursor(function(t){return u(e)}),n.onDidUpdateRenderState(function(t){return u(e)}),u(e)}},[e]);var d=1===new Set(a.map(function(t){return t.font})).size?a[0].font:null,c=1===new Set(a.map(function(t){return t.size})).size?a[0].size:null,p=1===new Set(a.map(function(t){return t.weight>400})).size&&a[0].weight>400,h=1===new Set(a.map(function(t){return t.italic})).size&&a[0].italic,f=1===new Set(a.map(function(t){return t.underline})).size&&a[0].underline,g=1===new Set(a.map(function(t){return t.strikethrough})).size&&a[0].strikethrough,v=1===new Set(a.map(function(t){return t.color})).size?a[0].color:null;return r.a.createElement(S,null,r.a.createElement(O,null,r.a.createElement(T,null,r.a.createElement(P,{width:120,value:"Normal",disabled:!1,onChange:function(t){return null}},r.a.createElement("option",{value:"",style:{display:"none"}}),r.a.createElement("option",{value:"Normal"},"Normal text"),r.a.createElement("option",{value:"Title"},"Title"),r.a.createElement("option",{value:"Subtitle"},"Subtitle"),r.a.createElement("option",{value:"Heading 1"},"Heading 1"),r.a.createElement("option",{value:"Heading 2"},"Heading 2"),r.a.createElement("option",{value:"Heading 3"},"Heading 3"))),r.a.createElement(T,null,r.a.createElement(P,{width:120,value:d||"",disabled:null===d,onChange:function(t){return null}},r.a.createElement("option",{value:"",style:{display:"none"}}),r.a.createElement("option",{value:"sans-serif"},"sans-serif"))),r.a.createElement(T,null,r.a.createElement(P,{width:60,value:c?c.toString():"",disabled:null===c,onChange:function(t){return null}},r.a.createElement("option",{value:"",style:{display:"hidden"}}),r.a.createElement("option",{value:"10"},"10"),r.a.createElement("option",{value:"12"},"12"),r.a.createElement("option",{value:"14"},"14"),r.a.createElement("option",{value:"16"},"16"),r.a.createElement("option",{value:"18"},"18"),r.a.createElement("option",{value:"24"},"24"),r.a.createElement("option",{value:"30"},"30"),r.a.createElement("option",{value:"36"},"36"),r.a.createElement("option",{value:"42"},"42"))),r.a.createElement(T,null,r.a.createElement(E,{active:p,disabled:!1,onClick:function(){return null}},r.a.createElement("i",{className:"mdi mdi-format-bold"})),r.a.createElement(E,{active:h,disabled:!1,onClick:function(){return null}},r.a.createElement("i",{className:"mdi mdi-format-italic"})),r.a.createElement(E,{active:f,disabled:!1,onClick:function(){return null}},r.a.createElement("i",{className:"mdi mdi-format-underline"})),r.a.createElement(E,{active:g,disabled:!1,onClick:function(){return null}},r.a.createElement("i",{className:"mdi mdi-format-strikethrough-variant"})),r.a.createElement(E,{active:!1,disabled:null===v,onClick:function(){return null}},r.a.createElement("i",{className:"mdi mdi-format-color-text",style:{position:"relative",top:"-2px"}}),r.a.createElement(_,{color:v||"transparent"})))))}function x(){var t=Object(h.a)(["\n    text-align: center;\n    .tw--doc--doc {\n        font-family: 'Source Sans Pro', sans-serif;\n        display: inline-block;\n        padding-bottom: 9px;\n        counter-reset: page-counter;\n    }\n    .tw--page--page {\n        background: rgba(255, 255, 255, 1);\n        margin: 9px auto 0;\n        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);\n        position: relative;\n        &::after {\n            counter-increment: page-counter;\n            content: 'Page ' counter(page-counter) '';\n            position: absolute;\n            top: 12px;\n            left: 50%;\n            transform: translateX(-50%);\n            font-size: 10px;\n            font-family: 'Quicksand', sans-serif;\n            font-weight: 500;\n            color: rgba(0, 0, 0, 0.45);\n            pointer-events: none;\n        }\n        *::selection {\n            background: rgba(255, 255, 255, 1);\n        }\n    }\n"]);return x=function(){return t},t}function k(){var t=Object(h.a)([""]);return k=function(){return t},t}var L=f.a.div(k()),D=f.a.div(x());var M=function(t){var e=t.initialMarkup,n=t.config,i=Object(o.useRef)(null),a=Object(o.useState)(null),s=Object(l.a)(a,2),u=s[0],d=s[1];return Object(o.useEffect)(function(){var t={};n&&(t["tw.core"]=n),d(new g.Taleweaver(e,t))},[]),Object(o.useEffect)(function(){u&&i.current&&u.attach(i.current)},[u,i.current]),r.a.createElement(L,{key:1},r.a.createElement(N,{taleweaver:u}),r.a.createElement(D,{ref:i}))},z='\n<doc {"id": "doc"}>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}", "weight": 700}>\n      Once upon a time there lived in a certain village a little country girl, the prettiest creature was ever seen. Her mother was excessively fond of her; and her grandmother doted on her still more. This good woman had made for her a little red riding-hood; which became the girl so extremely well that everybody called her Little Red Riding-Hood.\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}", "italic": true}>\n      One day her mother, having made some custards, said to her:\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}", "color": "rgba(255, 0, 0, 1)"}>\n      "Go, my dear, and see how thy grandmamma does, for I hear she has been very ill; carry her a custard, and this little pot of butter."\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}", "size": 24}>\n      Little Red Riding-Hood set out immediately to go to her grandmother, who lived in another village.\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}", "strikethrough": true, "underline": true}>\n      As she was going through the wood, she met with Gaffer Wolf, who had a very great mind to eat her up, but he dared not, because of some faggot-makers hard by in the forest. He asked her whither she was going. The poor child, who did not know that it was dangerous to stay and hear a wolf talk, said to him:\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      "I am going to see my grandmamma and carry her a custard and a little pot of butter from my mamma."\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      "Does she live far off?" said the Wolf.\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      "Oh! ay," answered Little Red Riding-Hood; "it is beyond that mill you see there, at the first house in the village."\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      "Well," said the Wolf, "and I\'ll go and see her too. I\'ll go this way and you go that, and we shall see who will be there soonest."\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      The Wolf began to run as fast as he could, taking the nearest way, and the little girl went by that farthest about, diverting herself in gathering nuts, running after butterflies, and making nosegays of such little flowers as she met with. The Wolf was not long before he got to the old woman\'s house. He knocked at the door--tap, tap.\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      "Who\'s there?"\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      "Your grandchild, Little Red Riding-Hood," replied the Wolf, counterfeiting her voice; "who has brought you a custard and a little pot of butter sent you by mamma."\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      The good grandmother, who was in bed, because she was somewhat ill, cried out\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      "Pull the bobbin, and the latch will go up."\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      The Wolf pulled the bobbin, and the door opened, and then presently he fell upon the good woman and ate her up in a moment, for it was above three days that he had not touched a bit. He then shut the door and went into the grandmother\'s bed, expecting Little Red Riding- Hood, who came some time afterward and knocked at the door--tap, tap.\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      "Who\'s there?"\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      Little Red Riding-Hood, hearing the big voice of the Wolf, was at first afraid; but believing her grandmother had got a cold and was hoarse, answered:\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      " \'Tis your grandchild, Little Red Riding-Hood, who has brought you a custard and a little pot of butter mamma sends you."\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      The Wolf cried out to her, softening his voice as much as he could:\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      "Pull the bobbin, and the latch will go up."\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      Little Red Riding-Hood pulled the bobbin, and the door opened.\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      The Wolf, seeing her come in, said to her, hiding himself under the bed-clothes:\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      "Put the custard and the little pot of butter upon the stool, and come and lie down with me."\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      Little Red Riding-Hood undressed herself and went into bed, where, being greatly amazed to see how her grandmother looked in her night-clothes, she said to her:\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      "Grandmamma, what great arms you have got!"\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      "That is the better to hug thee, my dear."\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      "Grandmamma, what great legs you have got!"\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      "That is to run the better, my child."\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      "Grandmamma, what great ears you have got!"\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      "That is to hear the better, my child."\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      "Grandmamma, what great eyes you have got!"\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      "It is to see the better, my child."\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      "Grandmamma, what great teeth you have got!"\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      "That is to eat thee up."\n    </>\n  </>\n  <paragraph {"id": "{{id}}"}>\n    <text {"id": "{{id}}"}>\n      And, saying these words, this wicked wolf fell upon Little Red Riding-Hood, and ate her all up.\n    </>\n  </>\n</>\n'.split("\n").map(function(t){return t.trim()}).join("").replace(/{{id}}/g,function(){return"".concat(Math.random().toString(36).substring(2))});function R(){var t=Object(h.a)(["\n    text-transform: uppercase;\n    font-weight: 500;\n    font-size: 14px;\n    color: rgba(0, 0, 0, 0.65);\n    border-top: 1px solid rgba(0, 0, 0, 0.45);\n    padding-top: 10px;\n    cursor: default;\n"]);return R=function(){return t},t}function I(){var t=Object(h.a)(["\n    text-align: center;\n    margin-top: 90px;\n"]);return I=function(){return t},t}function A(){var t=Object(h.a)(["\n    display: inline-block;\n    padding: 15px 60px;\n    outline: none;\n    color: rgba(0, 0, 0, 0.85);\n    text-decoration: none;\n    font-size: 20px;\n    background: transparent;\n    border-radius: 3px;\n    border: 1px solid rgba(0, 0, 0, 0.15);\n    &:hover {\n        color: rgba(0, 0, 0, 1);\n        background: rgba(0, 0, 0, 0.04);\n        border-color: rgba(0, 0, 0, 0.25);\n    }\n"]);return A=function(){return t},t}function j(){var t=Object(h.a)(["\n    margin-top: 90px;\n"]);return j=function(){return t},t}function B(){var t=Object(h.a)(["\n    font-size: 20px;\n    font-weight: 400;\n    color: rgba(0, 0, 0, 0.85);\n    margin: 30px 0 0;\n"]);return B=function(){return t},t}function H(){var t=Object(h.a)(["\n    font-size: 30px;\n    font-weight: 500;\n    color: rgba(0, 0, 0, 0.85);\n    margin: 90px 0 0;\n"]);return H=function(){return t},t}function W(){var t=Object(h.a)(["\n    color: rgba(0, 0, 0, 0.65);\n    font-size: 42px;\n    letter-spacing: 0.02em;\n    padding-bottom: 10px;\n    border-bottom: 2px solid rgba(0, 0, 0, 0.65);\n"]);return W=function(){return t},t}function U(){var t=Object(h.a)([""]);return U=function(){return t},t}function F(){var t=Object(h.a)(["\n    text-align: center;\n    padding: 90px 60px 30px;\n"]);return F=function(){return t},t}function V(){var t=Object(h.a)([""]);return V=function(){return t},t}var K=f.a.div(V()),q=f.a.div(F()),G=f.a.div(U()),$=f.a.span(W()),J=f.a.h1(H()),Q=f.a.h2(B()),X=f.a.div(j()),Y=f.a.a(A()),Z=f.a.div(I()),tt=f.a.span(R()),et=function(t){function e(){return Object(s.a)(this,e),Object(d.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return r.a.createElement(K,null,r.a.createElement(q,null,r.a.createElement(G,null,r.a.createElement($,null,"Taleweaver")),r.a.createElement(J,null,"Word processing in your browser."),r.a.createElement(Q,null,"Open source editor delivering true word processing experience."),r.a.createElement(X,null,r.a.createElement(Y,{href:"https://github.com/yuzhenmi/taleweaver"},"GitHub")),r.a.createElement(Z,null,r.a.createElement(tt,null,"\u2193 Check it out \u2193"))),r.a.createElement(M,{initialMarkup:z,config:{page:{width:816,height:1056,paddingTop:60,paddingBottom:60,paddingLeft:60,paddingRight:60}}}))}}]),e}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(r.a.createElement(et,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}],[[48,1,2]]]);
//# sourceMappingURL=main.84d29431.chunk.js.map
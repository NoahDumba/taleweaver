{"version":3,"sources":["../../../packages/core/dist/tw/util/dom.js","../../../packages/core/dist/tw/command/handlers/clipboard.js","../../../packages/core/dist/tw/tree/node.js","../../../packages/core/dist/tw/tree/position.js","../../../packages/core/dist/tw/layout/node.js","../../../packages/core/dist/tw/layout/atomic-node.js","../../../packages/core/dist/tw/layout/block-node.js","../../../packages/core/dist/tw/layout/doc-node.js","../../../packages/core/dist/tw/layout/inline-node.js","../../../packages/core/dist/tw/util/id.js","../../../packages/core/dist/tw/layout/line-node.js","../../../packages/core/dist/tw/layout/rect.js","../../../packages/core/dist/tw/layout/page-node.js","../../../packages/core/dist/tw/layout/utility.js","../../../packages/core/dist/tw/render/node.js","../../../packages/core/dist/tw/render/atomic-node.js","../../../packages/core/dist/tw/render/block-node.js","../../../packages/core/dist/tw/render/doc-node.js","../../../packages/core/dist/tw/render/inline-node.js","../../../packages/core/dist/tw/render/utility.js","../../../packages/core/dist/tw/state/transformation.js","../../../packages/core/dist/tw/command/handlers/cursor.js","../../../packages/core/dist/tw/command/handlers/history.js","../../../packages/core/dist/tw/state/token.js","../../../packages/core/dist/tw/model/node.js","../../../packages/core/dist/tw/model/block-node.js","../../../packages/core/dist/tw/model/doc-node.js","../../../packages/core/dist/tw/model/inline-node.js","../../../packages/core/dist/tw/model/utility.js","../../../packages/core/dist/tw/command/handlers/state.js","../../../packages/core/dist/tw/command/handlers/view.js","../../../packages/core/dist/tw/event/emitter.js","../../../packages/core/dist/tw/command/registry.js","../../../packages/core/dist/tw/command/service.js","../../../packages/core/dist/tw/view/node.js","../../../packages/core/dist/tw/view/doc-node.js","../../../packages/core/dist/tw/component/component.js","../../../packages/core/dist/tw/component/components/doc.js","../../../packages/core/dist/tw/view/block-node.js","../../../packages/core/dist/tw/view/inline-node.js","../../../packages/core/dist/tw/component/components/paragraph.js","../../../packages/core/dist/tw/util/language.js","../../../packages/core/dist/tw/component/components/text.js","../../../packages/core/dist/tw/view/line-node.js","../../../packages/core/dist/tw/component/components/line.js","../../../packages/core/dist/tw/view/page-node.js","../../../packages/core/dist/tw/component/components/page.js","../../../packages/core/dist/tw/component/registry.js","../../../packages/core/dist/tw/component/service.js","../../../packages/core/dist/tw/config/service.js","../../../packages/core/dist/tw/cursor/cursor.js","../../../packages/core/dist/tw/cursor/service.js","../../../packages/core/dist/tw/history/action.js","../../../packages/core/dist/tw/history/state.js","../../../packages/core/dist/tw/history/service.js","../../../packages/core/dist/tw/util/platform.js","../../../packages/core/dist/tw/key-binding/service.js","../../../packages/core/dist/tw/tree/utility.js","../../../packages/core/dist/tw/layout/node-breaker.js","../../../packages/core/dist/tw/model/parser.js","../../../packages/core/dist/tw/layout/node-joiner.js","../../../packages/core/dist/tw/layout/flower.js","../../../packages/core/dist/tw/layout/tree-builder.js","../../../packages/core/dist/tw/layout/state.js","../../../packages/core/dist/tw/layout/service.js","../../../packages/core/dist/tw/state/utility.js","../../../packages/core/dist/tw/state/tokenizer.js","../../../packages/core/dist/tw/model/state.js","../../../packages/core/dist/tw/model/service.js","../../../packages/core/dist/tw/render/tree-builder.js","../../../packages/core/dist/tw/render/state.js","../../../packages/core/dist/tw/render/service.js","../../../packages/core/dist/tw/service/registry.js","../../../packages/core/dist/tw/state/state.js","../../../packages/core/dist/tw/state/service.js","../../../packages/core/dist/tw/view/cursor.js","../../../packages/core/dist/tw/view/clipboard-observer.js","../../../packages/core/dist/tw/view/focus-observer.js","../../../packages/core/dist/tw/view/keyboard-observer.js","../../../packages/core/dist/tw/view/pointer-observer.js","../../../packages/core/dist/tw/view/dom-controller.js","../../../packages/core/dist/tw/view/tree-builder.js","../../../packages/core/dist/tw/view/state.js","../../../packages/core/dist/tw/view/service.js","../../../packages/core/dist/tw/taleweaver.js","Editor/ToolBar.tsx","Editor/Editor.tsx","Editor/index.ts","samples/littleRedRidingHood.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["createHiddenIframe","iframe","document","createElement","scrolling","src","style","width","height","border","position","zIndex","opacity","overflow","left","top","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","this","n","v","op","TypeError","call","pop","length","push","window","appendChild","copy","serviceRegistry","undefined","cursorService","renderService","modelService","_a","anchor","head","html","iframeDocument","_b","getService","hasCursor","getCursorState","toDOM","convertOffsetToModelOffset","Math","min","max","outerHTML","contentDocument","innerHTML","execCommand","paste","Node","children","prototype","setParent","parent","getParent","isRoot","Error","insertChild","child","isLeaf","unshift","clearCache","insertChildBefore","beforeChild","beforeChildIndex","indexOf","splice","appendChildAfter","afterChild","afterChildIndex","removeChild","childIndex","getChildren","getFirstChild","getLastChild","getPreviousSibling","siblings","ownIndex","getNextSibling","getPreviousSiblingAllowCrossParent","previousSibling","parentNode","parentPreviousSibling","getNextSiblingAllowCrossParent","nextSibling","parentNextSibling","findDescendant","id","getId","nn","clearOwnCache","parent_1","onDidUpdate","updatedNode","slice","updatedChildren","m","updatedChild","i","o","oo","Position","node","depth","offset","getNode","getDepth","getOffset","setChild","getChild","getRoot","getLeaf","__extends","_extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","create","LayoutPosition","_super","arguments","LayoutNode","componentId","_this","getComponentId","getInnerWidth","getWidth","getHorizontalPaddng","getInnerHeight","getHeight","getVerticalPaddng","getPaddingTop","getPaddingBottom","getPaddingLeft","getPaddingRight","atomic_node_extends","atomic_node_AtomicLayoutNode","AtomicLayoutNode","getNodeClass","resolvePosition","getSize","block_node_extends","block_node_BlockLayoutNode","BlockLayoutNode","size","reduce","cumulatedOffset","_i","childSize","childPosition","convertCoordinatesToOffset","x","cumulatedHeight","childHeight","convertCoordinateToOffset","resolveRects","from","to","rects","forEach","maxChildOffset","childFrom","childTo","childRect","paddingTop","paddingBottom","right","bottom","paddingLeft","paddingRight","doc_node_extends","doc_node_DocLayoutNode","DocLayoutNode","resolvePageRects","inline_node_extends","inline_node_InlineLayoutNode","InlineLayoutNode","getTailTrimmedWidth","tailTrimmedWidth","lastChild","cumulatedWidth","childWidth","generateId","random","toString","substring","line_node_extends","line_node_LineLayoutNode","LineLayoutNode","flowed","getContentWidth","contentWidth","isFlowed","markAsFlowed","rect","previousRect","mergeLayoutRects","page_node_extends","page_node_PageLayoutNode","PageLayoutNode","getContentHeight","contentHeight","contentX","contentY","identifyLayoutNodeType","node_extends","RenderPosition","RenderNode","getStyle","render_atomic_node_extends","atomic_node_AtomicRenderNode","AtomicRenderNode","convertModelOffsetToOffset","modelOffset","render_block_node_extends","block_node_BlockRenderNode","BlockRenderNode","getModelSize","modelSize","childNode","cumulatedSize","cumulatedModelSize","childModelSize","render_doc_node_extends","doc_node_DocRenderNode","DocRenderNode","render_inline_node_extends","inline_node_InlineRenderNode","InlineRenderNode","identifyRenderNodeType","InsertOperation","at","tokens","getOffsetAdjustment","delta","adjustOffset","adjustments","adjustment","getAt","getTokens","DeleteOperation","getFrom","getTo","AppliedInsertOperation","AppliedDeleteOperation","Transformation","operations","cursorAnchor","cursorHead","cursorLockLeft","addOperation","operation","getOperations","setCursor","setCursorHead","setCursorLockLeft","getCursorAnchor","getCursorHead","getCursorLockLeft","AppliedTransformation","originalTransformation","originalCursorHead","originalCursorAnchor","originalCursorLockLeft","beforeFrom","beforeTo","afterFrom","afterTo","getOriginalTransformation","getOriginalCursorHead","getOriginalCursorAnchor","getOriginalCursorLockLeft","getTransformedRange","cursor_awaiter","cursor_generator","cursor_move","tn","applyTransformation","cursor_moveLeft","cursorState","cursor_moveRight","docSize","getDocSize","cursor_moveUp","layoutService","linePosition","lineNode","previousLineNode","leftLock","targetLineSelectableOffset","cursor_moveDown","nextLineNode","cursor_moveLeftByWord","atomicPosition","atomicNode","previousAtomicNode","cursor_moveRightByWord","nextAtomicNode","newOffset","isBreakable","cursor_moveToLineStart","lineBoxLevelPosition","cursor_moveToLineEnd","lineLayoutPosition","lineLayoutNode","cursor_moveToDocStart","cursor_moveToDocEnd","cursor_moveHead","cursor_moveHeadLeft","cursor_moveHeadRight","cursor_moveHeadUp","cursor_moveHeadDown","cursor_moveHeadLeftByWord","cursor_moveHeadRightByWord","newCursorPosition","cursor_moveHeadToLineStart","cursor_moveHeadToLineEnd","cursor_moveHeadToDocStart","cursor_moveHeadToDocEnd","cursor_selectAll","cursor_selectWord","cursor_selectBlock","blockPosition","blockNode","searchBlockRenderPositionBottomUp","history_awaiter","history_generator","undo","redo","CLOSE_TOKEN","model_node_extends","ModelPosition","ModelNode","attributes","getAttributes","model_block_node_extends","block_node_BlockModelNode","BlockModelNode","toTokens","partId","getPartId","model_doc_node_extends","doc_node_DocModelNode","DocModelNode","model_inline_node_extends","inline_node_InlineModelNode","InlineModelNode","content","setContent","getContent","split","identifyModelNodeType","state_awaiter","state_generator","moveCursorByModelOffset","state_insert","collapsedAt","modelCollapsedAt","state_deleteBackward","deleteFrom","deleteTo","modelDeleteFrom","modelDeleteTo","state_deleteForward","state_splitLine","nodes","reverse","view_awaiter","view_generator","view_focus","requestFocus","view_blur","requestBlur","EventEmitter","listeners","on","listener","emit","event","CommandRegistry","commandsMap","Map","registerCommand","commandId","commandHandler","set","getCommandHandler","get","service_awaiter","service_generator","service_CommandService","CommandService","configService","willExecuteCommandEventEmitter","didExecuteCommandEventEmitter","registry","entries","getConfig","commands","onWillExecuteCommand","onDidExecuteCommand","executeCommand","args","concat","view_node_extends","ViewNode","layoutNode","insertChildDOM","getDOMContainer","insertChildDOMBefore","appendChildDOM","appendChildDOMAfter","removeChildDOM","getLayoutNode","onLayoutDidUpdate","childDOM","domContentContainer","getDOMContentContainer","insertBefore","firstChild","beforeChildDOM","afterChildDOM","view_doc_node_extends","DocViewNode","attached","attach","domContainer","isAttached","Component","doc_extends","doc_DocModelNode","$element","$childElement","clone","doc_DocRenderNode","doc_DocLayoutNode","doc_DocViewNode","textAlign","cursor","userSelect","DocComponent","buildModelNode","buildRenderNode","modelNode","buildLayoutNode","renderNode","buildViewNode","view_block_node_extends","BlockViewNode","view_inline_node_extends","InlineViewNode","paragraph_extends","paragraph_ParagraphModelNode","ParagraphModelNode","ParagraphRenderNode","lineBreakNode","buildLineBreakNode","inlineNode","ParagraphLineBreakRenderNode","ParagraphLineBreakAtomicRenderNode","ParagraphLayoutNode","ParagraphLineBreakLayoutNode","ParagraphLineBreakAtomicLayoutNode","takeMeasurement","breakAtWidth","ParagraphViewNode","lineHeight","ParagraphLineBreakViewNode","ParagraphComponent","BREAKABLE_CHARS","text_extends","__assign","assign","s","text_TextModelNode","TextModelNode","$component","innerText","DEFAULT_TEXT_STYLE","weight","font","letterSpacing","underline","italic","strikethrough","color","TextRenderNode","WordRenderNode","word","getWord","text","breakable","oldWord","newWord","TextLayoutNode","WordLayoutNode","textMeasurer","measurement","measure","floor","substr","splitAt","newNode","lastWidth","width_1","fromTextMeasurement","toTextMeasurement","TextViewNode","display","whiteSpace","domContent","map","join","fontFamily","fontSize","fontWeight","textDecoration","fontStyle","text_TextComponent","TextComponent","style_1","node_1","words","char","includes","breakTextToWords","wordIndex","wordRenderNode","TextMeasurer","$canvas","textStyle","ctx","getContext","fixFont","measureText","view_line_node_extends","LineViewNode","line_extends","line_LineLayoutNode","line_LineViewNode","LineComponent","buildLineLayoutNode","view_page_node_extends","PageViewNode","page_extends","page_PageLayoutNode","page_PageViewNode","marginLeft","marginRight","PageComponent","buildPageLayoutNode","pageConfig","page","ComponentRegistry","componentsMap","registerComponent","component","getComponent","service_ComponentService","ComponentService","pageComponent","lineComponent","components","getPageComponent","getLineComponent","ConfigService","config","externalConfig","applyExternalConfig","coreConfig","cursor_Cursor","Cursor","didUpdateCursorEventEmitter","onDidUpdateCursor","getAnchor","getHead","getLeftLock","service_CursorService","CursorService","disable","setCursorState","assertCursor","HistoryAction","appliedTransformations","beganAt","Date","now","endedAt","getBeganAt","getEndedAt","recordAppliedTransformation","appliedTransformation","getAppliedTransformations","state_HistoryState","HistoryState","stateService","actions","handleDidApplyTransformation","transformation","some","appliedTn","recordAppliedTransformationToNewAction","currentItem","maxCollapseDuration","collapseThreshold","recordAppliedTransformationToLastAction","history","onDidApplyTransformation","action","consumeNextUndoableAction","unapplyTransformations","consumeNextRedoableAction","transformations","applyTransformations","service_HistoryService","HistoryService","state","detectPlatform","navigator","platform","startsWith","service_KeyBindingService","KeyBindingService","commandService","viewService","keyBindings","handleDidPressKey","keyBinding","key","preventDefault","originalKeyboardEvent","command","keyBindingsConfig","bindKeys","common","macos","windows","linux","onDidPressKey","binding","getNodeLineage","lineage","currentNode","findCommonLineage","node1","node2","nodeLineage1","nodeLineage2","index","ParserState","node_breaker_NodeBreaker","NodeBreaker","break","breakPageNode","breakLineNode","blockNodes","newPageNode","blockNodeToMove","lastBlockNode","newBlockNode","breakBlockNode","lineNodes","lineNodeToMove","inlineNodes","newLineNode","inlineNodeToMove","lastInlineNode","newInlineNode","breakInlineNode","lineWidth","atomicNodes","atomicNodeToMove","newAtomicNode","breakAtomicNode","node_joiner_NodeJoiner","NodeJoiner","thisNode","thatNode","joinPageNodes","joinLineNodes","thisLastChild","thatFirstChild","joinBlockNodes","thatParent","joinInlineNodes","flower_NodeQueue","NodeQueue","pageNodes","queue","queueDocNode","queuePageNode","queueBlockNode","queueLineNode","queueInlineNode","queueAtomicNode","popLineNode","shift","popPageNode","flower_LayoutFlower","LayoutFlower","nodeQueue","nodeJoiner","nodeBreaker","ran","flow","flushLineNodeQueue","flushPageNodeQueue","flowLineNode","flowPageNode","joinNextPageNode","pageNode","recordNodeAsUpdated","joinNextLineNode","nextNode","nextBlockChild","nextInlineChild","nextAtomicChild","tree_builder_LayoutTreeBuilder","LayoutTreeBuilder","componentService","buildTree","rootRenderNode","_buildTree","rootLayoutNode","buildNode","childLayoutNodes","childRenderNode","pageLayoutNode_1","childLayoutNode","lineLayoutNode_1","state_LayoutState","LayoutState","didUpdateLayoutStateEventEmitter","handleDidUpdateRenderStateEvent","docNode","deduplicateNode","flowedNode","docRenderNode","getDocNode","treeBuilder","onDidUpdateRenderState","onDidUpdateLayoutState","deduplicateInlineNode","deduplicateBlockNode","joiner","nextPageNode","service_LayoutService","LayoutService","identifyTokenType","token","TokenizerState","Stack","objects","object","peek","getDoc","parser_TokenParser","TokenParser","parserState","NewNode","stack","contentBuffer","parse","_parse","rootNode","processToken","error","message","appendToContent","closeNode","Content","parentStackObject","stackObject","JSON","stringify","state_ModelState","ModelState","didUpdateModelStateEventEmitter","handleDidUpdateStateEvent","wrappedDepth","findWrappedDepth","findNodeContainingRange","updatedTokens","findNodeTokenRange","parser","onDidUpdateState","onDidUpdateModelState","findUpdatedNode","beforeFromPosition","beforeToPosition","beforeNode","afterTokenRange","findParentNodeOfTokenRange","afterNodeID","findNodeInLineageById","maxDepth","fromPosition","toPosition","hintFrom","hintTo","depthPeak","opensNeeded","closesNeeded","tokensLength","nodeId","findNodeOpenTokenPositionAndDepth","findNodeCloseTokenPosition","hintPosition","currentDepth","service_ModelService","ModelService","fromDOM","domNodes","RenderTreeBuilder","rootModelNode","childModelNode","state_RenderState","RenderState","didUpdateRenderStateEventEmitter","handleDidUpdateModelStateEvent","docModelNode","service_RenderService","RenderService","getStylesBetween","styles","extractStyle","componentStyles","ServiceRegistry","services","registerService","service","__rest","getOwnPropertySymbols","tokenizer_Tokenizer","Tokenizer","tokenizerState","NewToken","tagBuffer","attributesBuffer","tokenize","markup","_tokenize","test","newTag","appendChar","NewTag","appendCharToTag","closeTag","Tag","newAttributes","TagAttributes","newAttributesString","endTag","appendCharToAttributes","TagAttributesString","endAttributesString","escapeNextAttributesStringChar","TagAttributesStringEscape","CloseTag","endCloseTag","state_State","State","initialMarkup","didApplyTransformationEventEmitter","didUpdateStateEventEmitter","tokenizer","assertInitialized","transformedRange","findTransformedRange","unapplyTransformation","offsetAdjustments","unadjustedOperation","appliedOperation","deletedTokens","service_StateService","StateService","CursorView","instanceId","blinkInterval","blinkState","domSelections","handleDidUpdateCursorState","updateView","handleDidUpdateViewState","handleDidFocus","handleDidBlur","domCaret","className","setAttribute","pointerEvents","onDidUpdateViewState","onDidFocus","onDidBlur","clearDOMSelections","headPageOffset","headLeft","headTop","headHeight","boundCursorPosition","pageRects","pageViewNodes","focused","isFocused","firstPageOffset","firstLayoutRectOffset","lastPageOffset","lastLayoutRectOffset","pageOffset","pageDOMContentContainer","rectOffset","domSelection","buildDOMSelection","background","parentElement","blinkStop","blinkStart","setInterval","updateDOMBlink","visibility","clearInterval","layoutRect","clipboard_observer_ClipboardObserver","ClipboardObserver","$contentEditable","didCopyEventEmitter","didPasteEventEmitter","handleCopy","handlePaste","data","clipboardData","addEventListener","onDidCopy","onDidPaste","focus_observer_FocusObserver","FocusObserver","didFocusEventEmitter","didBlurEventEmitter","handleFocus","handleBlur","keyboard_observer_KeyboardObserver","KeyboardObserver","composing","didInsertEventEmitter","didPressKeyEventEmitter","compositionDidStartEventEmitter","compositionDidEndEventEmitter","keyInterpreter","keyboard_observer_KeyInterpreter","handleDidMutate","setTimeout","handleKeyDown","interpretFromKeyboardEvent","handleCompositionStart","handleCompositionEnd","mutationObserver","MutationObserver","observe","subtree","characterData","childList","onDidInsert","onCompositionDidStart","onCompositionDidEnd","childNodes","parseNode","nodeValue","KeyInterpreter","toLowerCase","metaKey","altKey","shiftKey","ctrlKey","pointer_observer_PointerObserver","PointerObserver","clickThreshold","consecutiveClickThreshold","lastPointerDown","lastClick","consecutiveClickCount","pointerDidDownEventEmitter","pointerDidMoveEventEmitter","pointerDidUpEventEmitter","pointerDidClickEventEmitter","handleMouseDown","resolveCoordinates","clientX","clientY","timestamp","consecutive","handleMouseMove","pointerDown","handleMouseUp","clicked","consecutiveCount","onPointerDidDown","onPointerDidMove","onPointerDidUp","onPointerDidClick","pageViewNodes_1","pageViewNode","pageLayoutNode","pageBoundingClientRect","getBoundingClientRect","pageX","pageY","dom_controller_DOMController","DOMController","mouseDown","handleDidInsert","handleCompositionDidStart","handleCompositionDidEnd","handlePointerDidDown","handlePointerDidMove","handlePointerDidClick","getData","$container","$body","querySelector","modelNodes","console","log","createContentEditable","keyboardObserver","pointerObserver","focusObserver","clipboardObserver","focus","blur","isComposing","contentEditable","ViewTreeBuilder","rootViewNode","viewNode","childViewNode","applyMetadataToDOMContainer","state_ViewState","ViewState","didUpdateViewStateEventEmitter","handleDidUpdateLayoutStateEvent","docLayoutNode","service_ViewService","ViewService","domController","taleweaver_Taleweaver","Taleweaver","buildBaseConfig","historyService","keyBindingService","registerServices","getServiceRegistry","tw.clipboard.copy","tw.clipboard.paste","tw.cursor.move","tw.cursor.moveUp","tw.cursor.moveDown","tw.cursor.moveLeft","tw.cursor.moveRight","tw.cursor.moveLeftByWord","tw.cursor.moveRightByWord","tw.cursor.moveToLineStart","tw.cursor.moveToLineEnd","tw.cursor.moveToDocStart","tw.cursor.moveToDocEnd","tw.cursor.moveHead","tw.cursor.moveHeadUp","tw.cursor.moveHeadDown","tw.cursor.moveHeadLeft","tw.cursor.moveHeadRight","tw.cursor.moveHeadLeftByWord","tw.cursor.moveHeadRightByWord","tw.cursor.moveHeadToLineStart","tw.cursor.moveHeadToLineEnd","tw.cursor.moveHeadToDocStart","tw.cursor.moveHeadToDocEnd","tw.cursor.selectAll","tw.cursor.selectWord","tw.cursor.selectBlock","tw.history.undo","tw.history.redo","tw.state.insert","tw.state.deleteBackward","tw.state.deleteForward","tw.state.splitLine","tw.view.focus","tw.view.blur","doc","paragraph","up","down","shift+left","shift+right","shift+up","shift+down","backspace","delete","enter","alt+left","alt+right","shift+alt+left","shift+alt+right","cmd+left","cmd+right","cmd+up","cmd+down","shift+cmd+left","shift+cmd+right","shift+cmd+up","shift+cmd+down","cmd+a","cmd+z","shift+cmd+z","ctrl+left","ctrl+right","ctrl+shift+left","ctrl+shift+right","home","end","ctrl+home","ctrl+end","shift+home","shift+end","ctrl+shift+home","ctrl+shift+end","ctrl+a","ctrl+z","ctrl+shift+z","Wrapper","styled","div","_templateObject","Container","_templateObject2","Group","_templateObject3","Item","button","_templateObject4","_ref","disabled","_ref2","active","SelectItem","select","_templateObject5","_ref3","_ref4","ItemColorLine","_templateObject6","_ref5","ToolBar","_ref6","taleweaver","_useState","useState","_useState2","slicedToArray","textStyles","setTextStyles","updateTextStyle","useMemo","getTextStyles","useEffect","Set","bold","react_default","a","onChange","onClick","Editor_templateObject","EditorWrapper","Editor_templateObject2","domRef","useRef","setTaleweaver","mergedConfig","current","Editor_Wrapper","ref","littleRedRidingHood","line","trim","replace","App_templateObject","Hero","App_templateObject2","BrandWrapper","App_templateObject3","Brand","span","App_templateObject4","Tagline","h1","App_templateObject5","SupportingTagline","h2","App_templateObject6","Links","_templateObject7","Link","_templateObject8","DemoHintWrapper","_templateObject9","DemoHint","_templateObject10","App","App_Wrapper","href","src_Editor","sampleMarkup","React","Boolean","location","hostname","match","ReactDOM","render","src_App_0","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.3ef8190b.chunk.js","sourcesContent":["export function isDOMAvailable() {\n  return typeof window !== 'undefined';\n}\nexport function createHiddenIframe() {\n  var iframe = document.createElement('iframe');\n  iframe.scrolling = 'no';\n  iframe.src = 'about:blank';\n  iframe.style.width = '0';\n  iframe.style.height = '0';\n  iframe.style.border = 'none';\n  iframe.style.position = 'fixed';\n  iframe.style.zIndex = '-1';\n  iframe.style.opacity = '0';\n  iframe.style.overflow = 'hidden';\n  iframe.style.left = '-1000000px';\n  iframe.style.top = '-1000000px';\n  return iframe;\n}","var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar _this = this;\n\nimport { createHiddenIframe, isDOMAvailable } from '../../util/dom';\nvar iframe;\n\nif (isDOMAvailable()) {\n  iframe = createHiddenIframe();\n  document.body.appendChild(iframe);\n}\n\nexport var copy = function copy(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, renderService, modelService, _a, anchor, head, html, iframeDocument;\n\n    return __generator(this, function (_b) {\n      if (!iframe) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      cursorService = serviceRegistry.getService('cursor');\n      renderService = serviceRegistry.getService('render');\n      modelService = serviceRegistry.getService('model');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      _a = cursorService.getCursorState(), anchor = _a.anchor, head = _a.head;\n\n      if (anchor === head) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      html = modelService.toDOM(renderService.convertOffsetToModelOffset(Math.min(anchor, head)), renderService.convertOffsetToModelOffset(Math.max(anchor, head))).outerHTML;\n      iframeDocument = iframe.contentDocument;\n\n      if (!iframeDocument) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      iframeDocument.body.innerHTML = html;\n      iframeDocument.execCommand('selectAll');\n      iframeDocument.execCommand('copy');\n      iframeDocument.body.innerHTML = '';\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var paste = function paste(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};","var Node =\n/** @class */\nfunction () {\n  function Node() {\n    this.children = [];\n  }\n\n  Node.prototype.setParent = function (parent) {\n    this.parent = parent;\n  };\n\n  Node.prototype.getParent = function () {\n    if (this.isRoot()) {\n      throw new Error('Getting parent on root node is not allowed.');\n    }\n\n    return this.parent;\n  };\n\n  Node.prototype.insertChild = function (child) {\n    if (this.isLeaf()) {\n      throw new Error('Appending child to leaf node is not allowed.');\n    }\n\n    this.children.unshift(child);\n    child.setParent(this);\n    this.clearCache();\n  };\n\n  Node.prototype.insertChildBefore = function (child, beforeChild) {\n    if (this.isLeaf()) {\n      throw new Error('Inserting child to leaf node is not allowed.');\n    }\n\n    var beforeChildIndex = this.children.indexOf(beforeChild);\n\n    if (beforeChildIndex < 0) {\n      throw new Error('Error inserting, child to insert before is not found.');\n    }\n\n    this.children.splice(beforeChildIndex, 0, child);\n    child.setParent(this);\n    this.clearCache();\n  };\n\n  Node.prototype.appendChild = function (child) {\n    if (this.isLeaf()) {\n      throw new Error('Appending child to leaf node is not allowed.');\n    }\n\n    this.children.push(child);\n    child.setParent(this);\n    this.clearCache();\n  };\n\n  Node.prototype.appendChildAfter = function (child, afterChild) {\n    if (this.isLeaf()) {\n      throw new Error('Inserting child to leaf node is not allowed.');\n    }\n\n    var afterChildIndex = this.children.indexOf(afterChild);\n\n    if (afterChildIndex < 0) {\n      throw new Error('Error inserting, child to insert after is not found.');\n    }\n\n    this.children.splice(afterChildIndex + 1, 0, child);\n    child.setParent(this);\n    this.clearCache();\n  };\n\n  Node.prototype.removeChild = function (child) {\n    if (this.isLeaf()) {\n      throw new Error('Removing child from leaf node is not allowed.');\n    }\n\n    var childIndex = this.children.indexOf(child);\n\n    if (childIndex < 0) {\n      throw new Error('Error removing child, child is not found.');\n    }\n\n    this.children.splice(childIndex, 1);\n    child.setParent(undefined);\n    this.clearCache();\n  };\n\n  Node.prototype.getChildren = function () {\n    return this.children;\n  };\n\n  Node.prototype.getFirstChild = function () {\n    var children = this.getChildren();\n\n    if (children.length === 0) {\n      return undefined;\n    }\n\n    return children[0];\n  };\n\n  Node.prototype.getLastChild = function () {\n    var children = this.getChildren();\n\n    if (children.length === 0) {\n      return undefined;\n    }\n\n    return children[children.length - 1];\n  };\n\n  Node.prototype.getPreviousSibling = function () {\n    if (this.isRoot()) {\n      throw new Error('Getting previous sibling on root node is not allowed.');\n    }\n\n    var siblings = this.getParent().getChildren();\n    var ownIndex = siblings.indexOf(this);\n\n    if (ownIndex < 0) {\n      throw new Error('Error getting previous sibling, node is not found in parent.');\n    }\n\n    if (ownIndex === 0) {\n      return undefined;\n    }\n\n    return siblings[ownIndex - 1];\n  };\n\n  Node.prototype.getNextSibling = function () {\n    if (this.isRoot()) {\n      throw new Error('Getting next sibling on root node is not allowed.');\n    }\n\n    var siblings = this.getParent().getChildren();\n    var ownIndex = siblings.indexOf(this);\n\n    if (ownIndex < 0) {\n      throw new Error('Error getting next sibling, node is not found in parent.');\n    }\n\n    if (ownIndex === siblings.length - 1) {\n      return undefined;\n    }\n\n    return siblings[ownIndex + 1];\n  };\n\n  Node.prototype.getPreviousSiblingAllowCrossParent = function () {\n    if (this.isRoot()) {\n      throw new Error('Getting previous sibling on root node is not allowed.');\n    }\n\n    var previousSibling = this.getPreviousSibling();\n\n    if (previousSibling) {\n      return previousSibling;\n    }\n\n    var parentNode = this.getParent();\n\n    if (!parentNode || parentNode.isRoot()) {\n      return undefined;\n    }\n\n    var parentPreviousSibling = parentNode.getPreviousSiblingAllowCrossParent();\n\n    if (!parentPreviousSibling) {\n      return undefined;\n    }\n\n    return parentPreviousSibling.getLastChild();\n  };\n\n  Node.prototype.getNextSiblingAllowCrossParent = function () {\n    if (this.isRoot()) {\n      throw new Error('Getting next sibling on root node is not allowed.');\n    }\n\n    var nextSibling = this.getNextSibling();\n\n    if (nextSibling) {\n      return nextSibling;\n    }\n\n    var parentNode = this.getParent();\n\n    if (!parentNode || parentNode.isRoot()) {\n      return undefined;\n    }\n\n    var parentNextSibling = parentNode.getNextSiblingAllowCrossParent();\n\n    if (!parentNextSibling) {\n      return undefined;\n    }\n\n    return parentNextSibling.getFirstChild();\n  };\n\n  Node.prototype.findDescendant = function (id) {\n    if (this.getId() === id) {\n      return this;\n    }\n\n    if (this.isLeaf()) {\n      return undefined;\n    }\n\n    for (var n = 0, nn = this.children.length; n < nn; n++) {\n      var child = this.children[n];\n      var result = child.findDescendant(id);\n\n      if (result) {\n        return result;\n      }\n    }\n\n    return undefined;\n  };\n\n  Node.prototype.clearCache = function () {\n    this.clearOwnCache();\n\n    if (!this.isRoot()) {\n      var parent_1 = this.getParent();\n\n      if (parent_1) {\n        parent_1.clearCache();\n      }\n    }\n  };\n\n  Node.prototype.onDidUpdate = function (updatedNode) {\n    if (!this.isLeaf()) {\n      var children = this.children.slice();\n      var updatedChildren = updatedNode.children;\n      var m = 0;\n\n      for (var n = 0, nn = updatedChildren.length; n < nn; n++) {\n        var updatedChild = updatedChildren[n];\n        var i = -1;\n\n        for (var o = m, oo = children.length; o < oo; o++) {\n          if (children[o].getId() === updatedChild.getId()) {\n            i = o;\n            break;\n          }\n        }\n\n        if (i >= 0) {\n          while (m < i) {\n            this.removeChild(children[m]);\n            m++;\n          }\n\n          children[m].onDidUpdate(updatedChild);\n          m++;\n        } else {\n          if (m < children.length) {\n            this.insertChildBefore(updatedChild, children[m]);\n          } else {\n            this.appendChild(updatedChild);\n          }\n        }\n      }\n\n      while (m < children.length) {\n        this.removeChild(children[m]);\n        m++;\n      }\n    }\n  };\n\n  Node.prototype.clearOwnCache = function () {};\n\n  return Node;\n}();\n\nexport { Node };","var Position =\n/** @class */\nfunction () {\n  function Position(node, depth, offset) {\n    this.parent = null;\n    this.child = null;\n    this.node = node;\n    this.depth = depth;\n    this.offset = offset;\n  }\n\n  Position.prototype.getNode = function () {\n    return this.node;\n  };\n\n  Position.prototype.getDepth = function () {\n    return this.depth;\n  };\n\n  Position.prototype.getOffset = function () {\n    return this.offset;\n  };\n\n  Position.prototype.setParent = function (parent) {\n    this.parent = parent;\n  };\n\n  Position.prototype.getParent = function () {\n    return this.parent;\n  };\n\n  Position.prototype.setChild = function (child) {\n    this.child = child;\n  };\n\n  Position.prototype.getChild = function () {\n    return this.child;\n  };\n\n  Position.prototype.getRoot = function () {\n    if (this.parent) {\n      return this.parent.getRoot();\n    }\n\n    return this;\n  };\n\n  Position.prototype.getLeaf = function () {\n    if (this.child) {\n      return this.child.getLeaf();\n    }\n\n    return this;\n  };\n\n  return Position;\n}();\n\nexport { Position };","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { Node } from '../tree/node';\nimport { Position } from '../tree/position';\n\nvar LayoutPosition =\n/** @class */\nfunction (_super) {\n  __extends(LayoutPosition, _super);\n\n  function LayoutPosition() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return LayoutPosition;\n}(Position);\n\nexport { LayoutPosition };\n\nvar LayoutNode =\n/** @class */\nfunction (_super) {\n  __extends(LayoutNode, _super);\n\n  function LayoutNode(componentId, id) {\n    var _this = _super.call(this) || this;\n\n    _this.componentId = componentId;\n    _this.id = id;\n    return _this;\n  }\n\n  LayoutNode.prototype.getComponentId = function () {\n    return this.componentId;\n  };\n\n  LayoutNode.prototype.getId = function () {\n    return this.id;\n  };\n\n  LayoutNode.prototype.getInnerWidth = function () {\n    return this.getWidth() - this.getHorizontalPaddng();\n  };\n\n  LayoutNode.prototype.getInnerHeight = function () {\n    return this.getHeight() - this.getVerticalPaddng();\n  };\n\n  LayoutNode.prototype.getVerticalPaddng = function () {\n    return this.getPaddingTop() + this.getPaddingBottom();\n  };\n\n  LayoutNode.prototype.getHorizontalPaddng = function () {\n    return this.getPaddingLeft() + this.getPaddingRight();\n  };\n\n  return LayoutNode;\n}(Node);\n\nexport { LayoutNode };","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { LayoutNode, LayoutPosition } from './node';\n\nvar AtomicLayoutNode =\n/** @class */\nfunction (_super) {\n  __extends(AtomicLayoutNode, _super);\n\n  function AtomicLayoutNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  AtomicLayoutNode.prototype.getNodeClass = function () {\n    return 'atomic';\n  };\n\n  AtomicLayoutNode.prototype.isRoot = function () {\n    return false;\n  };\n\n  AtomicLayoutNode.prototype.isLeaf = function () {\n    return true;\n  };\n\n  AtomicLayoutNode.prototype.resolvePosition = function (offset, depth) {\n    if (offset >= this.getSize()) {\n      throw new Error(\"Offset \" + offset + \" is out of range.\");\n    }\n\n    var position = new LayoutPosition(this, depth, offset);\n    return position;\n  };\n\n  AtomicLayoutNode.prototype.clearOwnCache = function () {};\n\n  return AtomicLayoutNode;\n}(LayoutNode);\n\nexport { AtomicLayoutNode };","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { LayoutNode, LayoutPosition } from './node';\n\nvar BlockLayoutNode =\n/** @class */\nfunction (_super) {\n  __extends(BlockLayoutNode, _super);\n\n  function BlockLayoutNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  BlockLayoutNode.prototype.getNodeClass = function () {\n    return 'block';\n  };\n\n  BlockLayoutNode.prototype.isRoot = function () {\n    return false;\n  };\n\n  BlockLayoutNode.prototype.isLeaf = function () {\n    return false;\n  };\n\n  BlockLayoutNode.prototype.getSize = function () {\n    if (this.size === undefined) {\n      this.size = this.getChildren().reduce(function (size, child) {\n        return size + child.getSize();\n      }, 0);\n    }\n\n    return this.size;\n  };\n\n  BlockLayoutNode.prototype.getWidth = function () {\n    var parent = this.getParent();\n\n    if (!parent) {\n      return 0;\n    }\n\n    return parent.getInnerWidth();\n  };\n\n  BlockLayoutNode.prototype.getHeight = function () {\n    if (this.height === undefined) {\n      this.height = this.getChildren().reduce(function (height, child) {\n        return height + child.getHeight();\n      }, this.getVerticalPaddng());\n    }\n\n    return this.height;\n  };\n\n  BlockLayoutNode.prototype.resolvePosition = function (offset, depth) {\n    var cumulatedOffset = 0;\n\n    for (var _i = 0, _a = this.getChildren(); _i < _a.length; _i++) {\n      var child = _a[_i];\n      var childSize = child.getSize();\n\n      if (cumulatedOffset + childSize > offset) {\n        var position = new LayoutPosition(this, depth, offset);\n        var childPosition = child.resolvePosition(offset - cumulatedOffset, depth + 1);\n        position.setChild(childPosition);\n        childPosition.setParent(position);\n        return position;\n      }\n\n      cumulatedOffset += childSize;\n    }\n\n    throw new Error(\"Offset \" + offset + \" is out of range.\");\n  };\n\n  BlockLayoutNode.prototype.convertCoordinatesToOffset = function (x, y) {\n    var offset = 0;\n    var cumulatedHeight = 0;\n\n    for (var _i = 0, _a = this.getChildren(); _i < _a.length; _i++) {\n      var child = _a[_i];\n      var childHeight = child.getHeight();\n\n      if (y >= cumulatedHeight && y <= cumulatedHeight + childHeight) {\n        offset += child.convertCoordinateToOffset(x);\n        break;\n      }\n\n      offset += child.getSize();\n      cumulatedHeight += childHeight;\n    }\n\n    return offset;\n  };\n\n  BlockLayoutNode.prototype.resolveRects = function (from, to) {\n    var _this = this;\n\n    var rects = [];\n    var offset = 0;\n    var cumulatedHeight = 0;\n    this.getChildren().forEach(function (child, n) {\n      var childHeight = child.getHeight();\n      var minChildOffset = 0;\n      var maxChildOffset = child.getSize();\n      var childFrom = Math.max(from - offset, minChildOffset);\n      var childTo = Math.min(to - offset, maxChildOffset);\n\n      if (childFrom <= maxChildOffset && childTo >= minChildOffset) {\n        var childRects = child.resolveRects(childFrom, childTo);\n        childRects.forEach(function (childRect) {\n          var width = childRect.width;\n          var height = childRect.height;\n\n          var paddingTop = _this.getPaddingTop();\n\n          var paddingBottom = _this.getPaddingBottom();\n\n          var left = childRect.left;\n          var right = childRect.right;\n          var top = cumulatedHeight + paddingTop + childRect.top;\n          var bottom = _this.getHeight() - cumulatedHeight - childHeight - childRect.bottom - paddingBottom;\n          rects.push({\n            width: width,\n            height: height,\n            left: left,\n            right: right,\n            top: top,\n            bottom: bottom,\n            paddingTop: childRect.paddingTop,\n            paddingBottom: childRect.paddingBottom,\n            paddingLeft: childRect.paddingLeft,\n            paddingRight: childRect.paddingRight\n          });\n        });\n      }\n\n      offset += child.getSize();\n      cumulatedHeight += childHeight;\n    });\n    return rects;\n  };\n\n  BlockLayoutNode.prototype.clearOwnCache = function () {\n    this.size = undefined;\n    this.height = undefined;\n  };\n\n  return BlockLayoutNode;\n}(LayoutNode);\n\nexport { BlockLayoutNode };","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { LayoutNode, LayoutPosition } from './node';\n\nvar DocLayoutNode =\n/** @class */\nfunction (_super) {\n  __extends(DocLayoutNode, _super);\n\n  function DocLayoutNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DocLayoutNode.prototype.getNodeClass = function () {\n    return 'doc';\n  };\n\n  DocLayoutNode.prototype.isRoot = function () {\n    return true;\n  };\n\n  DocLayoutNode.prototype.isLeaf = function () {\n    return false;\n  };\n\n  DocLayoutNode.prototype.getSize = function () {\n    if (this.size === undefined) {\n      this.size = this.getChildren().reduce(function (size, child) {\n        return size + child.getSize();\n      }, 0);\n    }\n\n    return this.size;\n  };\n\n  DocLayoutNode.prototype.getWidth = function () {\n    return 0;\n  };\n\n  DocLayoutNode.prototype.getHeight = function () {\n    return 0;\n  };\n\n  DocLayoutNode.prototype.getPaddingTop = function () {\n    return 0;\n  };\n\n  DocLayoutNode.prototype.getPaddingBottom = function () {\n    return 0;\n  };\n\n  DocLayoutNode.prototype.getPaddingLeft = function () {\n    return 0;\n  };\n\n  DocLayoutNode.prototype.getPaddingRight = function () {\n    return 0;\n  };\n\n  DocLayoutNode.prototype.resolvePosition = function (offset) {\n    var cumulatedOffset = 0;\n\n    for (var _i = 0, _a = this.getChildren(); _i < _a.length; _i++) {\n      var child = _a[_i];\n      var childSize = child.getSize();\n\n      if (cumulatedOffset + childSize > offset) {\n        var position = new LayoutPosition(this, 0, offset);\n        var childPosition = child.resolvePosition(offset - cumulatedOffset, 1);\n        position.setChild(childPosition);\n        childPosition.setParent(position);\n        return position;\n      }\n\n      cumulatedOffset += childSize;\n    }\n\n    throw new Error(\"Offset \" + offset + \" is out of range.\");\n  };\n\n  DocLayoutNode.prototype.resolvePageRects = function (from, to) {\n    var rects = [];\n    this.getChildren().forEach(function () {\n      rects.push([]);\n    });\n    var offset = 0;\n    this.getChildren().forEach(function (child, n) {\n      var childSize = child.getSize();\n      var minChildOffset = 0;\n      var maxChildOffset = childSize;\n      var childFrom = Math.max(from - offset, minChildOffset);\n      var childTo = Math.min(to - offset, maxChildOffset);\n\n      if (childFrom <= maxChildOffset && childTo >= minChildOffset) {\n        var childRects = child.resolveRects(childFrom, childTo);\n        childRects.forEach(function (childRect) {\n          rects[n].push(childRect);\n        });\n      }\n\n      offset += childSize;\n    });\n    return rects;\n  };\n\n  DocLayoutNode.prototype.clearOwnCache = function () {\n    this.size = undefined;\n  };\n\n  return DocLayoutNode;\n}(LayoutNode);\n\nexport { DocLayoutNode };","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { LayoutNode, LayoutPosition } from './node';\n\nvar InlineLayoutNode =\n/** @class */\nfunction (_super) {\n  __extends(InlineLayoutNode, _super);\n\n  function InlineLayoutNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  InlineLayoutNode.prototype.getNodeClass = function () {\n    return 'inline';\n  };\n\n  InlineLayoutNode.prototype.isRoot = function () {\n    return false;\n  };\n\n  InlineLayoutNode.prototype.isLeaf = function () {\n    return false;\n  };\n\n  InlineLayoutNode.prototype.getSize = function () {\n    if (this.size === undefined) {\n      this.size = this.getChildren().reduce(function (size, child) {\n        return size + child.getSize();\n      }, 0);\n    }\n\n    return this.size;\n  };\n\n  InlineLayoutNode.prototype.getWidth = function () {\n    if (this.width === undefined) {\n      this.width = this.getChildren().reduce(function (width, child) {\n        return width + child.getWidth();\n      }, this.getHorizontalPaddng());\n    }\n\n    return this.width;\n  };\n\n  InlineLayoutNode.prototype.getHeight = function () {\n    if (this.height === undefined) {\n      this.height = this.getChildren().reduce(function (height, child) {\n        return Math.max(height, child.getHeight());\n      }, 0) + this.getVerticalPaddng();\n    }\n\n    return this.height;\n  };\n\n  InlineLayoutNode.prototype.getTailTrimmedWidth = function () {\n    if (this.tailTrimmedWidth === undefined) {\n      var lastChild = this.getLastChild();\n\n      if (lastChild) {\n        this.tailTrimmedWidth = this.getWidth() - lastChild.getWidth() + lastChild.getTailTrimmedWidth();\n      } else {\n        this.tailTrimmedWidth = 0;\n      }\n    }\n\n    return this.tailTrimmedWidth;\n  };\n\n  InlineLayoutNode.prototype.resolvePosition = function (offset, depth) {\n    var cumulatedOffset = 0;\n\n    for (var _i = 0, _a = this.getChildren(); _i < _a.length; _i++) {\n      var child = _a[_i];\n      var childSize = child.getSize();\n\n      if (cumulatedOffset + childSize > offset) {\n        var position = new LayoutPosition(this, depth, offset);\n        var childPosition = child.resolvePosition(offset - cumulatedOffset, depth + 1);\n        position.setChild(childPosition);\n        childPosition.setParent(position);\n        return position;\n      }\n\n      cumulatedOffset += childSize;\n    }\n\n    throw new Error(\"Offset \" + offset + \" is out of range.\");\n  };\n\n  InlineLayoutNode.prototype.convertCoordinateToOffset = function (x) {\n    var offset = 0;\n    var cumulatedWidth = 0;\n\n    for (var _i = 0, _a = this.getChildren(); _i < _a.length; _i++) {\n      var child = _a[_i];\n      var childWidth = child.getWidth();\n\n      if (x >= cumulatedWidth && x <= cumulatedWidth + childWidth) {\n        offset += child.convertCoordinateToOffset(x - cumulatedWidth);\n        break;\n      }\n\n      offset += child.getSize();\n      cumulatedWidth += childWidth;\n    }\n\n    return offset;\n  };\n\n  InlineLayoutNode.prototype.resolveRects = function (from, to) {\n    var _this = this;\n\n    var rects = [];\n    var offset = 0;\n    var cumulatedWidth = 0;\n    this.getChildren().forEach(function (child, n) {\n      var childWidth = child.getWidth();\n      var minChildOffset = 0;\n      var maxChildOffset = child.getSize();\n      var childFrom = Math.max(from - offset, minChildOffset);\n      var childTo = Math.min(to - offset, maxChildOffset);\n\n      if (childFrom <= maxChildOffset && childTo >= minChildOffset) {\n        var childRects = child.resolveRects(childFrom, childTo);\n        childRects.forEach(function (childRect) {\n          var width = childRect.width;\n          var height = childRect.height;\n\n          var paddingTop = _this.getPaddingTop();\n\n          var paddingBottom = _this.getPaddingBottom();\n\n          var left = cumulatedWidth + childRect.left;\n          var right = _this.getWidth() - cumulatedWidth - childRect.right;\n          var top = paddingTop + childRect.top;\n          var bottom = paddingBottom + childRect.bottom;\n          rects.push({\n            width: width,\n            height: height,\n            left: left,\n            right: right,\n            top: top,\n            bottom: bottom,\n            paddingTop: paddingTop,\n            paddingBottom: paddingBottom,\n            paddingLeft: 0,\n            paddingRight: 0\n          });\n        });\n      }\n\n      offset += child.getSize();\n      cumulatedWidth += childWidth;\n    });\n    return rects;\n  };\n\n  InlineLayoutNode.prototype.clearOwnCache = function () {\n    this.size = undefined;\n    this.width = undefined;\n    this.height = undefined;\n    this.tailTrimmedWidth = undefined;\n  };\n\n  return InlineLayoutNode;\n}(LayoutNode);\n\nexport { InlineLayoutNode };","export function generateId() {\n  return Math.random().toString(36).substring(2);\n}","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { generateId } from '../util/id';\nimport { LayoutNode, LayoutPosition } from './node';\nimport { mergeLayoutRects } from './rect';\n\nvar LineLayoutNode =\n/** @class */\nfunction (_super) {\n  __extends(LineLayoutNode, _super);\n\n  function LineLayoutNode(componentId) {\n    var _this = _super.call(this, componentId, generateId()) || this;\n\n    _this.flowed = false;\n    return _this;\n  }\n\n  LineLayoutNode.prototype.getNodeClass = function () {\n    return 'line';\n  };\n\n  LineLayoutNode.prototype.isRoot = function () {\n    return false;\n  };\n\n  LineLayoutNode.prototype.isLeaf = function () {\n    return false;\n  };\n\n  LineLayoutNode.prototype.getSize = function () {\n    if (this.size === undefined) {\n      this.size = this.getChildren().reduce(function (size, child) {\n        return size + child.getSize();\n      }, 0);\n    }\n\n    return this.size;\n  };\n\n  LineLayoutNode.prototype.getWidth = function () {\n    var parent = this.getParent();\n\n    if (!parent) {\n      return 0;\n    }\n\n    return parent.getInnerWidth();\n  };\n\n  LineLayoutNode.prototype.getHeight = function () {\n    if (this.height === undefined) {\n      this.height = this.getChildren().reduce(function (height, child) {\n        return Math.max(height, child.getHeight());\n      }, this.getVerticalPaddng());\n    }\n\n    return this.height;\n  };\n\n  LineLayoutNode.prototype.getContentWidth = function () {\n    if (this.contentWidth === undefined) {\n      this.contentWidth = this.getChildren().reduce(function (contentWidth, child) {\n        return contentWidth + child.getWidth();\n      }, 0);\n    }\n\n    return this.contentWidth;\n  };\n\n  LineLayoutNode.prototype.getPaddingTop = function () {\n    return 0;\n  };\n\n  LineLayoutNode.prototype.getPaddingBottom = function () {\n    return 0;\n  };\n\n  LineLayoutNode.prototype.getPaddingLeft = function () {\n    return 0;\n  };\n\n  LineLayoutNode.prototype.getPaddingRight = function () {\n    return 0;\n  };\n\n  LineLayoutNode.prototype.isFlowed = function () {\n    return this.flowed;\n  };\n\n  LineLayoutNode.prototype.markAsFlowed = function () {\n    this.flowed = true;\n  };\n\n  LineLayoutNode.prototype.resolvePosition = function (offset, depth) {\n    var cumulatedOffset = 0;\n\n    for (var _i = 0, _a = this.getChildren(); _i < _a.length; _i++) {\n      var child = _a[_i];\n      var childSize = child.getSize();\n\n      if (cumulatedOffset + childSize > offset) {\n        var position = new LayoutPosition(this, depth, offset);\n        var childPosition = child.resolvePosition(offset - cumulatedOffset, depth + 1);\n        position.setChild(childPosition);\n        childPosition.setParent(position);\n        return position;\n      }\n\n      cumulatedOffset += childSize;\n    }\n\n    throw new Error(\"Offset \" + offset + \" is out of range.\");\n  };\n\n  LineLayoutNode.prototype.convertCoordinateToOffset = function (x) {\n    var offset = 0;\n    var cumulatedWidth = 0;\n\n    for (var _i = 0, _a = this.getChildren(); _i < _a.length; _i++) {\n      var child = _a[_i];\n      var childWidth = child.getWidth();\n\n      if (x >= cumulatedWidth && x <= cumulatedWidth + childWidth) {\n        offset += child.convertCoordinateToOffset(x - cumulatedWidth);\n        break;\n      }\n\n      offset += child.getSize();\n      cumulatedWidth += childWidth;\n    }\n\n    if (offset === this.getSize()) {\n      return offset - 1;\n    }\n\n    return offset;\n  };\n\n  LineLayoutNode.prototype.resolveRects = function (from, to) {\n    var _this = this;\n\n    var rects = [];\n    var offset = 0;\n    var cumulatedWidth = 0;\n    this.getChildren().forEach(function (child, n) {\n      var childWidth = child.getWidth();\n      var minChildOffset = 0;\n      var maxChildOffset = child.getSize();\n      var childFrom = Math.max(from - offset, minChildOffset);\n      var childTo = Math.min(to - offset, maxChildOffset);\n\n      if (childFrom <= maxChildOffset && childTo >= minChildOffset && !(childFrom === childTo && childTo === maxChildOffset)) {\n        var childRects = child.resolveRects(childFrom, childTo);\n        childRects.forEach(function (childRect) {\n          var width = childRect.width;\n          var height = childRect.height;\n          var left = cumulatedWidth + childRect.left;\n          var right = _this.getWidth() - cumulatedWidth - childRect.right;\n          var top = childRect.top;\n          var bottom = childRect.bottom;\n          rects.push({\n            width: width,\n            height: height,\n            left: left,\n            right: right,\n            top: top,\n            bottom: bottom,\n            paddingTop: childRect.paddingTop,\n            paddingBottom: childRect.paddingBottom,\n            paddingLeft: 0,\n            paddingRight: 0\n          });\n        });\n      }\n\n      offset += child.getSize();\n      cumulatedWidth += childWidth;\n    });\n    mergeLayoutRects(rects);\n    return rects;\n  };\n\n  LineLayoutNode.prototype.clearOwnCache = function () {\n    this.size = undefined;\n    this.height = undefined;\n    this.contentWidth = undefined;\n    this.flowed = false;\n  };\n\n  return LineLayoutNode;\n}(LayoutNode);\n\nexport { LineLayoutNode };","export function mergeLayoutRects(rects) {\n  // Assume rects are sorted top to bottom, left to right\n  for (var n = 0; n < rects.length; n++) {\n    var rect = rects[n];\n\n    if (n === 0) {\n      continue;\n    }\n\n    var previousRect = rects[n - 1];\n\n    if (rect.top !== previousRect.top) {\n      continue;\n    }\n\n    if (rect.height !== previousRect.height) {\n      continue;\n    }\n\n    if (rect.left === previousRect.left + previousRect.width) {\n      previousRect.width += rect.width;\n      previousRect.right = rect.right;\n      rects.splice(n, 1);\n      n -= 1;\n    }\n  }\n}","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { generateId } from '../util/id';\nimport { LayoutNode, LayoutPosition } from './node';\n\nvar PageLayoutNode =\n/** @class */\nfunction (_super) {\n  __extends(PageLayoutNode, _super);\n\n  function PageLayoutNode(componentId, width, height, paddingTop, paddingBottom, paddingLeft, paddingRight) {\n    var _this = _super.call(this, componentId, generateId()) || this;\n\n    _this.componentId = componentId;\n    _this.width = width;\n    _this.height = height;\n    _this.paddingTop = paddingTop;\n    _this.paddingBottom = paddingBottom;\n    _this.paddingLeft = paddingLeft;\n    _this.paddingRight = paddingRight;\n    _this.flowed = false;\n    return _this;\n  }\n\n  PageLayoutNode.prototype.getNodeClass = function () {\n    return 'page';\n  };\n\n  PageLayoutNode.prototype.isRoot = function () {\n    return false;\n  };\n\n  PageLayoutNode.prototype.isLeaf = function () {\n    return false;\n  };\n\n  PageLayoutNode.prototype.getSize = function () {\n    if (this.size === undefined) {\n      this.size = this.getChildren().reduce(function (size, child) {\n        return size + child.getSize();\n      }, 0);\n    }\n\n    return this.size;\n  };\n\n  PageLayoutNode.prototype.getWidth = function () {\n    return this.width;\n  };\n\n  PageLayoutNode.prototype.getHeight = function () {\n    return this.height;\n  };\n\n  PageLayoutNode.prototype.getPaddingTop = function () {\n    return this.paddingTop;\n  };\n\n  PageLayoutNode.prototype.getPaddingBottom = function () {\n    return this.paddingBottom;\n  };\n\n  PageLayoutNode.prototype.getPaddingLeft = function () {\n    return this.paddingLeft;\n  };\n\n  PageLayoutNode.prototype.getPaddingRight = function () {\n    return this.paddingRight;\n  };\n\n  PageLayoutNode.prototype.getContentHeight = function () {\n    if (this.contentHeight === undefined) {\n      this.contentHeight = this.getChildren().reduce(function (contentHeight, child) {\n        return contentHeight + child.getHeight();\n      }, 0);\n    }\n\n    return this.contentHeight;\n  };\n\n  PageLayoutNode.prototype.isFlowed = function () {\n    return this.flowed;\n  };\n\n  PageLayoutNode.prototype.markAsFlowed = function () {\n    this.flowed = true;\n  };\n\n  PageLayoutNode.prototype.resolvePosition = function (offset, depth) {\n    var cumulatedOffset = 0;\n\n    for (var _i = 0, _a = this.getChildren(); _i < _a.length; _i++) {\n      var child = _a[_i];\n      var childSize = child.getSize();\n\n      if (cumulatedOffset + childSize > offset) {\n        var position = new LayoutPosition(this, depth, offset);\n        var childPosition = child.resolvePosition(offset - cumulatedOffset, depth + 1);\n        position.setChild(childPosition);\n        childPosition.setParent(position);\n        return position;\n      }\n\n      cumulatedOffset += childSize;\n    }\n\n    throw new Error(\"Offset \" + offset + \" is out of range.\");\n  };\n\n  PageLayoutNode.prototype.convertCoordinatesToOffset = function (x, y) {\n    var offset = 0;\n    var cumulatedHeight = 0;\n    var contentX = Math.min(Math.max(x - this.getPaddingLeft(), 0), this.getWidth() - this.getPaddingRight());\n    var contentY = Math.min(Math.max(y - this.getPaddingTop(), 0), this.getHeight() - this.getPaddingBottom());\n\n    for (var _i = 0, _a = this.getChildren(); _i < _a.length; _i++) {\n      var child = _a[_i];\n      var childHeight = child.getHeight();\n\n      if (contentY >= cumulatedHeight && contentY <= cumulatedHeight + childHeight) {\n        offset += child.convertCoordinatesToOffset(contentX, contentY - cumulatedHeight);\n        break;\n      }\n\n      offset += child.getSize();\n      cumulatedHeight += childHeight;\n    }\n\n    if (offset === this.getSize()) {\n      var lastChild = this.getLastChild();\n\n      if (lastChild) {\n        offset -= lastChild.getSize();\n        offset += lastChild.convertCoordinatesToOffset(contentX, lastChild.getHeight());\n      }\n    }\n\n    if (offset === this.getSize()) {\n      offset--;\n    }\n\n    return offset;\n  };\n\n  PageLayoutNode.prototype.resolveRects = function (from, to) {\n    var _this = this;\n\n    var rects = [];\n    var offset = 0;\n    var cumulatedHeight = 0;\n    this.getChildren().forEach(function (child, n) {\n      var childHeight = child.getHeight();\n      var minChildOffset = 0;\n      var maxChildOffset = child.getSize();\n      var childFrom = Math.max(from - offset, minChildOffset);\n      var childTo = Math.min(to - offset, maxChildOffset);\n\n      if (childFrom <= maxChildOffset && childTo >= minChildOffset) {\n        var childRects = child.resolveRects(childFrom, childTo);\n        childRects.forEach(function (childRect) {\n          var width = childRect.width;\n          var height = childRect.height;\n\n          var paddingTop = _this.getPaddingTop();\n\n          var paddingBottom = _this.getPaddingBottom();\n\n          var paddingLeft = _this.getPaddingLeft();\n\n          var paddingRight = _this.getPaddingRight();\n\n          var left = paddingLeft + childRect.left;\n          var right = paddingRight + childRect.right;\n          var top = cumulatedHeight + paddingTop + childRect.top;\n          var bottom = _this.getHeight() - cumulatedHeight - childHeight - childRect.bottom - paddingBottom;\n          rects.push({\n            width: width,\n            height: height,\n            left: left,\n            right: right,\n            top: top,\n            bottom: bottom,\n            paddingTop: childRect.paddingTop,\n            paddingBottom: childRect.paddingBottom,\n            paddingLeft: childRect.paddingLeft,\n            paddingRight: childRect.paddingRight\n          });\n        });\n      }\n\n      offset += child.getSize();\n      cumulatedHeight += childHeight;\n    });\n    return rects;\n  };\n\n  PageLayoutNode.prototype.clearOwnCache = function () {\n    this.size = undefined;\n    this.contentHeight = undefined;\n    this.flowed = false;\n  };\n\n  return PageLayoutNode;\n}(LayoutNode);\n\nexport { PageLayoutNode };","import { AtomicLayoutNode } from './atomic-node';\nimport { BlockLayoutNode } from './block-node';\nimport { DocLayoutNode } from './doc-node';\nimport { InlineLayoutNode } from './inline-node';\nimport { LineLayoutNode } from './line-node';\nimport { PageLayoutNode } from './page-node';\nexport function identifyLayoutNodeType(node) {\n  if (node instanceof DocLayoutNode) {\n    return 'Doc';\n  }\n\n  if (node instanceof PageLayoutNode) {\n    return 'Page';\n  }\n\n  if (node instanceof BlockLayoutNode) {\n    return 'Block';\n  }\n\n  if (node instanceof LineLayoutNode) {\n    return 'Line';\n  }\n\n  if (node instanceof InlineLayoutNode) {\n    return 'Inline';\n  }\n\n  if (node instanceof AtomicLayoutNode) {\n    return 'Atomic';\n  }\n\n  throw new Error('Unknown layout node type.');\n}","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { Node } from '../tree/node';\nimport { Position } from '../tree/position';\n\nvar RenderPosition =\n/** @class */\nfunction (_super) {\n  __extends(RenderPosition, _super);\n\n  function RenderPosition() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return RenderPosition;\n}(Position);\n\nexport { RenderPosition };\n\nvar RenderNode =\n/** @class */\nfunction (_super) {\n  __extends(RenderNode, _super);\n\n  function RenderNode(componentId, id, style) {\n    var _this = _super.call(this) || this;\n\n    _this.componentId = componentId;\n    _this.id = id;\n    _this.style = style;\n    return _this;\n  }\n\n  RenderNode.prototype.getComponentId = function () {\n    return this.componentId;\n  };\n\n  RenderNode.prototype.getId = function () {\n    return this.id;\n  };\n\n  RenderNode.prototype.getStyle = function () {\n    return this.style;\n  };\n\n  return RenderNode;\n}(Node);\n\nexport { RenderNode };","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { RenderNode, RenderPosition } from './node';\n\nvar AtomicRenderNode =\n/** @class */\nfunction (_super) {\n  __extends(AtomicRenderNode, _super);\n\n  function AtomicRenderNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  AtomicRenderNode.prototype.isRoot = function () {\n    return false;\n  };\n\n  AtomicRenderNode.prototype.isLeaf = function () {\n    return true;\n  };\n\n  AtomicRenderNode.prototype.resolvePosition = function (offset, depth) {\n    return new RenderPosition(this, depth, offset);\n  };\n\n  AtomicRenderNode.prototype.convertOffsetToModelOffset = function (offset) {\n    return offset;\n  };\n\n  AtomicRenderNode.prototype.convertModelOffsetToOffset = function (modelOffset) {\n    return modelOffset;\n  };\n\n  return AtomicRenderNode;\n}(RenderNode);\n\nexport { AtomicRenderNode };","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { RenderNode, RenderPosition } from './node';\n\nvar BlockRenderNode =\n/** @class */\nfunction (_super) {\n  __extends(BlockRenderNode, _super);\n\n  function BlockRenderNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  BlockRenderNode.prototype.isRoot = function () {\n    return false;\n  };\n\n  BlockRenderNode.prototype.isLeaf = function () {\n    return false;\n  };\n\n  BlockRenderNode.prototype.getSize = function () {\n    if (this.size === undefined) {\n      this.size = this.getChildren().reduce(function (size, child) {\n        return size + child.getSize();\n      }, 0);\n    }\n\n    return this.size;\n  };\n\n  BlockRenderNode.prototype.getModelSize = function () {\n    if (this.modelSize === undefined) {\n      this.modelSize = this.getChildren().reduce(function (size, childNode) {\n        return size + childNode.getModelSize();\n      }, 2);\n    }\n\n    return this.modelSize;\n  };\n\n  BlockRenderNode.prototype.resolvePosition = function (offset, depth) {\n    var cumulatedOffset = 0;\n\n    for (var _i = 0, _a = this.getChildren(); _i < _a.length; _i++) {\n      var child = _a[_i];\n      var childSize = child.getSize();\n\n      if (cumulatedOffset + childSize > offset) {\n        var position = new RenderPosition(this, depth, offset);\n        var childPosition = child.resolvePosition(offset - cumulatedOffset, depth + 1);\n        position.setChild(childPosition);\n        childPosition.setParent(position);\n        return position;\n      }\n\n      cumulatedOffset += childSize;\n    }\n\n    throw new Error(\"Offset \" + offset + \" is out of range.\");\n  };\n\n  BlockRenderNode.prototype.clearOwnCache = function () {\n    this.size = undefined;\n    this.modelSize = undefined;\n  };\n\n  BlockRenderNode.prototype.convertOffsetToModelOffset = function (offset) {\n    var cumulatedSize = 0;\n    var cumulatedModelSize = 1;\n\n    for (var _i = 0, _a = this.getChildren(); _i < _a.length; _i++) {\n      var child = _a[_i];\n      var childSize = child.getSize();\n\n      if (cumulatedSize + childSize > offset) {\n        return cumulatedModelSize + child.convertOffsetToModelOffset(offset - cumulatedSize);\n      }\n\n      cumulatedSize += childSize;\n      cumulatedModelSize += child.getModelSize();\n    }\n\n    throw new Error(\"Offset \" + offset + \" is out of range.\");\n  };\n\n  BlockRenderNode.prototype.convertModelOffsetToOffset = function (modelOffset) {\n    var cumulatedModelSize = 1;\n    var cumulatedSize = 0;\n\n    for (var _i = 0, _a = this.getChildren(); _i < _a.length; _i++) {\n      var child = _a[_i];\n      var childModelSize = child.getModelSize();\n\n      if (cumulatedModelSize + childModelSize > modelOffset) {\n        return cumulatedSize + child.convertModelOffsetToOffset(modelOffset - cumulatedModelSize);\n      }\n\n      cumulatedModelSize += childModelSize;\n      cumulatedSize += child.getSize();\n    }\n\n    throw new Error(\"Model offset \" + modelOffset + \" is out of range.\");\n  };\n\n  return BlockRenderNode;\n}(RenderNode);\n\nexport { BlockRenderNode };","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { RenderNode, RenderPosition } from './node';\n\nvar DocRenderNode =\n/** @class */\nfunction (_super) {\n  __extends(DocRenderNode, _super);\n\n  function DocRenderNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DocRenderNode.prototype.isRoot = function () {\n    return true;\n  };\n\n  DocRenderNode.prototype.isLeaf = function () {\n    return false;\n  };\n\n  DocRenderNode.prototype.getSize = function () {\n    if (this.size === undefined) {\n      this.size = this.getChildren().reduce(function (size, child) {\n        return size + child.getSize();\n      }, 0);\n    }\n\n    return this.size;\n  };\n\n  DocRenderNode.prototype.getModelSize = function () {\n    if (this.modelSize === undefined) {\n      this.modelSize = this.getChildren().reduce(function (size, childNode) {\n        return size + childNode.getModelSize();\n      }, 2);\n    }\n\n    return this.modelSize;\n  };\n\n  DocRenderNode.prototype.resolvePosition = function (offset) {\n    var cumulatedOffset = 0;\n\n    for (var _i = 0, _a = this.getChildren(); _i < _a.length; _i++) {\n      var child = _a[_i];\n      var childSize = child.getSize();\n\n      if (cumulatedOffset + childSize > offset) {\n        var position = new RenderPosition(this, 0, offset);\n        var childPosition = child.resolvePosition(offset - cumulatedOffset, 1);\n        position.setChild(childPosition);\n        childPosition.setParent(position);\n        return position;\n      }\n\n      cumulatedOffset += childSize;\n    }\n\n    throw new Error(\"Offset \" + offset + \" is out of range.\");\n  };\n\n  DocRenderNode.prototype.clearOwnCache = function () {\n    this.size = undefined;\n    this.modelSize = undefined;\n  };\n\n  DocRenderNode.prototype.convertOffsetToModelOffset = function (offset) {\n    var cumulatedSize = 0;\n    var cumulatedModelSize = 1;\n\n    for (var _i = 0, _a = this.getChildren(); _i < _a.length; _i++) {\n      var child = _a[_i];\n      var childSize = child.getSize();\n\n      if (cumulatedSize + childSize > offset) {\n        return cumulatedModelSize + child.convertOffsetToModelOffset(offset - cumulatedSize);\n      }\n\n      cumulatedSize += childSize;\n      cumulatedModelSize += child.getModelSize();\n    }\n\n    throw new Error(\"Offset \" + offset + \" is out of range.\");\n  };\n\n  DocRenderNode.prototype.convertModelOffsetToOffset = function (modelOffset) {\n    var cumulatedModelSize = 1;\n    var cumulatedSize = 0;\n\n    for (var _i = 0, _a = this.getChildren(); _i < _a.length; _i++) {\n      var child = _a[_i];\n      var childModelSize = child.getModelSize();\n\n      if (cumulatedModelSize + childModelSize > modelOffset) {\n        return cumulatedSize + child.convertModelOffsetToOffset(modelOffset - cumulatedModelSize);\n      }\n\n      cumulatedModelSize += childModelSize;\n      cumulatedSize += child.getSize();\n    }\n\n    throw new Error(\"Model offset \" + modelOffset + \" is out of range.\");\n  };\n\n  return DocRenderNode;\n}(RenderNode);\n\nexport { DocRenderNode };","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { RenderNode, RenderPosition } from './node';\n\nvar InlineRenderNode =\n/** @class */\nfunction (_super) {\n  __extends(InlineRenderNode, _super);\n\n  function InlineRenderNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  InlineRenderNode.prototype.isRoot = function () {\n    return false;\n  };\n\n  InlineRenderNode.prototype.isLeaf = function () {\n    return false;\n  };\n\n  InlineRenderNode.prototype.getSize = function () {\n    if (this.size === undefined) {\n      this.size = this.getChildren().reduce(function (size, child) {\n        return size + child.getSize();\n      }, 0);\n    }\n\n    return this.size;\n  };\n\n  InlineRenderNode.prototype.getModelSize = function () {\n    if (this.modelSize === undefined) {\n      this.modelSize = this.getChildren().reduce(function (size, childNode) {\n        return size + childNode.getModelSize();\n      }, 2);\n    }\n\n    return this.modelSize;\n  };\n\n  InlineRenderNode.prototype.resolvePosition = function (offset, depth) {\n    var cumulatedOffset = 0;\n\n    for (var _i = 0, _a = this.getChildren(); _i < _a.length; _i++) {\n      var child = _a[_i];\n      var childSize = child.getSize();\n\n      if (cumulatedOffset + childSize > offset) {\n        var position = new RenderPosition(this, depth, offset);\n        var childPosition = child.resolvePosition(offset - cumulatedOffset, depth + 1);\n        position.setChild(childPosition);\n        childPosition.setParent(position);\n        return position;\n      }\n\n      cumulatedOffset += childSize;\n    }\n\n    throw new Error(\"Offset \" + offset + \" is out of range.\");\n  };\n\n  InlineRenderNode.prototype.clearOwnCache = function () {\n    this.size = undefined;\n    this.modelSize = undefined;\n  };\n\n  InlineRenderNode.prototype.convertOffsetToModelOffset = function (offset) {\n    var cumulatedSize = 0;\n    var cumulatedModelSize = 1;\n\n    for (var _i = 0, _a = this.getChildren(); _i < _a.length; _i++) {\n      var child = _a[_i];\n      var childSize = child.getSize();\n\n      if (cumulatedSize + childSize > offset) {\n        return cumulatedModelSize + child.convertOffsetToModelOffset(offset - cumulatedSize);\n      }\n\n      cumulatedSize += childSize;\n      cumulatedModelSize += child.getModelSize();\n    }\n\n    throw new Error(\"Offset \" + offset + \" is out of range.\");\n  };\n\n  InlineRenderNode.prototype.convertModelOffsetToOffset = function (modelOffset) {\n    var cumulatedModelSize = 1;\n    var cumulatedSize = 0;\n\n    for (var _i = 0, _a = this.getChildren(); _i < _a.length; _i++) {\n      var child = _a[_i];\n      var childModelSize = child.getModelSize();\n\n      if (cumulatedModelSize + childModelSize > modelOffset) {\n        return cumulatedSize + child.convertModelOffsetToOffset(modelOffset - cumulatedModelSize);\n      }\n\n      cumulatedModelSize += childModelSize;\n      cumulatedSize += child.getSize();\n    }\n\n    throw new Error(\"Model offset \" + modelOffset + \" is out of range.\");\n  };\n\n  return InlineRenderNode;\n}(RenderNode);\n\nexport { InlineRenderNode };","import { AtomicRenderNode } from './atomic-node';\nimport { BlockRenderNode } from './block-node';\nimport { DocRenderNode } from './doc-node';\nimport { InlineRenderNode } from './inline-node';\nexport function identifyRenderNodeType(node) {\n  if (node instanceof DocRenderNode) {\n    return 'doc';\n  }\n\n  if (node instanceof BlockRenderNode) {\n    return 'block';\n  }\n\n  if (node instanceof InlineRenderNode) {\n    return 'inline';\n  }\n\n  if (node instanceof AtomicRenderNode) {\n    return 'atomic';\n  }\n\n  throw new Error('Unknown render node type.');\n}","var InsertOperation =\n/** @class */\nfunction () {\n  function InsertOperation(at, tokens) {\n    this.at = at;\n    this.tokens = tokens;\n  }\n\n  InsertOperation.prototype.getOffsetAdjustment = function () {\n    return {\n      at: this.at,\n      delta: this.tokens.length\n    };\n  };\n\n  InsertOperation.prototype.adjustOffset = function (adjustments) {\n    var at = this.at;\n    adjustments.forEach(function (adjustment) {\n      if (at >= adjustment.at) {\n        at += adjustment.delta;\n      }\n    });\n    return new InsertOperation(at, this.tokens);\n  };\n\n  InsertOperation.prototype.getAt = function () {\n    return this.at;\n  };\n\n  InsertOperation.prototype.getTokens = function () {\n    return this.tokens;\n  };\n\n  return InsertOperation;\n}();\n\nexport { InsertOperation };\n\nvar DeleteOperation =\n/** @class */\nfunction () {\n  function DeleteOperation(from, to) {\n    this.from = from;\n    this.to = to;\n  }\n\n  DeleteOperation.prototype.getOffsetAdjustment = function () {\n    return {\n      at: this.to,\n      delta: this.from - this.to\n    };\n  };\n\n  DeleteOperation.prototype.adjustOffset = function (adjustments) {\n    var from = this.from;\n    var to = this.to;\n    adjustments.forEach(function (adjustment) {\n      if (from >= adjustment.at) {\n        from += adjustment.delta;\n      }\n\n      if (to >= adjustment.at) {\n        to += adjustment.delta;\n      }\n    });\n    return new DeleteOperation(from, to);\n  };\n\n  DeleteOperation.prototype.getFrom = function () {\n    return this.from;\n  };\n\n  DeleteOperation.prototype.getTo = function () {\n    return this.to;\n  };\n\n  return DeleteOperation;\n}();\n\nexport { DeleteOperation };\n\nvar AppliedInsertOperation =\n/** @class */\nfunction () {\n  function AppliedInsertOperation(at, tokens) {\n    this.at = at;\n    this.tokens = tokens;\n  }\n\n  AppliedInsertOperation.prototype.getAt = function () {\n    return this.at;\n  };\n\n  AppliedInsertOperation.prototype.getTokens = function () {\n    return this.tokens;\n  };\n\n  return AppliedInsertOperation;\n}();\n\nexport { AppliedInsertOperation };\n\nvar AppliedDeleteOperation =\n/** @class */\nfunction () {\n  function AppliedDeleteOperation(at, tokens) {\n    this.at = at;\n    this.tokens = tokens;\n  }\n\n  AppliedDeleteOperation.prototype.getAt = function () {\n    return this.at;\n  };\n\n  AppliedDeleteOperation.prototype.getTokens = function () {\n    return this.tokens;\n  };\n\n  return AppliedDeleteOperation;\n}();\n\nexport { AppliedDeleteOperation };\n\nvar Transformation =\n/** @class */\nfunction () {\n  function Transformation() {\n    this.operations = [];\n    this.cursorAnchor = null;\n    this.cursorHead = null;\n    this.cursorLockLeft = null;\n  }\n\n  Transformation.prototype.addOperation = function (operation) {\n    this.operations.push(operation);\n  };\n\n  Transformation.prototype.getOperations = function () {\n    return this.operations;\n  };\n\n  Transformation.prototype.setCursor = function (at) {\n    this.cursorAnchor = at;\n    this.cursorHead = at;\n  };\n\n  Transformation.prototype.setCursorHead = function (cursorHead) {\n    this.cursorHead = cursorHead;\n  };\n\n  Transformation.prototype.setCursorLockLeft = function (cursorLockLeft) {\n    this.cursorLockLeft = cursorLockLeft;\n  };\n\n  Transformation.prototype.getCursorAnchor = function () {\n    return this.cursorAnchor;\n  };\n\n  Transformation.prototype.getCursorHead = function () {\n    return this.cursorHead;\n  };\n\n  Transformation.prototype.getCursorLockLeft = function () {\n    return this.cursorLockLeft;\n  };\n\n  return Transformation;\n}();\n\nexport { Transformation };\n\nvar AppliedTransformation =\n/** @class */\nfunction () {\n  function AppliedTransformation(originalTransformation, originalCursorHead, originalCursorAnchor, originalCursorLockLeft) {\n    this.originalTransformation = originalTransformation;\n    this.originalCursorHead = originalCursorHead;\n    this.originalCursorAnchor = originalCursorAnchor;\n    this.originalCursorLockLeft = originalCursorLockLeft;\n    this.operations = [];\n  }\n\n  AppliedTransformation.prototype.addOperation = function (operation) {\n    this.operations.push(operation);\n    var beforeFrom;\n    var beforeTo;\n    var afterFrom;\n    var afterTo;\n\n    if (operation instanceof AppliedInsertOperation) {\n      var at = operation.getAt();\n      var insertedTokens = operation.getTokens();\n      beforeFrom = at;\n      beforeTo = at;\n      afterFrom = at;\n      afterTo = at + insertedTokens.length;\n    } else if (operation instanceof AppliedDeleteOperation) {\n      var at = operation.getAt();\n      var deletedTokens = operation.getTokens();\n      beforeFrom = at;\n      beforeTo = at + deletedTokens.length;\n      afterFrom = at;\n      afterTo = at;\n    } else {\n      throw new Error('Invalid applied operation encountered.');\n    }\n\n    if (this.beforeFrom === undefined || beforeFrom < this.beforeFrom) {\n      this.beforeFrom = beforeFrom;\n    }\n\n    if (this.beforeTo === undefined || beforeTo > this.beforeTo) {\n      this.beforeTo = beforeTo;\n    }\n\n    if (this.afterFrom === undefined || afterFrom < this.afterFrom) {\n      this.afterFrom = afterFrom;\n    }\n\n    if (this.afterTo === undefined || afterTo > this.afterTo) {\n      this.afterTo = afterTo;\n    }\n  };\n\n  AppliedTransformation.prototype.getOperations = function () {\n    return this.operations;\n  };\n\n  AppliedTransformation.prototype.getOriginalTransformation = function () {\n    return this.originalTransformation;\n  };\n\n  AppliedTransformation.prototype.getOriginalCursorHead = function () {\n    return this.originalCursorHead;\n  };\n\n  AppliedTransformation.prototype.getOriginalCursorAnchor = function () {\n    return this.originalCursorAnchor;\n  };\n\n  AppliedTransformation.prototype.getOriginalCursorLockLeft = function () {\n    return this.originalCursorLockLeft;\n  };\n\n  AppliedTransformation.prototype.getTransformedRange = function () {\n    if (this.beforeFrom === undefined) {\n      return undefined;\n    }\n\n    return {\n      beforeFrom: this.beforeFrom,\n      beforeTo: this.beforeTo,\n      afterFrom: this.afterFrom,\n      afterTo: this.afterTo\n    };\n  };\n\n  return AppliedTransformation;\n}();\n\nexport { AppliedTransformation };","var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar _this = this;\n\nimport { identifyLayoutNodeType } from '../../layout/utility';\nimport { identifyRenderNodeType } from '../../render/utility';\nimport { Transformation } from '../../state/transformation';\nexport var move = function move(serviceRegistry, offset) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var tn;\n    return __generator(this, function (_a) {\n      tn = new Transformation();\n      tn.setCursor(offset);\n      serviceRegistry.getService('state').applyTransformation(tn);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var moveLeft = function moveLeft(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, tn, cursorState, anchor, head;\n    return __generator(this, function (_a) {\n      cursorService = serviceRegistry.getService('cursor');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn = new Transformation();\n      cursorState = cursorService.getCursorState();\n      anchor = cursorState.anchor;\n      head = cursorState.head;\n\n      if (anchor === head) {\n        if (head < 1) {\n          return [2\n          /*return*/\n          ];\n        }\n\n        tn.setCursor(head - 1);\n      } else {\n        if (anchor < head) {\n          tn.setCursor(anchor);\n        } else if (anchor > head) {\n          tn.setCursor(head);\n        }\n      }\n\n      serviceRegistry.getService('state').applyTransformation(tn);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var moveRight = function moveRight(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, renderService, tn, cursorState, anchor, head, docSize;\n    return __generator(this, function (_a) {\n      cursorService = serviceRegistry.getService('cursor');\n      renderService = serviceRegistry.getService('render');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn = new Transformation();\n      cursorState = cursorService.getCursorState();\n      anchor = cursorState.anchor;\n      head = cursorState.head;\n      docSize = renderService.getDocSize();\n\n      if (anchor === head) {\n        if (head >= docSize - 1) {\n          return [2\n          /*return*/\n          ];\n        }\n\n        tn.setCursor(head + 1);\n      } else {\n        if (anchor < head) {\n          tn.setCursor(head);\n        } else if (anchor > head) {\n          tn.setCursor(anchor);\n        }\n      }\n\n      serviceRegistry.getService('state').applyTransformation(tn);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var moveUp = function moveUp(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, layoutService, tn, cursorState, offset, position, linePosition, lineNode, previousLineNode, leftLock, targetLineSelectableOffset;\n    return __generator(this, function (_a) {\n      cursorService = serviceRegistry.getService('cursor');\n      layoutService = serviceRegistry.getService('layout');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn = new Transformation();\n      cursorState = cursorService.getCursorState();\n      offset = Math.min(cursorState.anchor, cursorState.head);\n      position = layoutService.resolvePosition(offset);\n      linePosition = position.getLeaf().getParent().getParent();\n      lineNode = linePosition.getNode();\n\n      if (identifyLayoutNodeType(lineNode) !== 'Line') {\n        throw new Error(\"Expecting position to be referencing an line node.\");\n      }\n\n      previousLineNode = lineNode.getPreviousSiblingAllowCrossParent();\n\n      if (!previousLineNode) {\n        tn.setCursor(offset - linePosition.getOffset());\n      } else {\n        leftLock = cursorState.leftLock;\n\n        if (leftLock === null) {\n          leftLock = lineNode.resolveRects(linePosition.getOffset(), linePosition.getOffset())[0].left;\n        }\n\n        tn.setCursorLockLeft(leftLock);\n        targetLineSelectableOffset = previousLineNode.convertCoordinateToOffset(leftLock);\n        tn.setCursor(offset - linePosition.getOffset() - previousLineNode.getSize() + targetLineSelectableOffset);\n      }\n\n      serviceRegistry.getService('state').applyTransformation(tn);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var moveDown = function moveDown(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, layoutService, tn, cursorState, offset, position, linePosition, lineNode, nextLineNode, leftLock, targetLineSelectableOffset;\n    return __generator(this, function (_a) {\n      cursorService = serviceRegistry.getService('cursor');\n      layoutService = serviceRegistry.getService('layout');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn = new Transformation();\n      cursorState = cursorService.getCursorState();\n      offset = Math.max(cursorState.anchor, cursorState.head);\n      position = layoutService.resolvePosition(offset);\n      linePosition = position.getLeaf().getParent().getParent();\n      lineNode = linePosition.getNode();\n\n      if (identifyLayoutNodeType(lineNode) !== 'Line') {\n        throw new Error(\"Expecting position to be referencing an line node.\");\n      }\n\n      nextLineNode = lineNode.getNextSiblingAllowCrossParent();\n\n      if (!nextLineNode) {\n        tn.setCursor(offset - linePosition.getOffset() + lineNode.getSize() - 1);\n      } else {\n        leftLock = cursorState.leftLock;\n\n        if (leftLock === null) {\n          leftLock = lineNode.resolveRects(linePosition.getOffset(), linePosition.getOffset())[0].left;\n        }\n\n        tn.setCursorLockLeft(leftLock);\n        targetLineSelectableOffset = nextLineNode.convertCoordinateToOffset(leftLock);\n        tn.setCursor(offset - linePosition.getOffset() + lineNode.getSize() + targetLineSelectableOffset);\n      }\n\n      serviceRegistry.getService('state').applyTransformation(tn);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var moveLeftByWord = function moveLeftByWord(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, renderService, tn, cursorState, offset, position, atomicPosition, atomicNode, previousAtomicNode;\n    return __generator(this, function (_a) {\n      cursorService = serviceRegistry.getService('cursor');\n      renderService = serviceRegistry.getService('render');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn = new Transformation();\n      cursorState = cursorService.getCursorState();\n      offset = Math.min(cursorState.anchor, cursorState.head);\n      position = renderService.resolvePosition(offset);\n      atomicPosition = position.getLeaf();\n      atomicNode = atomicPosition.getNode();\n\n      if (identifyRenderNodeType(atomicNode) !== 'atomic') {\n        throw new Error(\"Expecting position to be referencing an atomic node.\");\n      }\n\n      if (atomicPosition.getOffset() > 0) {\n        tn.setCursor(offset - atomicPosition.getOffset());\n      } else {\n        previousAtomicNode = atomicNode.getPreviousSiblingAllowCrossParent();\n\n        if (previousAtomicNode) {\n          tn.setCursor(offset - previousAtomicNode.getSize());\n        } else {\n          tn.setCursor(offset);\n        }\n      }\n\n      serviceRegistry.getService('state').applyTransformation(tn);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var moveRightByWord = function moveRightByWord(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, renderService, tn, cursorState, offset, position, atomicPosition, atomicNode, nextAtomicNode, newOffset;\n    return __generator(this, function (_a) {\n      cursorService = serviceRegistry.getService('cursor');\n      renderService = serviceRegistry.getService('render');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn = new Transformation();\n      cursorState = cursorService.getCursorState();\n      offset = Math.max(cursorState.anchor, cursorState.head);\n      position = renderService.resolvePosition(offset);\n      atomicPosition = position.getLeaf();\n      atomicNode = atomicPosition.getNode();\n\n      if (identifyRenderNodeType(atomicNode) !== 'atomic') {\n        throw new Error(\"Expecting position to be referencing an atomic node.\");\n      }\n\n      if (atomicPosition.getOffset() < atomicNode.getSize() - 1) {\n        tn.setCursor(offset - atomicPosition.getOffset() + atomicNode.getSize() - 1);\n      } else {\n        nextAtomicNode = atomicNode.getNextSiblingAllowCrossParent();\n\n        if (nextAtomicNode) {\n          newOffset = offset - atomicPosition.getOffset() + atomicNode.getSize() + nextAtomicNode.getSize();\n\n          if (nextAtomicNode.isBreakable()) {\n            newOffset--;\n          }\n\n          tn.setCursor(newOffset);\n        } else {\n          tn.setCursor(offset);\n        }\n      }\n\n      serviceRegistry.getService('state').applyTransformation(tn);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var moveToLineStart = function moveToLineStart(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, layoutService, tn, cursorState, offset, position, lineBoxLevelPosition;\n    return __generator(this, function (_a) {\n      cursorService = serviceRegistry.getService('cursor');\n      layoutService = serviceRegistry.getService('layout');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn = new Transformation();\n      cursorState = cursorService.getCursorState();\n      offset = Math.min(cursorState.anchor, cursorState.head);\n      position = layoutService.resolvePosition(offset);\n      lineBoxLevelPosition = position.getLeaf().getParent().getParent();\n\n      if (lineBoxLevelPosition.getOffset() > 0) {\n        tn.setCursor(offset - lineBoxLevelPosition.getOffset());\n      } else {\n        tn.setCursor(offset);\n      }\n\n      serviceRegistry.getService('state').applyTransformation(tn);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var moveToLineEnd = function moveToLineEnd(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, layoutService, tn, cursorState, offset, position, lineLayoutPosition, lineLayoutNode;\n    return __generator(this, function (_a) {\n      cursorService = serviceRegistry.getService('cursor');\n      layoutService = serviceRegistry.getService('layout');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn = new Transformation();\n      cursorState = cursorService.getCursorState();\n      offset = Math.max(cursorState.anchor, cursorState.head);\n      position = layoutService.resolvePosition(offset);\n      lineLayoutPosition = position.getLeaf().getParent().getParent();\n      lineLayoutNode = lineLayoutPosition.getNode();\n\n      if (identifyLayoutNodeType(lineLayoutNode) !== 'Line') {\n        throw new Error(\"Expecting position to be referencing an line layout node.\");\n      }\n\n      if (lineLayoutPosition.getOffset() < lineLayoutNode.getSize() - 1) {\n        tn.setCursor(offset - lineLayoutPosition.getOffset() + lineLayoutNode.getSize() - 1);\n      } else {\n        tn.setCursor(offset);\n      }\n\n      serviceRegistry.getService('state').applyTransformation(tn);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var moveToDocStart = function moveToDocStart(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, tn;\n    return __generator(this, function (_a) {\n      cursorService = serviceRegistry.getService('cursor');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn = new Transformation();\n      tn.setCursor(0);\n      serviceRegistry.getService('state').applyTransformation(tn);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var moveToDocEnd = function moveToDocEnd(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, renderService, tn, docSize;\n    return __generator(this, function (_a) {\n      cursorService = serviceRegistry.getService('cursor');\n      renderService = serviceRegistry.getService('render');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn = new Transformation();\n      docSize = renderService.getDocSize();\n      tn.setCursor(docSize - 1);\n      serviceRegistry.getService('state').applyTransformation(tn);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var moveHead = function moveHead(serviceRegistry, offset) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var tn;\n    return __generator(this, function (_a) {\n      tn = new Transformation();\n      tn.setCursorHead(offset);\n      serviceRegistry.getService('state').applyTransformation(tn);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var moveHeadLeft = function moveHeadLeft(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, tn, cursorState, head;\n    return __generator(this, function (_a) {\n      cursorService = serviceRegistry.getService('cursor');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn = new Transformation();\n      cursorState = cursorService.getCursorState();\n      head = cursorState.head;\n\n      if (head < 1) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn.setCursorHead(head - 1);\n      serviceRegistry.getService('state').applyTransformation(tn);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var moveHeadRight = function moveHeadRight(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, renderService, tn, cursorState, head, docSize;\n    return __generator(this, function (_a) {\n      cursorService = serviceRegistry.getService('cursor');\n      renderService = serviceRegistry.getService('render');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn = new Transformation();\n      cursorState = cursorService.getCursorState();\n      head = cursorState.head;\n      docSize = renderService.getDocSize();\n\n      if (head >= docSize - 1) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn.setCursorHead(head + 1);\n      serviceRegistry.getService('state').applyTransformation(tn);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var moveHeadUp = function moveHeadUp(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, layoutService, tn, cursorState, position, linePosition, lineNode, previousLineNode, leftLock, targetLineSelectableOffset;\n    return __generator(this, function (_a) {\n      cursorService = serviceRegistry.getService('cursor');\n      layoutService = serviceRegistry.getService('layout');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn = new Transformation();\n      cursorState = cursorService.getCursorState();\n      position = layoutService.resolvePosition(cursorState.head);\n      linePosition = position.getLeaf().getParent().getParent();\n      lineNode = linePosition.getNode();\n\n      if (identifyLayoutNodeType(lineNode) !== 'Line') {\n        throw new Error(\"Expecting position to be referencing an line node.\");\n      }\n\n      previousLineNode = lineNode.getPreviousSiblingAllowCrossParent();\n\n      if (!previousLineNode) {\n        tn.setCursorHead(cursorState.head - linePosition.getOffset());\n      } else {\n        leftLock = cursorState.leftLock;\n\n        if (leftLock === null) {\n          leftLock = lineNode.resolveRects(linePosition.getOffset(), linePosition.getOffset())[0].left;\n        }\n\n        tn.setCursorLockLeft(leftLock);\n        targetLineSelectableOffset = previousLineNode.convertCoordinateToOffset(leftLock);\n        tn.setCursorHead(cursorState.head - linePosition.getOffset() - previousLineNode.getSize() + targetLineSelectableOffset);\n      }\n\n      serviceRegistry.getService('state').applyTransformation(tn);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var moveHeadDown = function moveHeadDown(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, layoutService, tn, cursorState, offset, position, linePosition, lineNode, nextLineNode, leftLock, targetLineSelectableOffset;\n    return __generator(this, function (_a) {\n      cursorService = serviceRegistry.getService('cursor');\n      layoutService = serviceRegistry.getService('layout');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn = new Transformation();\n      cursorState = cursorService.getCursorState();\n      offset = cursorState.head;\n      position = layoutService.resolvePosition(offset);\n      linePosition = position.getLeaf().getParent().getParent();\n      lineNode = linePosition.getNode();\n\n      if (identifyLayoutNodeType(lineNode) !== 'Line') {\n        throw new Error(\"Expecting position to be referencing an line node.\");\n      }\n\n      nextLineNode = lineNode.getNextSiblingAllowCrossParent();\n\n      if (!nextLineNode) {\n        tn.setCursorHead(offset - linePosition.getOffset() + lineNode.getSize() - 1);\n      } else {\n        leftLock = cursorState.leftLock;\n\n        if (leftLock === null) {\n          leftLock = lineNode.resolveRects(linePosition.getOffset(), linePosition.getOffset())[0].left;\n        }\n\n        tn.setCursorLockLeft(leftLock);\n        targetLineSelectableOffset = nextLineNode.convertCoordinateToOffset(leftLock);\n        tn.setCursorHead(offset - linePosition.getOffset() + lineNode.getSize() + targetLineSelectableOffset);\n      }\n\n      serviceRegistry.getService('state').applyTransformation(tn);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var moveHeadLeftByWord = function moveHeadLeftByWord(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, renderService, tn, cursorState, offset, position, atomicPosition, atomicNode, previousAtomicNode;\n    return __generator(this, function (_a) {\n      cursorService = serviceRegistry.getService('cursor');\n      renderService = serviceRegistry.getService('render');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn = new Transformation();\n      cursorState = cursorService.getCursorState();\n      offset = cursorState.head;\n      position = renderService.resolvePosition(offset);\n      atomicPosition = position.getLeaf();\n      atomicNode = atomicPosition.getNode();\n\n      if (identifyRenderNodeType(atomicNode) !== 'atomic') {\n        throw new Error(\"Expecting position to be referencing an atomic node.\");\n      }\n\n      if (atomicPosition.getOffset() > 0) {\n        tn.setCursorHead(offset - atomicPosition.getOffset());\n      } else {\n        previousAtomicNode = atomicNode.getPreviousSiblingAllowCrossParent();\n\n        if (previousAtomicNode) {\n          tn.setCursorHead(offset - previousAtomicNode.getSize());\n        }\n      }\n\n      serviceRegistry.getService('state').applyTransformation(tn);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var moveHeadRightByWord = function moveHeadRightByWord(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, renderService, tn, cursorState, offset, position, atomicPosition, atomicNode, nextAtomicNode, newCursorPosition;\n    return __generator(this, function (_a) {\n      cursorService = serviceRegistry.getService('cursor');\n      renderService = serviceRegistry.getService('render');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn = new Transformation();\n      cursorState = cursorService.getCursorState();\n      offset = cursorState.head;\n      position = renderService.resolvePosition(offset);\n      atomicPosition = position.getLeaf();\n      atomicNode = atomicPosition.getNode();\n\n      if (identifyRenderNodeType(atomicNode) !== 'atomic') {\n        throw new Error(\"Expecting position to be referencing an atomic node.\");\n      }\n\n      if (atomicPosition.getOffset() < atomicNode.getSize() - 1) {\n        tn.setCursorHead(offset - atomicPosition.getOffset() + atomicNode.getSize() - 1);\n      } else {\n        nextAtomicNode = atomicNode.getNextSiblingAllowCrossParent();\n\n        if (nextAtomicNode) {\n          newCursorPosition = offset - atomicPosition.getOffset() + atomicNode.getSize() + nextAtomicNode.getSize();\n\n          if (nextAtomicNode.isBreakable()) {\n            newCursorPosition--;\n          }\n\n          tn.setCursorHead(newCursorPosition);\n        }\n      }\n\n      serviceRegistry.getService('state').applyTransformation(tn);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var moveHeadToLineStart = function moveHeadToLineStart(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, layoutService, tn, cursorState, offset, position, lineLayoutPosition;\n    return __generator(this, function (_a) {\n      cursorService = serviceRegistry.getService('cursor');\n      layoutService = serviceRegistry.getService('layout');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn = new Transformation();\n      cursorState = cursorService.getCursorState();\n      offset = cursorState.head;\n      position = layoutService.resolvePosition(offset);\n      lineLayoutPosition = position.getLeaf().getParent().getParent();\n\n      if (lineLayoutPosition.getOffset() > 0) {\n        tn.setCursorHead(offset - lineLayoutPosition.getOffset());\n      } else {\n        tn.setCursorHead(offset);\n      }\n\n      serviceRegistry.getService('state').applyTransformation(tn);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var moveHeadToLineEnd = function moveHeadToLineEnd(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, layoutService, tn, cursorState, offset, position, lineLayoutPosition, lineLayoutNode;\n    return __generator(this, function (_a) {\n      cursorService = serviceRegistry.getService('cursor');\n      layoutService = serviceRegistry.getService('layout');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn = new Transformation();\n      cursorState = cursorService.getCursorState();\n      offset = cursorState.head;\n      position = layoutService.resolvePosition(offset);\n      lineLayoutPosition = position.getLeaf().getParent().getParent();\n      lineLayoutNode = lineLayoutPosition.getNode();\n\n      if (identifyLayoutNodeType(lineLayoutNode) !== 'Line') {\n        throw new Error(\"Expecting position to be referencing an line layout node.\");\n      }\n\n      if (lineLayoutPosition.getOffset() < lineLayoutNode.getSize() - 1) {\n        tn.setCursorHead(offset - lineLayoutPosition.getOffset() + lineLayoutNode.getSize() - 1);\n      } else {\n        tn.setCursorHead(offset);\n      }\n\n      serviceRegistry.getService('state').applyTransformation(tn);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var moveHeadToDocStart = function moveHeadToDocStart(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, tn;\n    return __generator(this, function (_a) {\n      cursorService = serviceRegistry.getService('cursor');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn = new Transformation();\n      tn.setCursorHead(0);\n      serviceRegistry.getService('state').applyTransformation(tn);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var moveHeadToDocEnd = function moveHeadToDocEnd(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, renderService, tn, docSize;\n    return __generator(this, function (_a) {\n      cursorService = serviceRegistry.getService('cursor');\n      renderService = serviceRegistry.getService('render');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn = new Transformation();\n      docSize = renderService.getDocSize();\n      tn.setCursorHead(docSize - 1);\n      serviceRegistry.getService('state').applyTransformation(tn);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var selectAll = function selectAll(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, renderService, tn, docSize;\n    return __generator(this, function (_a) {\n      cursorService = serviceRegistry.getService('cursor');\n      renderService = serviceRegistry.getService('render');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn = new Transformation();\n      docSize = renderService.getDocSize();\n      tn.setCursor(0);\n      tn.setCursorHead(docSize - 1);\n      serviceRegistry.getService('state').applyTransformation(tn);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var selectWord = function selectWord(serviceRegistry, offset) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, renderService, tn, position, atomicPosition, atomicNode;\n    return __generator(this, function (_a) {\n      cursorService = serviceRegistry.getService('cursor');\n      renderService = serviceRegistry.getService('render');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn = new Transformation();\n      position = renderService.resolvePosition(offset);\n      atomicPosition = position.getLeaf();\n      atomicNode = atomicPosition.getNode();\n      tn.setCursor(offset - atomicPosition.getOffset());\n      tn.setCursorHead(offset - atomicPosition.getOffset() + (atomicNode.isBreakable() ? atomicNode.getSize() - 1 : atomicNode.getSize()));\n      serviceRegistry.getService('state').applyTransformation(tn);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var selectBlock = function selectBlock(serviceRegistry, offset) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, renderService, tn, position, atomicPosition, blockPosition, blockNode;\n    return __generator(this, function (_a) {\n      cursorService = serviceRegistry.getService('cursor');\n      renderService = serviceRegistry.getService('render');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn = new Transformation();\n      position = renderService.resolvePosition(offset);\n      atomicPosition = position.getLeaf();\n      blockPosition = searchBlockRenderPositionBottomUp(atomicPosition);\n\n      if (!blockPosition) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      blockNode = blockPosition.getNode();\n      tn.setCursor(offset - blockPosition.getOffset());\n      tn.setCursorHead(offset - blockPosition.getOffset() + blockNode.getSize() - 1);\n      serviceRegistry.getService('state').applyTransformation(tn);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\n\nfunction searchBlockRenderPositionBottomUp(position) {\n  if (identifyRenderNodeType(position.getNode()) === 'block') {\n    return position;\n  }\n\n  var parent = position.getParent();\n\n  if (!parent) {\n    return null;\n  }\n\n  return searchBlockRenderPositionBottomUp(parent);\n}","var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar _this = this;\n\nexport var undo = function undo(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n      serviceRegistry.getService('history').undo();\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var redo = function redo(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n      serviceRegistry.getService('history').redo();\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};","export var CLOSE_TOKEN = {};","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { Node } from '../tree/node';\nimport { Position } from '../tree/position';\n\nvar ModelPosition =\n/** @class */\nfunction (_super) {\n  __extends(ModelPosition, _super);\n\n  function ModelPosition() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return ModelPosition;\n}(Position);\n\nexport { ModelPosition };\n\nvar ModelNode =\n/** @class */\nfunction (_super) {\n  __extends(ModelNode, _super);\n\n  function ModelNode(componentId, id, attributes) {\n    var _this = _super.call(this) || this;\n\n    _this.componentId = componentId;\n    _this.id = id;\n    _this.attributes = attributes;\n    return _this;\n  }\n\n  ModelNode.prototype.getComponentId = function () {\n    return this.componentId;\n  };\n\n  ModelNode.prototype.getId = function () {\n    return this.id;\n  };\n\n  ModelNode.prototype.getAttributes = function () {\n    return this.attributes;\n  };\n\n  return ModelNode;\n}(Node);\n\nexport { ModelNode };","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { CLOSE_TOKEN } from '../state/token';\nimport { ModelNode, ModelPosition } from './node';\n\nvar BlockModelNode =\n/** @class */\nfunction (_super) {\n  __extends(BlockModelNode, _super);\n\n  function BlockModelNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  BlockModelNode.prototype.isRoot = function () {\n    return false;\n  };\n\n  BlockModelNode.prototype.isLeaf = function () {\n    return false;\n  };\n\n  BlockModelNode.prototype.getSize = function () {\n    if (this.size === undefined) {\n      this.size = this.getChildren().reduce(function (size, childNode) {\n        return size + childNode.getSize();\n      }, 2);\n    }\n\n    return this.size;\n  };\n\n  BlockModelNode.prototype.resolvePosition = function (offset, depth) {\n    var cumulatedOffset = 1;\n\n    for (var _i = 0, _a = this.getChildren(); _i < _a.length; _i++) {\n      var child = _a[_i];\n      var childSize = child.getSize();\n\n      if (cumulatedOffset + childSize > offset) {\n        var position = new ModelPosition(this, depth, offset);\n        var childPosition = child.resolvePosition(offset - cumulatedOffset, depth + 1);\n        position.setChild(childPosition);\n        childPosition.setParent(position);\n        return position;\n      }\n\n      cumulatedOffset += childSize;\n    }\n\n    if (offset < this.getSize()) {\n      return new ModelPosition(this, depth, offset);\n    }\n\n    throw new Error(\"Offset \" + offset + \" is out of range.\");\n  };\n\n  BlockModelNode.prototype.clearOwnCache = function () {\n    this.size = undefined;\n  };\n\n  BlockModelNode.prototype.toTokens = function () {\n    var tokens = [];\n    tokens.push({\n      componentId: this.getComponentId(),\n      partId: this.getPartId(),\n      id: this.getId(),\n      attributes: this.getAttributes()\n    });\n    this.getChildren().forEach(function (childNode) {\n      tokens.push.apply(tokens, childNode.toTokens());\n    });\n    tokens.push(CLOSE_TOKEN);\n    return tokens;\n  };\n\n  return BlockModelNode;\n}(ModelNode);\n\nexport { BlockModelNode };","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { CLOSE_TOKEN } from '../state/token';\nimport { ModelNode, ModelPosition } from './node';\n\nvar DocModelNode =\n/** @class */\nfunction (_super) {\n  __extends(DocModelNode, _super);\n\n  function DocModelNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DocModelNode.prototype.isRoot = function () {\n    return true;\n  };\n\n  DocModelNode.prototype.isLeaf = function () {\n    return false;\n  };\n\n  DocModelNode.prototype.getSize = function () {\n    if (this.size === undefined) {\n      this.size = this.getChildren().reduce(function (size, child) {\n        return size + child.getSize();\n      }, 2);\n    }\n\n    return this.size;\n  };\n\n  DocModelNode.prototype.resolvePosition = function (offset) {\n    var cumulatedOffset = 1;\n\n    for (var _i = 0, _a = this.getChildren(); _i < _a.length; _i++) {\n      var child = _a[_i];\n      var childSize = child.getSize();\n\n      if (cumulatedOffset + childSize > offset) {\n        var position = new ModelPosition(this, 0, offset);\n        var childPosition = child.resolvePosition(offset - cumulatedOffset, 1);\n        position.setChild(childPosition);\n        childPosition.setParent(position);\n        return position;\n      }\n\n      cumulatedOffset += childSize;\n    }\n\n    if (offset < this.getSize()) {\n      return new ModelPosition(this, 0, offset);\n    }\n\n    throw new Error(\"Offset \" + offset + \" is out of range.\");\n  };\n\n  DocModelNode.prototype.clearOwnCache = function () {\n    this.size = undefined;\n  };\n\n  DocModelNode.prototype.toTokens = function () {\n    var tokens = [];\n    tokens.push({\n      componentId: this.getComponentId(),\n      partId: this.getPartId(),\n      id: this.getId(),\n      attributes: this.getAttributes()\n    });\n    this.getChildren().forEach(function (child) {\n      tokens.push.apply(tokens, child.toTokens());\n    });\n    tokens.push(CLOSE_TOKEN);\n    return tokens;\n  };\n\n  return DocModelNode;\n}(ModelNode);\n\nexport { DocModelNode };","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { CLOSE_TOKEN } from '../state/token';\nimport { ModelNode, ModelPosition } from './node';\n\nvar InlineModelNode =\n/** @class */\nfunction (_super) {\n  __extends(InlineModelNode, _super);\n\n  function InlineModelNode(componentId, id, attributes) {\n    var _this = _super.call(this, componentId, id, attributes) || this;\n\n    _this.content = '';\n    return _this;\n  }\n\n  InlineModelNode.prototype.isRoot = function () {\n    return false;\n  };\n\n  InlineModelNode.prototype.isLeaf = function () {\n    return true;\n  };\n\n  InlineModelNode.prototype.setContent = function (content) {\n    this.content = content;\n    this.clearCache();\n  };\n\n  InlineModelNode.prototype.getContent = function () {\n    return this.content;\n  };\n\n  InlineModelNode.prototype.getSize = function () {\n    if (this.size === undefined) {\n      return 2 + this.content.length;\n    }\n\n    return this.size;\n  };\n\n  InlineModelNode.prototype.resolvePosition = function (offset, depth) {\n    if (offset >= this.getSize()) {\n      throw new Error(\"Offset \" + offset + \" is out of range.\");\n    }\n\n    var position = new ModelPosition(this, depth, offset);\n    return position;\n  };\n\n  InlineModelNode.prototype.clearOwnCache = function () {\n    this.size = undefined;\n  };\n\n  InlineModelNode.prototype.onDidUpdate = function (updatedNode) {\n    _super.prototype.onDidUpdate.call(this, updatedNode);\n\n    var oldContent = this.content;\n    var newContent = updatedNode.getContent();\n\n    if (oldContent === newContent) {\n      return;\n    }\n\n    this.content = updatedNode.getContent();\n    this.clearCache();\n  };\n\n  InlineModelNode.prototype.toTokens = function () {\n    var tokens = [];\n    tokens.push({\n      componentId: this.getComponentId(),\n      partId: this.getPartId(),\n      id: this.getId(),\n      attributes: this.getAttributes()\n    });\n    tokens.push.apply(tokens, this.content.split(''));\n    tokens.push(CLOSE_TOKEN);\n    return tokens;\n  };\n\n  return InlineModelNode;\n}(ModelNode);\n\nexport { InlineModelNode };","import { BlockModelNode } from './block-node';\nimport { DocModelNode } from './doc-node';\nimport { InlineModelNode } from './inline-node';\nexport function identifyModelNodeType(node) {\n  if (node instanceof DocModelNode) {\n    return 'doc';\n  }\n\n  if (node instanceof BlockModelNode) {\n    return 'block';\n  }\n\n  if (node instanceof InlineModelNode) {\n    return 'inline';\n  }\n\n  throw new Error('Unknown model node type.');\n}","var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar _this = this;\n\nimport { identifyModelNodeType } from '../../model/utility';\nimport { CLOSE_TOKEN } from '../../state/token';\nimport { DeleteOperation, InsertOperation, Transformation } from '../../state/transformation';\nimport { generateId } from '../../util/id';\n\nfunction moveCursorByModelOffset(serviceRegistry, modelOffset) {\n  var renderService = serviceRegistry.getService('render');\n  var offset = renderService.convertModelOffsetToOffset(modelOffset);\n  var tn = new Transformation();\n  tn.setCursor(offset);\n  serviceRegistry.getService('state').applyTransformation(tn);\n}\n\nexport var insert = function insert(serviceRegistry, tokens) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, renderService, tn, _a, anchor, head, collapsedAt, modelCollapsedAt;\n\n    return __generator(this, function (_b) {\n      cursorService = serviceRegistry.getService('cursor');\n      renderService = serviceRegistry.getService('render');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn = new Transformation();\n      _a = cursorService.getCursorState(), anchor = _a.anchor, head = _a.head;\n      collapsedAt = Math.min(anchor, head);\n\n      if (anchor !== head) {\n        tn.addOperation(new DeleteOperation(renderService.convertOffsetToModelOffset(Math.min(anchor, head)), renderService.convertOffsetToModelOffset(Math.max(anchor, head))));\n      }\n\n      modelCollapsedAt = renderService.convertOffsetToModelOffset(collapsedAt);\n      tn.addOperation(new InsertOperation(modelCollapsedAt, tokens));\n      serviceRegistry.getService('state').applyTransformation(tn);\n      moveCursorByModelOffset(serviceRegistry, modelCollapsedAt + tokens.length);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var deleteBackward = function deleteBackward(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, renderService, tn, _a, anchor, head, deleteFrom, deleteTo, modelDeleteFrom, modelDeleteTo;\n\n    return __generator(this, function (_b) {\n      cursorService = serviceRegistry.getService('cursor');\n      renderService = serviceRegistry.getService('render');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn = new Transformation();\n      _a = cursorService.getCursorState(), anchor = _a.anchor, head = _a.head;\n\n      if (anchor === head) {\n        if (head < 1) {\n          return [2\n          /*return*/\n          ];\n        }\n\n        deleteFrom = head - 1;\n        deleteTo = head;\n      } else {\n        deleteFrom = Math.min(anchor, head);\n        deleteTo = Math.max(anchor, head);\n      }\n\n      modelDeleteFrom = renderService.convertOffsetToModelOffset(deleteFrom);\n      modelDeleteTo = renderService.convertOffsetToModelOffset(deleteTo);\n      tn.addOperation(new DeleteOperation(modelDeleteFrom, modelDeleteTo));\n      serviceRegistry.getService('state').applyTransformation(tn);\n      moveCursorByModelOffset(serviceRegistry, modelDeleteFrom);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var deleteForward = function deleteForward(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, renderService, tn, _a, anchor, head, deleteFrom, deleteTo, modelDeleteFrom, modelDeleteTo;\n\n    return __generator(this, function (_b) {\n      cursorService = serviceRegistry.getService('cursor');\n      renderService = serviceRegistry.getService('render');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      tn = new Transformation();\n      _a = cursorService.getCursorState(), anchor = _a.anchor, head = _a.head;\n\n      if (anchor === head) {\n        if (head >= renderService.getDocSize() - 1) {\n          return [2\n          /*return*/\n          ];\n        }\n\n        deleteFrom = head;\n        deleteTo = head + 1;\n      } else {\n        deleteFrom = Math.min(anchor, head);\n        deleteTo = Math.max(anchor, head);\n      }\n\n      modelDeleteFrom = renderService.convertOffsetToModelOffset(deleteFrom);\n      modelDeleteTo = renderService.convertOffsetToModelOffset(deleteTo);\n      tn.addOperation(new DeleteOperation(modelDeleteFrom, modelDeleteTo));\n      serviceRegistry.getService('state').applyTransformation(tn);\n      moveCursorByModelOffset(serviceRegistry, modelDeleteFrom);\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var splitLine = function splitLine(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var cursorService, renderService, modelService, anchor, position, nodes, node, tokens;\n    return __generator(this, function (_a) {\n      cursorService = serviceRegistry.getService('cursor');\n      renderService = serviceRegistry.getService('render');\n      modelService = serviceRegistry.getService('model');\n\n      if (!cursorService.hasCursor()) {\n        return [2\n        /*return*/\n        ];\n      }\n\n      anchor = cursorService.getCursorState().anchor;\n      position = modelService.resolvePosition(renderService.convertOffsetToModelOffset(anchor)).getLeaf();\n      nodes = [];\n\n      while (position) {\n        node = position.getNode();\n        nodes.push(node);\n\n        if (identifyModelNodeType(node) === 'block') {\n          break;\n        }\n\n        position = position.getParent();\n      }\n\n      tokens = [];\n      nodes.reverse().forEach(function (node) {\n        tokens.unshift(CLOSE_TOKEN);\n        tokens.push({\n          componentId: node.getComponentId(),\n          partId: node.getPartId(),\n          id: generateId(),\n          attributes: node.getAttributes()\n        });\n      });\n      return [2\n      /*return*/\n      , insert(serviceRegistry, tokens)];\n    });\n  });\n};","var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar _this = this;\n\nexport var focus = function focus(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n      serviceRegistry.getService('view').requestFocus();\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};\nexport var blur = function blur(serviceRegistry) {\n  return __awaiter(_this, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n      serviceRegistry.getService('view').requestBlur();\n      return [2\n      /*return*/\n      ];\n    });\n  });\n};","var EventEmitter =\n/** @class */\nfunction () {\n  function EventEmitter() {\n    this.listeners = [];\n  }\n\n  EventEmitter.prototype.on = function (listener) {\n    this.listeners.push(listener);\n  };\n\n  EventEmitter.prototype.emit = function (event) {\n    this.listeners.forEach(function (listener) {\n      return listener(event);\n    });\n  };\n\n  return EventEmitter;\n}();\n\nexport { EventEmitter };","var CommandRegistry =\n/** @class */\nfunction () {\n  function CommandRegistry() {\n    this.commandsMap = new Map();\n  }\n\n  CommandRegistry.prototype.registerCommand = function (commandId, commandHandler) {\n    this.commandsMap.set(commandId, commandHandler);\n  };\n\n  CommandRegistry.prototype.getCommandHandler = function (commandId) {\n    return this.commandsMap.get(commandId);\n  };\n\n  return CommandRegistry;\n}();\n\nexport { CommandRegistry };","var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport { EventEmitter } from '../event/emitter';\nimport { CommandRegistry } from './registry';\n\nvar CommandService =\n/** @class */\nfunction () {\n  function CommandService(configService, serviceRegistry) {\n    this.serviceRegistry = serviceRegistry;\n    this.willExecuteCommandEventEmitter = new EventEmitter();\n    this.didExecuteCommandEventEmitter = new EventEmitter();\n    this.registry = new CommandRegistry();\n\n    for (var _i = 0, _a = Object.entries(configService.getConfig().commands); _i < _a.length; _i++) {\n      var _b = _a[_i],\n          commandId = _b[0],\n          commandHandler = _b[1];\n      this.registry.registerCommand(commandId, commandHandler);\n    }\n  }\n\n  CommandService.prototype.onWillExecuteCommand = function (listener) {\n    this.willExecuteCommandEventEmitter.on(listener);\n  };\n\n  CommandService.prototype.onDidExecuteCommand = function (listener) {\n    this.didExecuteCommandEventEmitter.on(listener);\n  };\n\n  CommandService.prototype.executeCommand = function (commandId) {\n    var args = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      args[_i - 1] = arguments[_i];\n    }\n\n    return __awaiter(this, void 0, void 0, function () {\n      var commandHandler;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            commandHandler = this.registry.getCommandHandler(commandId);\n\n            if (!commandHandler) {\n              return [2\n              /*return*/\n              ];\n            }\n\n            this.willExecuteCommandEventEmitter.emit({\n              commandId: commandId,\n              args: args\n            });\n            return [4\n            /*yield*/\n            , commandHandler.apply(void 0, [this.serviceRegistry].concat(args))];\n\n          case 1:\n            _a.sent();\n\n            this.didExecuteCommandEventEmitter.emit({\n              commandId: commandId,\n              args: args\n            });\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  return CommandService;\n}();\n\nexport { CommandService };","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { Node } from '../tree/node';\n\nvar ViewNode =\n/** @class */\nfunction (_super) {\n  __extends(ViewNode, _super);\n\n  function ViewNode(layoutNode) {\n    var _this = _super.call(this) || this;\n\n    _this.layoutNode = layoutNode;\n    return _this;\n  }\n\n  ViewNode.prototype.getComponentId = function () {\n    return this.layoutNode.getComponentId();\n  };\n\n  ViewNode.prototype.getPartId = function () {\n    return this.layoutNode.getPartId();\n  };\n\n  ViewNode.prototype.getId = function () {\n    return this.layoutNode.getId();\n  };\n\n  ViewNode.prototype.getSize = function () {\n    return this.layoutNode.getSize();\n  };\n\n  ViewNode.prototype.insertChild = function (child) {\n    _super.prototype.insertChild.call(this, child);\n\n    this.insertChildDOM(child.getDOMContainer());\n  };\n\n  ViewNode.prototype.insertChildBefore = function (child, beforeChild) {\n    _super.prototype.insertChildBefore.call(this, child, beforeChild);\n\n    this.insertChildDOMBefore(child.getDOMContainer(), beforeChild.getDOMContainer());\n  };\n\n  ViewNode.prototype.appendChild = function (child) {\n    _super.prototype.appendChild.call(this, child);\n\n    this.appendChildDOM(child.getDOMContainer());\n  };\n\n  ViewNode.prototype.appendChildAfter = function (child, afterChild) {\n    _super.prototype.appendChildAfter.call(this, child, afterChild);\n\n    this.appendChildDOMAfter(child.getDOMContainer(), afterChild.getDOMContainer());\n  };\n\n  ViewNode.prototype.removeChild = function (child) {\n    _super.prototype.removeChild.call(this, child);\n\n    this.removeChildDOM(child.getDOMContainer());\n  };\n\n  ViewNode.prototype.getLayoutNode = function () {\n    return this.layoutNode;\n  };\n\n  ViewNode.prototype.onDidUpdate = function (updatedNode) {\n    _super.prototype.onDidUpdate.call(this, updatedNode);\n\n    this.layoutNode = updatedNode.getLayoutNode();\n    this.onLayoutDidUpdate();\n  };\n\n  ViewNode.prototype.insertChildDOM = function (childDOM) {\n    var domContentContainer = this.getDOMContentContainer();\n    domContentContainer.insertBefore(childDOM, domContentContainer.firstChild);\n  };\n\n  ViewNode.prototype.insertChildDOMBefore = function (childDOM, beforeChildDOM) {\n    var domContentContainer = this.getDOMContentContainer();\n    domContentContainer.insertBefore(childDOM, beforeChildDOM);\n  };\n\n  ViewNode.prototype.appendChildDOM = function (childDOM) {\n    var domContentContainer = this.getDOMContentContainer();\n    domContentContainer.appendChild(childDOM);\n  };\n\n  ViewNode.prototype.appendChildDOMAfter = function (childDOM, afterChildDOM) {\n    var domContentContainer = this.getDOMContentContainer();\n    domContentContainer.insertBefore(childDOM, afterChildDOM.nextSibling);\n  };\n\n  ViewNode.prototype.removeChildDOM = function (childDOM) {\n    var domContentContainer = this.getDOMContentContainer();\n    domContentContainer.removeChild(childDOM);\n  };\n\n  return ViewNode;\n}(Node);\n\nexport { ViewNode };","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { ViewNode } from './node';\n\nvar DocViewNode =\n/** @class */\nfunction (_super) {\n  __extends(DocViewNode, _super);\n\n  function DocViewNode() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.attached = false;\n    return _this;\n  }\n\n  DocViewNode.prototype.getNodeClass = function () {\n    return 'doc';\n  };\n\n  DocViewNode.prototype.isRoot = function () {\n    return true;\n  };\n\n  DocViewNode.prototype.isLeaf = function () {\n    return false;\n  };\n\n  DocViewNode.prototype.getSize = function () {\n    if (this.size === undefined) {\n      this.size = this.getChildren().reduce(function (size, child) {\n        return size + child.getSize();\n      }, 0);\n    }\n\n    return this.size;\n  };\n\n  DocViewNode.prototype.clearOwnCache = function () {\n    this.size = undefined;\n  };\n\n  DocViewNode.prototype.attach = function (domContainer) {\n    if (this.attached) {\n      throw new Error('Already attached to the DOM.');\n    }\n\n    domContainer.appendChild(this.getDOMContainer());\n    this.attached = true;\n  };\n\n  DocViewNode.prototype.isAttached = function () {\n    return this.attached;\n  };\n\n  return DocViewNode;\n}(ViewNode);\n\nexport { DocViewNode };","var Component =\n/** @class */\nfunction () {\n  function Component(id) {\n    this.id = id;\n  }\n\n  Component.prototype.getId = function () {\n    return this.id;\n  };\n\n  return Component;\n}();\n\nexport { Component };","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { DocLayoutNode as AbstractDocLayoutNode } from '../../layout/doc-node';\nimport { DocModelNode as AbstractDocModelNode } from '../../model/doc-node';\nimport { DocRenderNode as AbstractDocRenderNode } from '../../render/doc-node';\nimport { generateId } from '../../util/id';\nimport { DocViewNode as AbstractDocViewNode } from '../../view/doc-node';\nimport { Component } from '../component';\n\nvar DocModelNode =\n/** @class */\nfunction (_super) {\n  __extends(DocModelNode, _super);\n\n  function DocModelNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DocModelNode.prototype.getPartId = function () {\n    return 'doc';\n  };\n\n  DocModelNode.prototype.toDOM = function (from, to) {\n    var $element = document.createElement('div');\n    var offset = 1;\n    var children = this.getChildren();\n\n    for (var n = 0, nn = children.length; n < nn && offset < to; n++) {\n      var child = children[n];\n      var childSize = child.getSize();\n      var childFrom = Math.max(0, from - offset);\n      var childTo = Math.min(childFrom + childSize, to - offset);\n      offset += childSize;\n\n      if (childFrom > childSize || childTo < 0) {\n        continue;\n      }\n\n      var $childElement = child.toDOM(childFrom, childTo);\n      $element.appendChild($childElement);\n    }\n\n    return $element;\n  };\n\n  DocModelNode.prototype.clone = function () {\n    return new DocModelNode(this.componentId, generateId(), this.attributes);\n  };\n\n  return DocModelNode;\n}(AbstractDocModelNode);\n\nexport { DocModelNode };\n\nvar DocRenderNode =\n/** @class */\nfunction (_super) {\n  __extends(DocRenderNode, _super);\n\n  function DocRenderNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DocRenderNode.prototype.getPartId = function () {\n    return 'doc';\n  };\n\n  return DocRenderNode;\n}(AbstractDocRenderNode);\n\nexport { DocRenderNode };\n\nvar DocLayoutNode =\n/** @class */\nfunction (_super) {\n  __extends(DocLayoutNode, _super);\n\n  function DocLayoutNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DocLayoutNode.prototype.getPartId = function () {\n    return 'doc';\n  };\n\n  return DocLayoutNode;\n}(AbstractDocLayoutNode);\n\nexport { DocLayoutNode };\n\nvar DocViewNode =\n/** @class */\nfunction (_super) {\n  __extends(DocViewNode, _super);\n\n  function DocViewNode(layoutNode) {\n    var _this = _super.call(this, layoutNode) || this;\n\n    _this.domContainer = document.createElement('div');\n    _this.domContainer.style.textAlign = 'left';\n    _this.domContainer.style.cursor = 'text';\n    _this.domContainer.style.userSelect = 'none';\n    return _this;\n  }\n\n  DocViewNode.prototype.getDOMContainer = function () {\n    return this.domContainer;\n  };\n\n  DocViewNode.prototype.getDOMContentContainer = function () {\n    return this.domContainer;\n  };\n\n  DocViewNode.prototype.onLayoutDidUpdate = function () {};\n\n  return DocViewNode;\n}(AbstractDocViewNode);\n\nexport { DocViewNode };\n\nvar DocComponent =\n/** @class */\nfunction (_super) {\n  __extends(DocComponent, _super);\n\n  function DocComponent() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DocComponent.prototype.buildModelNode = function (partId, id, attributes) {\n    return new DocModelNode(this.id, id, attributes);\n  };\n\n  DocComponent.prototype.buildRenderNode = function (modelNode) {\n    if (modelNode instanceof DocModelNode) {\n      return new DocRenderNode(this.id, modelNode.getId(), {});\n    }\n\n    throw new Error('Invalid doc model node.');\n  };\n\n  DocComponent.prototype.buildLayoutNode = function (renderNode) {\n    if (renderNode instanceof DocRenderNode) {\n      return new DocLayoutNode(this.id, renderNode.getId());\n    }\n\n    throw new Error('Invalid doc render node.');\n  };\n\n  DocComponent.prototype.buildViewNode = function (layoutNode) {\n    if (layoutNode instanceof DocLayoutNode) {\n      return new DocViewNode(layoutNode);\n    }\n\n    throw new Error('Invalid layout render node.');\n  };\n\n  return DocComponent;\n}(Component);\n\nexport { DocComponent };","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { ViewNode } from './node';\n\nvar BlockViewNode =\n/** @class */\nfunction (_super) {\n  __extends(BlockViewNode, _super);\n\n  function BlockViewNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  BlockViewNode.prototype.getNodeClass = function () {\n    return 'block';\n  };\n\n  BlockViewNode.prototype.isRoot = function () {\n    return false;\n  };\n\n  BlockViewNode.prototype.isLeaf = function () {\n    return false;\n  };\n\n  BlockViewNode.prototype.getSize = function () {\n    if (this.size === undefined) {\n      this.size = this.getChildren().reduce(function (size, child) {\n        return size + child.getSize();\n      }, 0);\n    }\n\n    return this.size;\n  };\n\n  BlockViewNode.prototype.clearOwnCache = function () {\n    this.size = undefined;\n  };\n\n  return BlockViewNode;\n}(ViewNode);\n\nexport { BlockViewNode };","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { ViewNode } from './node';\n\nvar InlineViewNode =\n/** @class */\nfunction (_super) {\n  __extends(InlineViewNode, _super);\n\n  function InlineViewNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  InlineViewNode.prototype.getNodeClass = function () {\n    return 'inline';\n  };\n\n  InlineViewNode.prototype.isRoot = function () {\n    return false;\n  };\n\n  InlineViewNode.prototype.isLeaf = function () {\n    return true;\n  };\n\n  return InlineViewNode;\n}(ViewNode);\n\nexport { InlineViewNode };","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { AtomicLayoutNode } from '../../layout/atomic-node';\nimport { BlockLayoutNode } from '../../layout/block-node';\nimport { InlineLayoutNode } from '../../layout/inline-node';\nimport { BlockModelNode } from '../../model/block-node';\nimport { AtomicRenderNode } from '../../render/atomic-node';\nimport { BlockRenderNode } from '../../render/block-node';\nimport { InlineRenderNode } from '../../render/inline-node';\nimport { generateId } from '../../util/id';\nimport { BlockViewNode } from '../../view/block-node';\nimport { InlineViewNode } from '../../view/inline-node';\nimport { Component } from '../component';\n\nvar ParagraphModelNode =\n/** @class */\nfunction (_super) {\n  __extends(ParagraphModelNode, _super);\n\n  function ParagraphModelNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ParagraphModelNode.prototype.getPartId = function () {\n    return 'paragraph';\n  };\n\n  ParagraphModelNode.prototype.toDOM = function (from, to) {\n    var $element = document.createElement('p');\n    var offset = 1;\n    var children = this.getChildren();\n\n    for (var n = 0, nn = children.length; n < nn && offset < to; n++) {\n      var childNode = children[n];\n      var childSize = childNode.getSize();\n      var childFrom = Math.max(0, from - offset);\n      var childTo = Math.min(childFrom + childSize, to - offset);\n      offset += childSize;\n\n      if (childFrom > childSize || childTo < 0) {\n        continue;\n      }\n\n      var $childElement = childNode.toDOM(childFrom, childTo);\n      $element.appendChild($childElement);\n    }\n\n    return $element;\n  };\n\n  ParagraphModelNode.prototype.clone = function () {\n    return new ParagraphModelNode(this.componentId, generateId(), this.attributes);\n  };\n\n  return ParagraphModelNode;\n}(BlockModelNode);\n\nexport { ParagraphModelNode };\n\nvar ParagraphRenderNode =\n/** @class */\nfunction (_super) {\n  __extends(ParagraphRenderNode, _super);\n\n  function ParagraphRenderNode(componentId, id, style) {\n    var _this = _super.call(this, componentId, id, style) || this;\n\n    _this.componentId = componentId;\n    _this.id = id;\n    _this.style = style;\n    _this.lineBreakNode = _this.buildLineBreakNode();\n    return _this;\n  }\n\n  ParagraphRenderNode.prototype.getPartId = function () {\n    return 'paragraph';\n  };\n\n  ParagraphRenderNode.prototype.getChildren = function () {\n    return _super.prototype.getChildren.call(this).concat([this.lineBreakNode]);\n  };\n\n  ParagraphRenderNode.prototype.convertOffsetToModelOffset = function (offset) {\n    // Handle line break\n    if (offset === this.getSize() - 1) {\n      return _super.prototype.convertOffsetToModelOffset.call(this, offset - 1) + 1;\n    }\n\n    return _super.prototype.convertOffsetToModelOffset.call(this, offset);\n  };\n\n  ParagraphRenderNode.prototype.convertModelOffsetToOffset = function (modelOffset) {\n    // Handle line break\n    if (this.getSize() === 1) {\n      return 0;\n    }\n\n    if (_super.prototype.convertModelOffsetToOffset.call(this, modelOffset - 1) + 1 === this.getSize() - 1) {\n      return this.getSize() - 1;\n    }\n\n    return _super.prototype.convertModelOffsetToOffset.call(this, modelOffset);\n  };\n\n  ParagraphRenderNode.prototype.buildLineBreakNode = function () {\n    var inlineNode = new ParagraphLineBreakRenderNode(this.componentId, this.id + \".line-break\", {});\n    var atomicNode = new ParagraphLineBreakAtomicRenderNode(this.componentId, this.id + \".line-break-atomic\", {});\n    inlineNode.appendChild(atomicNode);\n    inlineNode.setParent(this);\n    return inlineNode;\n  };\n\n  return ParagraphRenderNode;\n}(BlockRenderNode);\n\nexport { ParagraphRenderNode };\n\nvar ParagraphLineBreakRenderNode =\n/** @class */\nfunction (_super) {\n  __extends(ParagraphLineBreakRenderNode, _super);\n\n  function ParagraphLineBreakRenderNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ParagraphLineBreakRenderNode.prototype.getPartId = function () {\n    return 'line-break';\n  };\n\n  ParagraphLineBreakRenderNode.prototype.getModelSize = function () {\n    return 0;\n  };\n\n  return ParagraphLineBreakRenderNode;\n}(InlineRenderNode);\n\nexport { ParagraphLineBreakRenderNode };\n\nvar ParagraphLineBreakAtomicRenderNode =\n/** @class */\nfunction (_super) {\n  __extends(ParagraphLineBreakAtomicRenderNode, _super);\n\n  function ParagraphLineBreakAtomicRenderNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ParagraphLineBreakAtomicRenderNode.prototype.getPartId = function () {\n    return 'line-break-atomic';\n  };\n\n  ParagraphLineBreakAtomicRenderNode.prototype.getModelSize = function () {\n    return 0;\n  };\n\n  ParagraphLineBreakAtomicRenderNode.prototype.getSize = function () {\n    return 1;\n  };\n\n  ParagraphLineBreakAtomicRenderNode.prototype.isBreakable = function () {\n    return true;\n  };\n\n  ParagraphLineBreakAtomicRenderNode.prototype.clearOwnCache = function () {};\n\n  return ParagraphLineBreakAtomicRenderNode;\n}(AtomicRenderNode);\n\nexport { ParagraphLineBreakAtomicRenderNode };\n\nvar ParagraphLayoutNode =\n/** @class */\nfunction (_super) {\n  __extends(ParagraphLayoutNode, _super);\n\n  function ParagraphLayoutNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ParagraphLayoutNode.prototype.getPartId = function () {\n    return 'paragraph';\n  };\n\n  ParagraphLayoutNode.prototype.getPaddingTop = function () {\n    return 0;\n  };\n\n  ParagraphLayoutNode.prototype.getPaddingBottom = function () {\n    return 12;\n  };\n\n  ParagraphLayoutNode.prototype.getPaddingLeft = function () {\n    return 0;\n  };\n\n  ParagraphLayoutNode.prototype.getPaddingRight = function () {\n    return 0;\n  };\n\n  ParagraphLayoutNode.prototype.clone = function () {\n    return new ParagraphLayoutNode(this.componentId, this.id);\n  };\n\n  return ParagraphLayoutNode;\n}(BlockLayoutNode);\n\nexport { ParagraphLayoutNode };\n\nvar ParagraphLineBreakLayoutNode =\n/** @class */\nfunction (_super) {\n  __extends(ParagraphLineBreakLayoutNode, _super);\n\n  function ParagraphLineBreakLayoutNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ParagraphLineBreakLayoutNode.prototype.getPartId = function () {\n    return 'line-break';\n  };\n\n  ParagraphLineBreakLayoutNode.prototype.getPaddingTop = function () {\n    var previousSibling = this.getPreviousSibling();\n\n    if (!previousSibling) {\n      return 0;\n    }\n\n    return previousSibling.getPaddingTop();\n  };\n\n  ParagraphLineBreakLayoutNode.prototype.getPaddingBottom = function () {\n    var previousSibling = this.getPreviousSibling();\n\n    if (!previousSibling) {\n      return 0;\n    }\n\n    return previousSibling.getPaddingBottom();\n  };\n\n  ParagraphLineBreakLayoutNode.prototype.getPaddingLeft = function () {\n    return 0;\n  };\n\n  ParagraphLineBreakLayoutNode.prototype.getPaddingRight = function () {\n    return 0;\n  };\n\n  ParagraphLineBreakLayoutNode.prototype.clone = function () {\n    return new ParagraphLineBreakLayoutNode(this.componentId, this.id);\n  };\n\n  return ParagraphLineBreakLayoutNode;\n}(InlineLayoutNode);\n\nexport { ParagraphLineBreakLayoutNode };\n\nvar ParagraphLineBreakAtomicLayoutNode =\n/** @class */\nfunction (_super) {\n  __extends(ParagraphLineBreakAtomicLayoutNode, _super);\n\n  function ParagraphLineBreakAtomicLayoutNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ParagraphLineBreakAtomicLayoutNode.prototype.getPartId = function () {\n    return 'line-break-atomic';\n  };\n\n  ParagraphLineBreakAtomicLayoutNode.prototype.getSize = function () {\n    return 1;\n  };\n\n  ParagraphLineBreakAtomicLayoutNode.prototype.getWidth = function () {\n    return 5;\n  };\n\n  ParagraphLineBreakAtomicLayoutNode.prototype.getHeight = function () {\n    if (this.height === undefined) {\n      this.takeMeasurement();\n    }\n\n    return this.height;\n  };\n\n  ParagraphLineBreakAtomicLayoutNode.prototype.getPaddingTop = function () {\n    return 0;\n  };\n\n  ParagraphLineBreakAtomicLayoutNode.prototype.getPaddingBottom = function () {\n    return 0;\n  };\n\n  ParagraphLineBreakAtomicLayoutNode.prototype.getPaddingLeft = function () {\n    return 0;\n  };\n\n  ParagraphLineBreakAtomicLayoutNode.prototype.getPaddingRight = function () {\n    return 0;\n  };\n\n  ParagraphLineBreakAtomicLayoutNode.prototype.getTailTrimmedWidth = function () {\n    return 0;\n  };\n\n  ParagraphLineBreakAtomicLayoutNode.prototype.breakAtWidth = function (width) {\n    throw new Error('Method should never be called, there is a bug.');\n  };\n\n  ParagraphLineBreakAtomicLayoutNode.prototype.convertCoordinateToOffset = function (x) {\n    return 0;\n  };\n\n  ParagraphLineBreakAtomicLayoutNode.prototype.resolveRects = function (from, to) {\n    if (from === to) {\n      return [{\n        left: 0,\n        right: this.getWidth(),\n        top: 0,\n        bottom: 0,\n        width: 0,\n        height: this.getHeight(),\n        paddingTop: 0,\n        paddingBottom: 0,\n        paddingLeft: 0,\n        paddingRight: 0\n      }];\n    }\n\n    return [{\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0,\n      width: this.getWidth(),\n      height: this.getHeight(),\n      paddingTop: 0,\n      paddingBottom: 0,\n      paddingLeft: 0,\n      paddingRight: 0\n    }];\n  };\n\n  ParagraphLineBreakAtomicLayoutNode.prototype.takeMeasurement = function () {\n    this.height = 0;\n    var previousSibling = this.getPreviousSiblingAllowCrossParent();\n\n    if (!previousSibling) {\n      return;\n    }\n\n    this.height = previousSibling.getHeight();\n  };\n\n  return ParagraphLineBreakAtomicLayoutNode;\n}(AtomicLayoutNode);\n\nexport { ParagraphLineBreakAtomicLayoutNode };\n\nvar ParagraphViewNode =\n/** @class */\nfunction (_super) {\n  __extends(ParagraphViewNode, _super);\n\n  function ParagraphViewNode(layoutNode) {\n    var _this = _super.call(this, layoutNode) || this;\n\n    _this.domContainer = document.createElement('div');\n    return _this;\n  }\n\n  ParagraphViewNode.prototype.getDOMContainer = function () {\n    return this.domContainer;\n  };\n\n  ParagraphViewNode.prototype.getDOMContentContainer = function () {\n    return this.domContainer;\n  };\n\n  ParagraphViewNode.prototype.onLayoutDidUpdate = function () {\n    this.domContainer.style.width = this.layoutNode.getWidth() + \"px\";\n    this.domContainer.style.height = this.layoutNode.getHeight() + \"px\";\n    this.domContainer.style.paddingTop = this.layoutNode.getPaddingTop() + \"px\";\n    this.domContainer.style.paddingBottom = this.layoutNode.getPaddingBottom() + \"px\";\n    this.domContainer.style.paddingLeft = this.layoutNode.getPaddingLeft() + \"px\";\n    this.domContainer.style.paddingRight = this.layoutNode.getPaddingRight() + \"px\";\n    this.domContainer.style.lineHeight = '1em';\n  };\n\n  return ParagraphViewNode;\n}(BlockViewNode);\n\nexport { ParagraphViewNode };\n\nvar ParagraphLineBreakViewNode =\n/** @class */\nfunction (_super) {\n  __extends(ParagraphLineBreakViewNode, _super);\n\n  function ParagraphLineBreakViewNode(layoutNode) {\n    var _this = _super.call(this, layoutNode) || this;\n\n    _this.domContainer = document.createElement('div');\n    return _this;\n  }\n\n  ParagraphLineBreakViewNode.prototype.getDOMContainer = function () {\n    return this.domContainer;\n  };\n\n  ParagraphLineBreakViewNode.prototype.getDOMContentContainer = function () {\n    return this.domContainer;\n  };\n\n  ParagraphLineBreakViewNode.prototype.onLayoutDidUpdate = function () {};\n\n  return ParagraphLineBreakViewNode;\n}(InlineViewNode);\n\nexport { ParagraphLineBreakViewNode };\n\nvar ParagraphComponent =\n/** @class */\nfunction (_super) {\n  __extends(ParagraphComponent, _super);\n\n  function ParagraphComponent() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ParagraphComponent.prototype.buildModelNode = function (partId, id, attributes) {\n    return new ParagraphModelNode(this.id, id, attributes);\n  };\n\n  ParagraphComponent.prototype.buildRenderNode = function (modelNode) {\n    if (modelNode instanceof ParagraphModelNode) {\n      return new ParagraphRenderNode(this.id, modelNode.getId(), {});\n    }\n\n    throw new Error('Invalid paragraph model node.');\n  };\n\n  ParagraphComponent.prototype.buildLayoutNode = function (renderNode) {\n    if (renderNode instanceof ParagraphRenderNode) {\n      return new ParagraphLayoutNode(this.id, renderNode.getId());\n    }\n\n    if (renderNode instanceof ParagraphLineBreakRenderNode) {\n      return new ParagraphLineBreakLayoutNode(this.id, renderNode.getId());\n    }\n\n    if (renderNode instanceof ParagraphLineBreakAtomicRenderNode) {\n      return new ParagraphLineBreakAtomicLayoutNode(this.id, renderNode.getId());\n    }\n\n    throw new Error('Invalid paragraph render node.');\n  };\n\n  ParagraphComponent.prototype.buildViewNode = function (layoutNode) {\n    if (layoutNode instanceof ParagraphLayoutNode) {\n      return new ParagraphViewNode(layoutNode);\n    }\n\n    if (layoutNode instanceof ParagraphLineBreakLayoutNode) {\n      return new ParagraphLineBreakViewNode(layoutNode);\n    }\n\n    throw new Error('Invalid paragraph layout node.');\n  };\n\n  return ParagraphComponent;\n}(Component);\n\nexport { ParagraphComponent };","var BREAKABLE_CHARS = [' ', '\\n', '\\t'];\nexport function breakTextToWords(text) {\n  var words = [];\n  var word = '';\n\n  for (var n = 0, nn = text.length; n < nn; n++) {\n    var char = text[n];\n    word += char;\n\n    if (BREAKABLE_CHARS.includes(char)) {\n      words.push({\n        text: word,\n        breakable: true\n      });\n      word = '';\n    }\n  }\n\n  if (word.length > 0) {\n    words.push({\n      text: word,\n      breakable: false\n    });\n  }\n\n  return words;\n}","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport { AtomicLayoutNode } from '../../layout/atomic-node';\nimport { InlineLayoutNode } from '../../layout/inline-node';\nimport { InlineModelNode } from '../../model/inline-node';\nimport { AtomicRenderNode } from '../../render/atomic-node';\nimport { InlineRenderNode } from '../../render/inline-node';\nimport { generateId } from '../../util/id';\nimport { breakTextToWords } from '../../util/language';\nimport { InlineViewNode } from '../../view/inline-node';\nimport { Component } from '../component';\n\nvar TextModelNode =\n/** @class */\nfunction (_super) {\n  __extends(TextModelNode, _super);\n\n  function TextModelNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TextModelNode.prototype.getPartId = function () {\n    return 'text';\n  };\n\n  TextModelNode.prototype.toDOM = function (from, to) {\n    var $component = document.createElement('span');\n    $component.innerText = this.content.substring(from - 1, to - 1);\n    return $component;\n  };\n\n  TextModelNode.prototype.clone = function () {\n    var node = new TextModelNode(this.componentId, generateId(), this.attributes);\n    node.setContent(this.getContent());\n    return node;\n  };\n\n  return TextModelNode;\n}(InlineModelNode);\n\nexport { TextModelNode };\nexport var DEFAULT_TEXT_STYLE = {\n  weight: 400,\n  size: 16,\n  font: 'sans-serif',\n  letterSpacing: 0,\n  underline: false,\n  italic: false,\n  strikethrough: false,\n  color: 'black'\n};\n\nvar TextRenderNode =\n/** @class */\nfunction (_super) {\n  __extends(TextRenderNode, _super);\n\n  function TextRenderNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TextRenderNode.prototype.getPartId = function () {\n    return 'text';\n  };\n\n  return TextRenderNode;\n}(InlineRenderNode);\n\nexport { TextRenderNode };\n\nvar WordRenderNode =\n/** @class */\nfunction (_super) {\n  __extends(WordRenderNode, _super);\n\n  function WordRenderNode(componentId, id, style, word) {\n    var _this = _super.call(this, componentId, id, style) || this;\n\n    _this.word = word;\n    return _this;\n  }\n\n  WordRenderNode.prototype.getPartId = function () {\n    return 'word';\n  };\n\n  WordRenderNode.prototype.getWord = function () {\n    return this.word;\n  };\n\n  WordRenderNode.prototype.getModelSize = function () {\n    return this.word.text.length;\n  };\n\n  WordRenderNode.prototype.getSize = function () {\n    return this.word.text.length;\n  };\n\n  WordRenderNode.prototype.isBreakable = function () {\n    return this.word.breakable;\n  };\n\n  WordRenderNode.prototype.clearOwnCache = function () {};\n\n  WordRenderNode.prototype.onDidUpdate = function (updatedNode) {\n    _super.prototype.onDidUpdate.call(this, updatedNode);\n\n    var oldWord = this.word;\n    var newWord = updatedNode.getWord();\n\n    if (oldWord.text === newWord.text && oldWord.breakable === newWord.breakable) {\n      return;\n    }\n\n    this.word = updatedNode.getWord();\n    this.clearCache();\n  };\n\n  return WordRenderNode;\n}(AtomicRenderNode);\n\nexport { WordRenderNode };\n\nvar TextLayoutNode =\n/** @class */\nfunction (_super) {\n  __extends(TextLayoutNode, _super);\n\n  function TextLayoutNode(componentId, id, style) {\n    var _this = _super.call(this, componentId, id) || this;\n\n    _this.style = style;\n    return _this;\n  }\n\n  TextLayoutNode.prototype.getPartId = function () {\n    return 'text';\n  };\n\n  TextLayoutNode.prototype.getPaddingTop = function () {\n    return 3;\n  };\n\n  TextLayoutNode.prototype.getPaddingBottom = function () {\n    return 6;\n  };\n\n  TextLayoutNode.prototype.getPaddingLeft = function () {\n    return 0;\n  };\n\n  TextLayoutNode.prototype.getPaddingRight = function () {\n    return 0;\n  };\n\n  TextLayoutNode.prototype.getStyle = function () {\n    return this.style;\n  };\n\n  TextLayoutNode.prototype.clone = function () {\n    return new TextLayoutNode(this.componentId, this.id, this.style);\n  };\n\n  return TextLayoutNode;\n}(InlineLayoutNode);\n\nexport { TextLayoutNode };\n\nvar WordLayoutNode =\n/** @class */\nfunction (_super) {\n  __extends(WordLayoutNode, _super);\n\n  function WordLayoutNode(componentId, id, word, style, textMeasurer) {\n    var _this = _super.call(this, componentId, id) || this;\n\n    _this.word = word;\n    _this.style = style;\n    _this.textMeasurer = textMeasurer;\n    return _this;\n  }\n\n  WordLayoutNode.prototype.getPartId = function () {\n    return 'word';\n  };\n\n  WordLayoutNode.prototype.getSize = function () {\n    return this.word.text.length;\n  };\n\n  WordLayoutNode.prototype.getWidth = function () {\n    if (this.width === undefined) {\n      this.takeMeasurement();\n    }\n\n    return this.width;\n  };\n\n  WordLayoutNode.prototype.getHeight = function () {\n    if (this.height === undefined) {\n      this.takeMeasurement();\n    }\n\n    return this.height;\n  };\n\n  WordLayoutNode.prototype.getPaddingTop = function () {\n    return 0;\n  };\n\n  WordLayoutNode.prototype.getPaddingBottom = function () {\n    return 0;\n  };\n\n  WordLayoutNode.prototype.getPaddingLeft = function () {\n    return 0;\n  };\n\n  WordLayoutNode.prototype.getPaddingRight = function () {\n    return 0;\n  };\n\n  WordLayoutNode.prototype.getTailTrimmedWidth = function () {\n    if (this.tailTrimmedWidth === undefined) {\n      if (this.word.breakable) {\n        var text = this.word.text;\n        var measurement = this.textMeasurer.measure(text.substring(0, text.length - 1), this.style);\n        this.tailTrimmedWidth = measurement.width;\n      } else {\n        this.tailTrimmedWidth = this.getWidth();\n      }\n    }\n\n    return this.tailTrimmedWidth;\n  };\n\n  WordLayoutNode.prototype.breakAtWidth = function (width) {\n    var text = this.word.text;\n    var min = 0;\n    var max = text.length;\n\n    while (max - min > 1) {\n      var offset = Math.floor((max + min) / 2);\n      var substr = text.substring(0, offset);\n      var subwidth = this.textMeasurer.measure(substr, this.style).width;\n\n      if (subwidth > width) {\n        max = offset;\n      } else {\n        min = offset;\n      }\n    }\n\n    var splitAt = min;\n\n    var newWord = __assign({}, this.word, {\n      text: text.substring(splitAt)\n    });\n\n    var newNode = new WordLayoutNode(this.componentId, this.id, newWord, this.style, this.textMeasurer);\n    this.word.text = text.substring(0, splitAt);\n    this.clearCache();\n    return newNode;\n  };\n\n  WordLayoutNode.prototype.getWord = function () {\n    return this.word;\n  };\n\n  WordLayoutNode.prototype.convertCoordinateToOffset = function (x) {\n    var lastWidth = 0;\n    var text = this.word.text;\n\n    for (var n = 0, nn = text.length; n < nn; n++) {\n      var measurement = this.textMeasurer.measure(text.substring(0, n), this.style);\n      var width_1 = measurement.width;\n\n      if (width_1 < x) {\n        lastWidth = width_1;\n        continue;\n      }\n\n      if (x - lastWidth < width_1 - x) {\n        return n - 1;\n      }\n\n      return n;\n    }\n\n    var width = this.getWidth();\n\n    if (x - lastWidth < width - x) {\n      return text.length - 1;\n    }\n\n    return text.length;\n  };\n\n  WordLayoutNode.prototype.resolveRects = function (from, to) {\n    if (from === 0 && to === this.getSize()) {\n      return [{\n        left: 0,\n        right: 0,\n        top: 0,\n        bottom: 0,\n        width: this.getWidth(),\n        height: this.getHeight(),\n        paddingTop: 0,\n        paddingBottom: 0,\n        paddingLeft: 0,\n        paddingRight: 0\n      }];\n    }\n\n    var fromTextMeasurement = this.textMeasurer.measure(this.word.text.substring(0, from), this.style);\n    var toTextMeasurement = this.textMeasurer.measure(this.word.text.substring(0, to), this.style);\n    var width = toTextMeasurement.width - fromTextMeasurement.width;\n    var height = this.getHeight();\n    var left = fromTextMeasurement.width;\n    var right = this.getWidth() - toTextMeasurement.width;\n    var top = 0;\n    var bottom = 0;\n    return [{\n      width: width,\n      height: height,\n      left: left,\n      right: right,\n      top: top,\n      bottom: bottom,\n      paddingTop: 0,\n      paddingBottom: 0,\n      paddingLeft: 0,\n      paddingRight: 0\n    }];\n  };\n\n  WordLayoutNode.prototype.onDidUpdate = function (updatedNode) {\n    _super.prototype.onDidUpdate.call(this, updatedNode);\n\n    var oldWord = this.word;\n    var newWord = updatedNode.getWord();\n\n    if (oldWord.text === newWord.text && oldWord.breakable === newWord.breakable) {\n      return;\n    }\n\n    this.word = updatedNode.getWord();\n    this.clearCache();\n  };\n\n  WordLayoutNode.prototype.clearOwnCache = function () {\n    this.width = undefined;\n    this.height = undefined;\n    this.tailTrimmedWidth = undefined;\n  };\n\n  WordLayoutNode.prototype.takeMeasurement = function () {\n    var measurement = this.textMeasurer.measure(this.word.text, this.style);\n    this.width = measurement.width;\n    this.height = measurement.height;\n  };\n\n  return WordLayoutNode;\n}(AtomicLayoutNode);\n\nexport { WordLayoutNode };\n\nvar TextViewNode =\n/** @class */\nfunction (_super) {\n  __extends(TextViewNode, _super);\n\n  function TextViewNode(layoutNode) {\n    var _this = _super.call(this, layoutNode) || this;\n\n    _this.domContainer = document.createElement('span');\n    _this.domContainer.style.display = 'inline-block';\n    _this.domContainer.style.whiteSpace = 'pre';\n    _this.domContainer.style.lineHeight = '1em';\n    _this.domContent = document.createElement('span');\n\n    _this.domContainer.appendChild(_this.domContent);\n\n    _this.onLayoutDidUpdate();\n\n    return _this;\n  }\n\n  TextViewNode.prototype.getDOMContainer = function () {\n    return this.domContainer;\n  };\n\n  TextViewNode.prototype.getDOMContentContainer = function () {\n    return this.domContainer;\n  };\n\n  TextViewNode.prototype.onLayoutDidUpdate = function () {\n    var text = this.layoutNode.getChildren().map(function (child) {\n      if (child instanceof WordLayoutNode) {\n        return child.getWord().text;\n      }\n\n      return '';\n    }).join('');\n    var style = this.layoutNode.getStyle();\n    this.domContainer.style.width = this.layoutNode.getWidth() + \"px\";\n    this.domContainer.style.height = this.layoutNode.getHeight() + \"px\";\n    this.domContainer.style.paddingTop = this.layoutNode.getPaddingTop() + \"px\";\n    this.domContainer.style.paddingBottom = this.layoutNode.getPaddingBottom() + \"px\";\n    this.domContainer.style.paddingLeft = this.layoutNode.getPaddingLeft() + \"px\";\n    this.domContainer.style.paddingRight = this.layoutNode.getPaddingRight() + \"px\";\n    this.domContainer.style.fontFamily = style.font;\n    this.domContainer.style.fontSize = style.size + \"px\";\n    this.domContainer.style.letterSpacing = style.letterSpacing + \"px\";\n    this.domContainer.style.fontWeight = \"\" + style.weight;\n    this.domContainer.style.color = style.color;\n    this.domContainer.style.textDecoration = style.underline ? 'underline' : '';\n    this.domContainer.style.fontStyle = style.italic ? 'italic' : '';\n    this.domContent.style.textDecoration = style.strikethrough ? 'line-through' : '';\n    this.domContent.innerText = text;\n  };\n\n  return TextViewNode;\n}(InlineViewNode);\n\nexport { TextViewNode };\n\nvar TextComponent =\n/** @class */\nfunction (_super) {\n  __extends(TextComponent, _super);\n\n  function TextComponent(id, textMeasurer) {\n    var _this = _super.call(this, id) || this;\n\n    _this.textMeasurer = textMeasurer;\n    return _this;\n  }\n\n  TextComponent.prototype.buildModelNode = function (partId, id, attributes) {\n    return new TextModelNode(this.id, id, attributes);\n  };\n\n  TextComponent.prototype.buildRenderNode = function (modelNode) {\n    var _this = this;\n\n    if (modelNode instanceof TextModelNode) {\n      var attributes = modelNode.getAttributes();\n\n      var style_1 = __assign({}, DEFAULT_TEXT_STYLE, attributes);\n\n      var node_1 = new TextRenderNode(this.id, modelNode.getId(), style_1);\n      var words = breakTextToWords(modelNode.getContent());\n      words.forEach(function (word, wordIndex) {\n        var wordRenderNode = new WordRenderNode(_this.id, modelNode.getId() + \"-\" + wordIndex, style_1, word);\n        node_1.appendChild(wordRenderNode);\n      });\n\n      if (words.length === 0) {\n        node_1.appendChild(new WordRenderNode(this.id, modelNode.getId() + \"-0\", style_1, {\n          text: '',\n          breakable: false\n        }));\n      }\n\n      return node_1;\n    }\n\n    throw new Error('Invalid text model node.');\n  };\n\n  TextComponent.prototype.buildLayoutNode = function (renderNode) {\n    if (renderNode instanceof TextRenderNode) {\n      return new TextLayoutNode(this.id, renderNode.getId(), renderNode.getStyle());\n    }\n\n    if (renderNode instanceof WordRenderNode) {\n      return new WordLayoutNode(this.id, renderNode.getId(), renderNode.getWord(), renderNode.getStyle(), this.textMeasurer);\n    }\n\n    throw new Error('Invalid text render node.');\n  };\n\n  TextComponent.prototype.buildViewNode = function (layoutNode) {\n    if (layoutNode instanceof TextLayoutNode) {\n      return new TextViewNode(layoutNode);\n    }\n\n    throw new Error('Invalid text layout node');\n  };\n\n  return TextComponent;\n}(Component);\n\nexport { TextComponent };\n\nvar TextMeasurer =\n/** @class */\nfunction () {\n  function TextMeasurer() {\n    this.$canvas = document.createElement('canvas');\n  }\n\n  TextMeasurer.prototype.measure = function (text, textStyle) {\n    var ctx = this.$canvas.getContext('2d');\n    var weight = textStyle.weight;\n    var size = textStyle.size;\n    var font = this.fixFont(textStyle.font);\n    var letterSpacing = textStyle.letterSpacing;\n    ctx.font = weight + \" \" + size + \"px \" + font;\n    var measurement = ctx.measureText(text);\n    var width = letterSpacing === 0 || text.length <= 1 ? measurement.width : measurement.width + (text.length - 1) * letterSpacing;\n    return {\n      width: width,\n      height: size\n    };\n  };\n\n  TextMeasurer.prototype.fixFont = function (font) {\n    if (font.indexOf(' ') >= 0) {\n      return \"'\" + font + \"'\";\n    }\n\n    return font;\n  };\n\n  return TextMeasurer;\n}();\n\nexport { TextMeasurer };","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { ViewNode } from './node';\n\nvar LineViewNode =\n/** @class */\nfunction (_super) {\n  __extends(LineViewNode, _super);\n\n  function LineViewNode(layoutNode) {\n    var _this = _super.call(this, layoutNode) || this;\n\n    _this.domContainer = document.createElement('div');\n    return _this;\n  }\n\n  LineViewNode.prototype.getNodeClass = function () {\n    return 'line';\n  };\n\n  LineViewNode.prototype.isRoot = function () {\n    return false;\n  };\n\n  LineViewNode.prototype.isLeaf = function () {\n    return false;\n  };\n\n  LineViewNode.prototype.getSize = function () {\n    if (this.size === undefined) {\n      this.size = this.getChildren().reduce(function (size, child) {\n        return size + child.getSize();\n      }, 0);\n    }\n\n    return this.size;\n  };\n\n  LineViewNode.prototype.clearOwnCache = function () {\n    this.size = undefined;\n  };\n\n  LineViewNode.prototype.getDOMContainer = function () {\n    return this.domContainer;\n  };\n\n  LineViewNode.prototype.getDOMContentContainer = function () {\n    return this.domContainer;\n  };\n\n  return LineViewNode;\n}(ViewNode);\n\nexport { LineViewNode };","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { LineLayoutNode as AbstractLineLayoutNode } from '../../layout/line-node';\nimport { LineViewNode as AbstractLineViewNode } from '../../view/line-node';\nimport { Component } from '../component';\n\nvar LineLayoutNode =\n/** @class */\nfunction (_super) {\n  __extends(LineLayoutNode, _super);\n\n  function LineLayoutNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  LineLayoutNode.prototype.getPartId = function () {\n    return 'line';\n  };\n\n  LineLayoutNode.prototype.clone = function () {\n    return new LineLayoutNode(this.getComponentId());\n  };\n\n  return LineLayoutNode;\n}(AbstractLineLayoutNode);\n\nexport { LineLayoutNode };\n\nvar LineViewNode =\n/** @class */\nfunction (_super) {\n  __extends(LineViewNode, _super);\n\n  function LineViewNode(layoutNode) {\n    var _this = _super.call(this, layoutNode) || this;\n\n    _this.domContainer = document.createElement('div');\n    return _this;\n  }\n\n  LineViewNode.prototype.getDOMContainer = function () {\n    return this.domContainer;\n  };\n\n  LineViewNode.prototype.getDOMContentContainer = function () {\n    return this.domContainer;\n  };\n\n  LineViewNode.prototype.onLayoutDidUpdate = function () {\n    this.domContainer.style.width = this.layoutNode.getWidth() + \"px\";\n    this.domContainer.style.height = this.layoutNode.getHeight() + \"px\";\n    this.domContainer.style.paddingTop = this.layoutNode.getPaddingTop() + \"px\";\n    this.domContainer.style.paddingBottom = this.layoutNode.getPaddingBottom() + \"px\";\n    this.domContainer.style.paddingLeft = this.layoutNode.getPaddingLeft() + \"px\";\n    this.domContainer.style.paddingRight = this.layoutNode.getPaddingRight() + \"px\";\n  };\n\n  return LineViewNode;\n}(AbstractLineViewNode);\n\nexport { LineViewNode };\n\nvar LineComponent =\n/** @class */\nfunction (_super) {\n  __extends(LineComponent, _super);\n\n  function LineComponent() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  LineComponent.prototype.buildModelNode = function (partId, id, attributes) {\n    throw new Error('Line component does not support buildModelNode.');\n  };\n\n  LineComponent.prototype.buildRenderNode = function (modelNode) {\n    throw new Error('Line component does not support buildRenderNode.');\n  };\n\n  LineComponent.prototype.buildLayoutNode = function (renderNode) {\n    throw new Error('Line component does not support buildLayoutNode.');\n  };\n\n  LineComponent.prototype.buildLineLayoutNode = function () {\n    return new LineLayoutNode(this.getId());\n  };\n\n  LineComponent.prototype.buildViewNode = function (layoutNode) {\n    if (layoutNode instanceof LineLayoutNode) {\n      return new LineViewNode(layoutNode);\n    }\n\n    throw new Error('Invalid layout render node.');\n  };\n\n  return LineComponent;\n}(Component);\n\nexport { LineComponent };","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { ViewNode } from './node';\n\nvar PageViewNode =\n/** @class */\nfunction (_super) {\n  __extends(PageViewNode, _super);\n\n  function PageViewNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  PageViewNode.prototype.getNodeClass = function () {\n    return 'page';\n  };\n\n  PageViewNode.prototype.isRoot = function () {\n    return false;\n  };\n\n  PageViewNode.prototype.isLeaf = function () {\n    return false;\n  };\n\n  PageViewNode.prototype.getSize = function () {\n    if (this.size === undefined) {\n      this.size = this.getChildren().reduce(function (size, child) {\n        return size + child.getSize();\n      }, 0);\n    }\n\n    return this.size;\n  };\n\n  PageViewNode.prototype.clearOwnCache = function () {\n    this.size = undefined;\n  };\n\n  return PageViewNode;\n}(ViewNode);\n\nexport { PageViewNode };","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { PageLayoutNode as AbstractPageLayoutNode } from '../../layout/page-node';\nimport { PageViewNode as AbstractPageViewNode } from '../../view/page-node';\nimport { Component } from '../component';\n\nvar PageLayoutNode =\n/** @class */\nfunction (_super) {\n  __extends(PageLayoutNode, _super);\n\n  function PageLayoutNode() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  PageLayoutNode.prototype.getPartId = function () {\n    return 'page';\n  };\n\n  PageLayoutNode.prototype.clone = function () {\n    return new PageLayoutNode(this.getComponentId(), this.width, this.height, this.paddingTop, this.paddingBottom, this.paddingLeft, this.paddingRight);\n  };\n\n  return PageLayoutNode;\n}(AbstractPageLayoutNode);\n\nexport { PageLayoutNode };\n\nvar PageViewNode =\n/** @class */\nfunction (_super) {\n  __extends(PageViewNode, _super);\n\n  function PageViewNode(layoutNode) {\n    var _this = _super.call(this, layoutNode) || this;\n\n    _this.domContainer = document.createElement('div');\n    _this.domContainer.style.position = 'relative';\n    _this.domContainer.style.marginLeft = 'auto';\n    _this.domContainer.style.marginRight = 'auto';\n    _this.domContentContainer = document.createElement('div');\n\n    _this.domContainer.appendChild(_this.domContentContainer);\n\n    return _this;\n  }\n\n  PageViewNode.prototype.getDOMContainer = function () {\n    return this.domContainer;\n  };\n\n  PageViewNode.prototype.getDOMContentContainer = function () {\n    return this.domContentContainer;\n  };\n\n  PageViewNode.prototype.onLayoutDidUpdate = function () {\n    this.domContainer.style.width = this.layoutNode.getWidth() + \"px\";\n    this.domContainer.style.height = this.layoutNode.getHeight() + \"px\";\n    this.domContainer.style.paddingTop = this.layoutNode.getPaddingTop() + \"px\";\n    this.domContainer.style.paddingBottom = this.layoutNode.getPaddingBottom() + \"px\";\n    this.domContainer.style.paddingLeft = this.layoutNode.getPaddingLeft() + \"px\";\n    this.domContainer.style.paddingRight = this.layoutNode.getPaddingRight() + \"px\";\n  };\n\n  return PageViewNode;\n}(AbstractPageViewNode);\n\nexport { PageViewNode };\n\nvar PageComponent =\n/** @class */\nfunction (_super) {\n  __extends(PageComponent, _super);\n\n  function PageComponent(id, configService) {\n    var _this = _super.call(this, id) || this;\n\n    _this.configService = configService;\n    return _this;\n  }\n\n  PageComponent.prototype.buildModelNode = function (partId, id, attributes) {\n    throw new Error('Page component does not support buildModelNode.');\n  };\n\n  PageComponent.prototype.buildRenderNode = function (modelNode) {\n    throw new Error('Page component does not support buildRenderNode.');\n  };\n\n  PageComponent.prototype.buildLayoutNode = function (renderNode) {\n    throw new Error('Page component does not support buildLayoutNode.');\n  };\n\n  PageComponent.prototype.buildPageLayoutNode = function () {\n    var pageConfig = this.configService.getConfig().page;\n    return new PageLayoutNode(this.getId(), pageConfig.width, pageConfig.height, pageConfig.paddingTop, pageConfig.paddingBottom, pageConfig.paddingLeft, pageConfig.paddingRight);\n  };\n\n  PageComponent.prototype.buildViewNode = function (layoutNode) {\n    if (layoutNode instanceof PageLayoutNode) {\n      return new PageViewNode(layoutNode);\n    }\n\n    throw new Error('Invalid layout render node.');\n  };\n\n  return PageComponent;\n}(Component);\n\nexport { PageComponent };","var ComponentRegistry =\n/** @class */\nfunction () {\n  function ComponentRegistry() {\n    this.componentsMap = new Map();\n  }\n\n  ComponentRegistry.prototype.registerComponent = function (componentId, component) {\n    this.componentsMap.set(componentId, component);\n  };\n\n  ComponentRegistry.prototype.getComponent = function (componentId) {\n    return this.componentsMap.get(componentId);\n  };\n\n  return ComponentRegistry;\n}();\n\nexport { ComponentRegistry };","import { LineComponent } from './components/line';\nimport { PageComponent } from './components/page';\nimport { ComponentRegistry } from './registry';\n\nvar ComponentService =\n/** @class */\nfunction () {\n  function ComponentService(configService) {\n    this.registry = new ComponentRegistry();\n    this.pageComponent = new PageComponent('page', configService);\n    this.lineComponent = new LineComponent('line');\n\n    for (var _i = 0, _a = Object.entries(configService.getConfig().components); _i < _a.length; _i++) {\n      var _b = _a[_i],\n          componentId = _b[0],\n          component = _b[1];\n      this.registry.registerComponent(componentId, component);\n    }\n\n    this.registry.registerComponent(this.pageComponent.getId(), this.pageComponent);\n    this.registry.registerComponent(this.lineComponent.getId(), this.lineComponent);\n  }\n\n  ComponentService.prototype.getComponent = function (componentId) {\n    return this.registry.getComponent(componentId);\n  };\n\n  ComponentService.prototype.getPageComponent = function () {\n    return this.pageComponent;\n  };\n\n  ComponentService.prototype.getLineComponent = function () {\n    return this.lineComponent;\n  };\n\n  return ComponentService;\n}();\n\nexport { ComponentService };","var ConfigService =\n/** @class */\nfunction () {\n  function ConfigService(config, externalConfig) {\n    this.config = config;\n    this.applyExternalConfig(externalConfig);\n  }\n\n  ConfigService.prototype.getConfig = function () {\n    return this.config;\n  };\n\n  ConfigService.prototype.applyExternalConfig = function (externalConfig) {\n    var coreConfig = externalConfig['tw.core'];\n\n    if (coreConfig) {\n      if (coreConfig.page) {\n        this.config.page = coreConfig.page;\n      }\n    }\n  };\n\n  return ConfigService;\n}();\n\nexport { ConfigService };","import { EventEmitter } from '../event/emitter';\n\nvar Cursor =\n/** @class */\nfunction () {\n  function Cursor() {\n    this.didUpdateCursorEventEmitter = new EventEmitter();\n    this.anchor = 0;\n    this.head = 0;\n    this.leftLock = null;\n  }\n\n  Cursor.prototype.onDidUpdateCursor = function (listener) {\n    this.didUpdateCursorEventEmitter.on(listener);\n  };\n\n  Cursor.prototype.set = function (anchor, head, leftLock) {\n    this.anchor = anchor;\n    this.head = head;\n    this.leftLock = leftLock;\n    this.didUpdateCursorEventEmitter.emit({});\n  };\n\n  Cursor.prototype.getAnchor = function () {\n    return this.anchor;\n  };\n\n  Cursor.prototype.getHead = function () {\n    return this.head;\n  };\n\n  Cursor.prototype.getLeftLock = function () {\n    return this.leftLock;\n  };\n\n  return Cursor;\n}();\n\nexport { Cursor };","import { Cursor } from './cursor';\n\nvar CursorService =\n/** @class */\nfunction () {\n  function CursorService(configService) {\n    if (!configService.getConfig().cursor.disable) {\n      this.cursor = new Cursor();\n    }\n  }\n\n  CursorService.prototype.onDidUpdateCursor = function (listener) {\n    if (this.cursor) {\n      this.cursor.onDidUpdateCursor(listener);\n    }\n  };\n\n  CursorService.prototype.hasCursor = function () {\n    return !!this.cursor;\n  };\n\n  CursorService.prototype.setCursorState = function (cursorState) {\n    this.assertCursor();\n    this.cursor.set(cursorState.anchor, cursorState.head, cursorState.leftLock);\n  };\n\n  CursorService.prototype.getCursorState = function () {\n    this.assertCursor();\n    return {\n      anchor: this.cursor.getAnchor(),\n      head: this.cursor.getHead(),\n      leftLock: this.cursor.getLeftLock()\n    };\n  };\n\n  CursorService.prototype.assertCursor = function () {\n    if (!this.cursor) {\n      throw new Error('Cursor is disabled.');\n    }\n  };\n\n  return CursorService;\n}();\n\nexport { CursorService };","var HistoryAction =\n/** @class */\nfunction () {\n  function HistoryAction() {\n    this.appliedTransformations = [];\n    this.beganAt = Date.now();\n    this.endedAt = this.beganAt;\n  }\n\n  HistoryAction.prototype.getBeganAt = function () {\n    return this.beganAt;\n  };\n\n  HistoryAction.prototype.getEndedAt = function () {\n    return this.endedAt;\n  };\n\n  HistoryAction.prototype.recordAppliedTransformation = function (appliedTransformation) {\n    this.appliedTransformations.push(appliedTransformation);\n    this.endedAt = Date.now();\n  };\n\n  HistoryAction.prototype.getAppliedTransformations = function () {\n    return this.appliedTransformations;\n  };\n\n  return HistoryAction;\n}();\n\nexport { HistoryAction };","import { HistoryAction } from './action';\n\nvar HistoryState =\n/** @class */\nfunction () {\n  function HistoryState(configService, stateService) {\n    var _this = this;\n\n    this.configService = configService;\n    this.stateService = stateService;\n    this.actions = [];\n    this.offset = -1;\n\n    this.handleDidApplyTransformation = function (event) {\n      var transformation = event.transformation,\n          appliedTransformation = event.appliedTransformation; // Do not record applied transformation if originated from redo\n\n      if (_this.offset >= 0 && _this.actions[_this.offset].getAppliedTransformations().some(function (appliedTn) {\n        return appliedTn.getOriginalTransformation() === transformation;\n      })) {\n        return;\n      }\n\n      if (_this.offset < 0) {\n        _this.recordAppliedTransformationToNewAction(appliedTransformation);\n\n        return;\n      }\n\n      var currentItem = _this.actions[_this.offset];\n      var now = Date.now();\n\n      if (now - currentItem.getBeganAt() < _this.maxCollapseDuration && now - currentItem.getEndedAt() < _this.collapseThreshold) {\n        _this.recordAppliedTransformationToLastAction(appliedTransformation);\n      } else {\n        _this.recordAppliedTransformationToNewAction(appliedTransformation);\n      }\n    };\n\n    var config = configService.getConfig();\n    this.maxCollapseDuration = config.history.maxCollapseDuration;\n    this.collapseThreshold = config.history.collapseThreshold;\n    stateService.onDidApplyTransformation(this.handleDidApplyTransformation);\n  }\n\n  HistoryState.prototype.undo = function () {\n    var action = this.consumeNextUndoableAction();\n\n    if (!action) {\n      return;\n    }\n\n    var appliedTransformations = action.getAppliedTransformations();\n\n    if (appliedTransformations.length === 0) {\n      return;\n    }\n\n    this.stateService.unapplyTransformations(appliedTransformations);\n  };\n\n  HistoryState.prototype.redo = function () {\n    var action = this.consumeNextRedoableAction();\n\n    if (!action) {\n      return;\n    }\n\n    var transformations = action.getAppliedTransformations().map(function (appliedTransformation) {\n      return appliedTransformation.getOriginalTransformation();\n    });\n    this.stateService.applyTransformations(transformations);\n  };\n\n  HistoryState.prototype.consumeNextUndoableAction = function () {\n    if (this.offset < 0) {\n      return undefined;\n    }\n\n    var action = this.actions[this.offset];\n    this.offset--;\n    return action;\n  };\n\n  HistoryState.prototype.consumeNextRedoableAction = function () {\n    if (this.offset >= this.actions.length - 1) {\n      return undefined;\n    }\n\n    this.offset++;\n    return this.actions[this.offset];\n  };\n\n  HistoryState.prototype.recordAppliedTransformationToNewAction = function (appliedTransformation) {\n    if (appliedTransformation.getOperations().length === 0) {\n      return;\n    }\n\n    if (this.offset < this.actions.length - 1) {\n      this.actions.splice(this.offset + 1, this.actions.length - 1 - this.offset);\n    }\n\n    var action = new HistoryAction();\n    action.recordAppliedTransformation(appliedTransformation);\n    this.actions.push(action);\n    this.offset++;\n  };\n\n  HistoryState.prototype.recordAppliedTransformationToLastAction = function (appliedTransformation) {\n    var action = this.actions[this.offset];\n\n    if (!action) {\n      throw new Error('Error recording applied transformation, history is empty.');\n    }\n\n    if (this.offset < this.actions.length - 1) {\n      this.actions.splice(this.offset + 1, this.actions.length - 1 - this.offset);\n    }\n\n    action.recordAppliedTransformation(appliedTransformation);\n  };\n\n  return HistoryState;\n}();\n\nexport { HistoryState };","import { HistoryState } from './state';\n\nvar HistoryService =\n/** @class */\nfunction () {\n  function HistoryService(configService, stateService) {\n    this.state = new HistoryState(configService, stateService);\n  }\n\n  HistoryService.prototype.undo = function () {\n    this.state.undo();\n  };\n\n  HistoryService.prototype.redo = function () {\n    this.state.redo();\n  };\n\n  return HistoryService;\n}();\n\nexport { HistoryService };","export function detectPlatform() {\n  if (navigator.platform.startsWith('Linux')) {\n    return 'Linux';\n  }\n\n  if (['Windows', 'Win16', 'Win32'].includes(navigator.platform)) {\n    return 'Windows';\n  }\n\n  if (['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'].includes(navigator.platform)) {\n    return 'macOS';\n  }\n\n  return 'Unknown';\n}","import { detectPlatform } from '../util/platform';\n\nvar KeyBindingService =\n/** @class */\nfunction () {\n  function KeyBindingService(configService, commandService, viewService) {\n    var _this = this;\n\n    this.configService = configService;\n    this.commandService = commandService;\n    this.viewService = viewService;\n    this.keyBindings = new Map();\n\n    this.handleDidPressKey = function (event) {\n      var _a;\n\n      var keyBinding = _this.keyBindings.get(event.key);\n\n      if (!keyBinding) {\n        return;\n      }\n\n      if (keyBinding.preventDefault) {\n        event.originalKeyboardEvent.preventDefault();\n      }\n\n      (_a = _this.commandService).executeCommand.apply(_a, [keyBinding.command].concat(keyBinding.args));\n    };\n\n    var keyBindingsConfig = this.configService.getConfig().keyBindings;\n    this.bindKeys(keyBindingsConfig.common);\n\n    switch (detectPlatform()) {\n      case 'macOS':\n        if (keyBindingsConfig.macos) {\n          this.bindKeys(keyBindingsConfig.macos);\n        }\n\n        break;\n\n      case 'Windows':\n        if (keyBindingsConfig.windows) {\n          this.bindKeys(keyBindingsConfig.windows);\n        }\n\n        break;\n\n      case 'Linux':\n        if (keyBindingsConfig.linux) {\n          this.bindKeys(keyBindingsConfig.linux);\n        }\n\n        break;\n    }\n\n    viewService.onDidPressKey(this.handleDidPressKey);\n  }\n\n  KeyBindingService.prototype.bindKeys = function (config) {\n    for (var key in config) {\n      var binding = config[key];\n      this.keyBindings.set(key, {\n        command: binding.command,\n        args: binding.args || [],\n        preventDefault: binding.preventDefault || false\n      });\n    }\n  };\n\n  return KeyBindingService;\n}();\n\nexport { KeyBindingService };","export function getNodeLineage(node) {\n  var lineage = [];\n  var currentNode = node;\n\n  while (true) {\n    lineage.unshift(currentNode);\n\n    if (currentNode.isRoot()) {\n      return lineage;\n    }\n\n    currentNode = currentNode.getParent();\n  }\n}\nexport function findCommonLineage(node1, node2) {\n  var nodeLineage1 = getNodeLineage(node1);\n  var nodeLineage2 = getNodeLineage(node2);\n  var index = 0;\n\n  while (index < nodeLineage1.length && index < nodeLineage2.length) {\n    if (nodeLineage1[index] !== nodeLineage2[index]) {\n      break;\n    }\n\n    index++;\n  }\n\n  if (index === 0) {\n    throw new Error('No common lineage found.');\n  }\n\n  return nodeLineage1[index - 1];\n}","import { identifyLayoutNodeType } from './utility';\n\nvar NodeBreaker =\n/** @class */\nfunction () {\n  function NodeBreaker() {}\n\n  NodeBreaker.prototype.break = function (node) {\n    switch (identifyLayoutNodeType(node)) {\n      case 'Page':\n        return this.breakPageNode(node);\n\n      case 'Line':\n        return this.breakLineNode(node);\n\n      default:\n        return undefined;\n    }\n  };\n\n  NodeBreaker.prototype.breakPageNode = function (node) {\n    var height = node.getInnerHeight();\n    var cumulatedHeight = 0;\n    var blockNodes = node.getChildren();\n\n    for (var n = 0; n < blockNodes.length; n++) {\n      var blockNode = blockNodes[n];\n\n      if (cumulatedHeight + (blockNode.getHeight() - blockNode.getPaddingBottom()) > height) {\n        var newPageNode = node.clone();\n\n        for (var _i = 0, _a = node.getChildren().slice(n + 1); _i < _a.length; _i++) {\n          var blockNodeToMove = _a[_i];\n          node.removeChild(blockNodeToMove);\n          newPageNode.appendChild(blockNodeToMove);\n        }\n\n        var lastBlockNode = node.getLastChild();\n\n        if (lastBlockNode) {\n          var newBlockNode = this.breakBlockNode(lastBlockNode, height - cumulatedHeight);\n\n          if (newBlockNode) {\n            newPageNode.insertChild(newBlockNode);\n          }\n\n          if (lastBlockNode.getChildren().length === 0) {\n            node.removeChild(lastBlockNode);\n          }\n        }\n\n        return newPageNode;\n      }\n\n      cumulatedHeight += blockNode.getHeight();\n    }\n\n    return undefined;\n  };\n\n  NodeBreaker.prototype.breakBlockNode = function (node, height) {\n    var cumulatedHeight = 0;\n    var lineNodes = node.getChildren();\n\n    for (var n = 0; n < lineNodes.length; n++) {\n      var lineNode = lineNodes[n];\n\n      if (cumulatedHeight + lineNode.getHeight() > height) {\n        var newBlockNode = node.clone();\n\n        for (var _i = 0, _a = node.getChildren().slice(n); _i < _a.length; _i++) {\n          var lineNodeToMove = _a[_i];\n          node.removeChild(lineNodeToMove);\n          newBlockNode.appendChild(lineNodeToMove);\n        }\n\n        return newBlockNode;\n      }\n\n      cumulatedHeight += lineNode.getHeight();\n    }\n\n    return undefined;\n  };\n\n  NodeBreaker.prototype.breakLineNode = function (node) {\n    var width = node.getInnerWidth();\n    var cumulatedWidth = 0;\n    var inlineNodes = node.getChildren();\n\n    for (var n = 0; n < inlineNodes.length; n++) {\n      var inlineNode = inlineNodes[n];\n\n      if (cumulatedWidth + inlineNode.getTailTrimmedWidth() > width) {\n        var newLineNode = node.clone();\n\n        for (var _i = 0, _a = node.getChildren().slice(n + 1); _i < _a.length; _i++) {\n          var inlineNodeToMove = _a[_i];\n          node.removeChild(inlineNodeToMove);\n          newLineNode.appendChild(inlineNodeToMove);\n        }\n\n        var lastInlineNode = node.getLastChild();\n\n        if (lastInlineNode) {\n          var newInlineNode = this.breakInlineNode(lastInlineNode, width - cumulatedWidth, width);\n\n          if (newInlineNode) {\n            newLineNode.insertChild(newInlineNode);\n          }\n\n          if (lastInlineNode.getChildren().length === 0) {\n            node.removeChild(lastInlineNode);\n          }\n        }\n\n        return newLineNode;\n      }\n\n      cumulatedWidth += inlineNode.getWidth();\n    }\n\n    return undefined;\n  };\n\n  NodeBreaker.prototype.breakInlineNode = function (node, width, lineWidth) {\n    var cumulatedWidth = 0;\n    var atomicNodes = node.getChildren();\n\n    for (var n = 0; n < atomicNodes.length; n++) {\n      var atomicNode = atomicNodes[n];\n\n      if (cumulatedWidth + atomicNode.getTailTrimmedWidth() > width) {\n        var newInlineNode = node.clone();\n\n        for (var _i = 0, _a = node.getChildren().slice(n); _i < _a.length; _i++) {\n          var atomicNodeToMove = _a[_i];\n          node.removeChild(atomicNodeToMove);\n          newInlineNode.appendChild(atomicNodeToMove);\n        }\n\n        var nextAtomicNode = newInlineNode.getFirstChild();\n\n        if (nextAtomicNode) {\n          var newAtomicNode = this.breakAtomicNode(nextAtomicNode, lineWidth);\n\n          if (newAtomicNode) {\n            newInlineNode.appendChildAfter(newAtomicNode, nextAtomicNode);\n          }\n        }\n\n        return newInlineNode;\n      }\n\n      cumulatedWidth += atomicNode.getWidth();\n    }\n\n    return undefined;\n  };\n\n  NodeBreaker.prototype.breakAtomicNode = function (node, width) {\n    if (node.getTailTrimmedWidth() <= width) {\n      return null;\n    }\n\n    return node.breakAtWidth(width);\n  };\n\n  return NodeBreaker;\n}();\n\nexport { NodeBreaker };","import { identifyTokenType } from '../state/utility';\nimport { InlineModelNode } from './inline-node';\nvar ParserState;\n\n(function (ParserState) {\n  ParserState[ParserState[\"NewNode\"] = 0] = \"NewNode\";\n  ParserState[ParserState[\"Content\"] = 1] = \"Content\";\n})(ParserState || (ParserState = {}));\n\nvar Stack =\n/** @class */\nfunction () {\n  function Stack() {\n    this.objects = [];\n  }\n\n  Stack.prototype.push = function (object) {\n    this.objects.push(object);\n  };\n\n  Stack.prototype.pop = function () {\n    return this.objects.pop();\n  };\n\n  Stack.prototype.peek = function () {\n    return this.objects[this.objects.length - 1];\n  };\n\n  Stack.prototype.getDoc = function () {\n    if (this.objects.length === 0) {\n      throw new Error('Error parsing state.');\n    }\n\n    return this.objects[0];\n  };\n\n  return Stack;\n}();\n\nvar TokenParser =\n/** @class */\nfunction () {\n  function TokenParser(componentService) {\n    this.componentService = componentService;\n    this.parserState = ParserState.NewNode;\n    this.stack = new Stack();\n    this.contentBuffer = '';\n    this.ran = false;\n  }\n\n  TokenParser.prototype.parse = function (tokens) {\n    if (this.ran) {\n      throw new Error('Parser has already been run.');\n    }\n\n    this.tokens = tokens;\n\n    this._parse();\n\n    this.ran = true;\n    return this.rootNode;\n  };\n\n  TokenParser.prototype._parse = function () {\n    var tokens = this.tokens;\n    this.stack = new Stack();\n    var token;\n\n    for (var n = 0, nn = tokens.length; n < nn; n++) {\n      token = tokens[n];\n\n      try {\n        this.processToken(token);\n      } catch (error) {\n        error.message = \"Error at token \" + n + \": \" + error.message;\n        throw error;\n      }\n    }\n\n    this.ran = true;\n  };\n\n  TokenParser.prototype.processToken = function (token) {\n    switch (this.parserState) {\n      case ParserState.NewNode:\n        switch (identifyTokenType(token)) {\n          case 'OpenToken':\n            this.newNode(token);\n            return;\n\n          case 'ContentToken':\n            this.appendToContent(token);\n            return;\n\n          case 'CloseToken':\n            this.closeNode(token);\n            return;\n        }\n\n      case ParserState.Content:\n        switch (identifyTokenType(token)) {\n          case 'ContentToken':\n            this.appendToContent(token);\n            return;\n\n          case 'CloseToken':\n            this.closeNode(token);\n            return;\n        }\n\n      default:\n        throw new Error('Unexpected token encountered.');\n    }\n  };\n\n  TokenParser.prototype.newNode = function (token) {\n    var node = this.buildNode(token.componentId, token.partId, token.id, token.attributes);\n    var parentStackObject = this.stack.peek();\n\n    if (parentStackObject) {\n      parentStackObject.node.appendChild(node);\n    }\n\n    this.stack.push({\n      node: node\n    });\n\n    if (!this.rootNode) {\n      this.rootNode = node;\n    }\n  };\n\n  TokenParser.prototype.appendToContent = function (token) {\n    this.contentBuffer += token;\n    this.parserState = ParserState.Content;\n  };\n\n  TokenParser.prototype.closeNode = function (token) {\n    var stackObject = this.stack.pop();\n\n    if (!stackObject) {\n      throw new Error('Unexpected end of tokens encountered.');\n    }\n\n    if (stackObject.node instanceof InlineModelNode) {\n      var inlineNode = stackObject.node;\n      inlineNode.setContent(this.contentBuffer);\n    }\n\n    this.contentBuffer = '';\n    this.parserState = ParserState.NewNode;\n  };\n\n  TokenParser.prototype.buildNode = function (componentId, partId, id, attributes) {\n    var component = this.componentService.getComponent(componentId);\n\n    if (!component) {\n      throw new Error(\"Component \" + componentId + \" is not registered.\");\n    }\n\n    var node = component.buildModelNode(partId, id, attributes);\n\n    if (!node) {\n      throw new Error(\"Could not build model node from part \" + partId + \", id \" + id + \" and attributes \" + JSON.stringify(attributes) + \".\");\n    }\n\n    return node;\n  };\n\n  return TokenParser;\n}();\n\nexport { TokenParser };","import { identifyLayoutNodeType } from './utility';\n\nvar NodeJoiner =\n/** @class */\nfunction () {\n  function NodeJoiner() {}\n\n  NodeJoiner.prototype.join = function (thisNode, thatNode) {\n    if (identifyLayoutNodeType(thisNode) !== identifyLayoutNodeType(thatNode)) {\n      throw new Error('Nodes to be joined must be of the same type.');\n    }\n\n    switch (identifyLayoutNodeType(thisNode)) {\n      case 'Page':\n        this.joinPageNodes(thisNode, thatNode);\n        break;\n\n      case 'Line':\n        this.joinLineNodes(thisNode, thatNode);\n        break;\n\n      default:\n    }\n  };\n\n  NodeJoiner.prototype.joinPageNodes = function (thisNode, thatNode) {\n    var thisLastChild = thisNode.getLastChild();\n    var thatFirstChild = thatNode.getFirstChild();\n\n    if (thisLastChild && thatFirstChild && thisLastChild.getId() === thatFirstChild.getId()) {\n      this.joinBlockNodes(thisLastChild, thatFirstChild);\n    }\n\n    thatNode.getChildren().slice().forEach(function (child) {\n      thatNode.removeChild(child);\n      thisNode.appendChild(child);\n    });\n    var thatParent = thatNode.getParent();\n\n    if (thatParent) {\n      thatParent.removeChild(thatNode);\n    }\n  };\n\n  NodeJoiner.prototype.joinBlockNodes = function (thisNode, thatNode) {\n    thatNode.getChildren().slice().forEach(function (child) {\n      thatNode.removeChild(child);\n      thisNode.appendChild(child);\n    });\n    var thatParent = thatNode.getParent();\n\n    if (thatParent) {\n      thatParent.removeChild(thatNode);\n    }\n  };\n\n  NodeJoiner.prototype.joinLineNodes = function (thisNode, thatNode) {\n    var thisLastChild = thisNode.getLastChild();\n    var thatFirstChild = thatNode.getFirstChild();\n\n    if (thisLastChild && thatFirstChild && thisLastChild.getId() === thatFirstChild.getId()) {\n      this.joinInlineNodes(thisLastChild, thatFirstChild);\n    }\n\n    thatNode.getChildren().slice().forEach(function (child) {\n      thatNode.removeChild(child);\n      thisNode.appendChild(child);\n    });\n    var thatParent = thatNode.getParent();\n\n    if (thatParent) {\n      thatParent.removeChild(thatNode);\n    }\n  };\n\n  NodeJoiner.prototype.joinInlineNodes = function (thisNode, thatNode) {\n    thatNode.getChildren().slice().forEach(function (child) {\n      thatNode.removeChild(child);\n      thisNode.appendChild(child);\n    });\n    var thatParent = thatNode.getParent();\n\n    if (thatParent) {\n      thatParent.removeChild(thatNode);\n    }\n  };\n\n  return NodeJoiner;\n}();\n\nexport { NodeJoiner };","import { findCommonLineage } from '../tree/utility';\nimport { NodeBreaker } from './node-breaker';\nimport { NodeJoiner } from './node-joiner';\nimport { identifyLayoutNodeType } from './utility';\n\nvar NodeQueue =\n/** @class */\nfunction () {\n  function NodeQueue() {\n    this.lineNodes = [];\n    this.pageNodes = [];\n  }\n\n  NodeQueue.prototype.queue = function (node) {\n    switch (identifyLayoutNodeType(node)) {\n      case 'Doc':\n        this.queueDocNode(node);\n        break;\n\n      case 'Page':\n        this.queuePageNode(node);\n        break;\n\n      case 'Block':\n        this.queueBlockNode(node);\n        break;\n\n      case 'Line':\n        this.queueLineNode(node);\n        break;\n\n      case 'Inline':\n        this.queueInlineNode(node);\n        break;\n\n      case 'Atomic':\n        this.queueAtomicNode(node);\n        break;\n\n      default:\n        throw new Error('Invalid layout node type.');\n    }\n  };\n\n  NodeQueue.prototype.popLineNode = function () {\n    return this.lineNodes.shift();\n  };\n\n  NodeQueue.prototype.popPageNode = function () {\n    return this.pageNodes.shift();\n  };\n\n  NodeQueue.prototype.queueDocNode = function (node) {\n    var _this = this;\n\n    node.getChildren().forEach(function (child) {\n      return _this.queue(child);\n    });\n  };\n\n  NodeQueue.prototype.queuePageNode = function (node) {\n    var _this = this;\n\n    this.pageNodes.push(node);\n    node.getChildren().forEach(function (child) {\n      return _this.queue(child);\n    });\n  };\n\n  NodeQueue.prototype.queueBlockNode = function (node) {\n    var _this = this;\n\n    node.getChildren().forEach(function (child) {\n      return _this.queue(child);\n    });\n  };\n\n  NodeQueue.prototype.queueLineNode = function (node) {\n    this.lineNodes.push(node);\n  };\n\n  NodeQueue.prototype.queueInlineNode = function (node) {\n    this.queue(node.getParent());\n  };\n\n  NodeQueue.prototype.queueAtomicNode = function (node) {\n    this.queue(node.getParent());\n  };\n\n  return NodeQueue;\n}();\n\nvar LayoutFlower =\n/** @class */\nfunction () {\n  function LayoutFlower() {\n    this.nodeQueue = new NodeQueue();\n    this.nodeJoiner = new NodeJoiner();\n    this.nodeBreaker = new NodeBreaker();\n    this.ran = false;\n  }\n\n  LayoutFlower.prototype.flow = function (node) {\n    if (this.ran) {\n      throw new Error('Layout flower has already been run.');\n    }\n\n    this.updatedNode = node;\n    this.nodeQueue.queue(node);\n    this.flushLineNodeQueue();\n    this.flushPageNodeQueue();\n    return this.updatedNode;\n  };\n\n  LayoutFlower.prototype.flushLineNodeQueue = function () {\n    var node;\n\n    while (node = this.nodeQueue.popLineNode()) {\n      this.flowLineNode(node);\n    }\n  };\n\n  LayoutFlower.prototype.flushPageNodeQueue = function () {\n    var node;\n\n    while (node = this.nodeQueue.popPageNode()) {\n      this.flowPageNode(node);\n    }\n  };\n\n  LayoutFlower.prototype.flowPageNode = function (node) {\n    if (node.isFlowed()) {\n      return;\n    }\n\n    if (!node.getParent()) {\n      return;\n    }\n\n    if (this.joinNextPageNode(node)) {\n      this.nodeQueue.queue(node);\n      return;\n    }\n\n    var pageNode = node;\n\n    while (pageNode) {\n      this.recordNodeAsUpdated(pageNode);\n      var newPageNode = this.nodeBreaker.break(pageNode);\n\n      if (!newPageNode) {\n        pageNode.markAsFlowed();\n        break;\n      }\n\n      pageNode.getParent().appendChildAfter(newPageNode, pageNode);\n      pageNode.markAsFlowed();\n      pageNode = newPageNode;\n    }\n  };\n\n  LayoutFlower.prototype.flowLineNode = function (node) {\n    if (node.isFlowed()) {\n      return;\n    }\n\n    if (!node.getParent()) {\n      return;\n    }\n\n    if (this.joinNextLineNode(node)) {\n      this.nodeQueue.queue(node);\n      return;\n    }\n\n    var lineNode = node;\n\n    while (lineNode) {\n      this.recordNodeAsUpdated(lineNode);\n      var newLineNode = this.nodeBreaker.break(lineNode);\n\n      if (!newLineNode) {\n        lineNode.markAsFlowed();\n        break;\n      }\n\n      lineNode.getParent().appendChildAfter(newLineNode, lineNode);\n      lineNode.markAsFlowed();\n      lineNode = newLineNode;\n    }\n\n    var parentNode = node.getParent();\n\n    while (parentNode) {\n      if (identifyLayoutNodeType(parentNode) === 'Page') {\n        this.nodeQueue.queue(node.getParent().getParent());\n        break;\n      }\n\n      parentNode = parentNode.getParent();\n    }\n  };\n\n  LayoutFlower.prototype.joinNextPageNode = function (node) {\n    var nextNode = node.getNextSibling();\n\n    if (!nextNode) {\n      return false;\n    }\n\n    var nextBlockChild = node.getFirstChild();\n\n    if (!nextBlockChild) {\n      return false;\n    }\n\n    var nextLineNode = nextBlockChild.getFirstChild();\n\n    if (!nextLineNode) {\n      return false;\n    }\n\n    if (node.getContentHeight() + nextLineNode.getHeight() > node.getHeight()) {\n      return false;\n    }\n\n    this.nodeJoiner.join(node, nextNode);\n    return true;\n  };\n\n  LayoutFlower.prototype.joinNextLineNode = function (node) {\n    var nextNode = node.getNextSibling();\n\n    if (!nextNode) {\n      return false;\n    }\n\n    var nextInlineChild = nextNode.getFirstChild();\n\n    if (!nextInlineChild) {\n      return false;\n    }\n\n    var nextAtomicChild = nextInlineChild.getFirstChild();\n\n    if (!nextAtomicChild) {\n      return false;\n    }\n\n    if (node.getContentWidth() + nextAtomicChild.getWidth() > node.getWidth()) {\n      return false;\n    }\n\n    this.nodeJoiner.join(node, nextNode);\n    return true;\n  };\n\n  LayoutFlower.prototype.recordNodeAsUpdated = function (node) {\n    this.updatedNode = findCommonLineage(node, this.updatedNode);\n  };\n\n  LayoutFlower.prototype.getNodeLineage = function (node) {\n    var lineage = [];\n    var currentNode = node;\n\n    while (true) {\n      lineage.unshift(currentNode);\n\n      if (currentNode.isRoot()) {\n        return lineage;\n      }\n\n      currentNode = currentNode.getParent();\n    }\n  };\n\n  return LayoutFlower;\n}();\n\nexport { LayoutFlower };","import { BlockLayoutNode } from './block-node';\nimport { DocLayoutNode } from './doc-node';\n\nvar LayoutTreeBuilder =\n/** @class */\nfunction () {\n  function LayoutTreeBuilder(componentService) {\n    this.componentService = componentService;\n    this.ran = false;\n  }\n\n  LayoutTreeBuilder.prototype.buildTree = function (renderNode) {\n    if (this.ran) {\n      throw new Error('Tree builder has already been run.');\n    }\n\n    this.rootRenderNode = renderNode;\n\n    this._buildTree();\n\n    this.ran = true;\n    return this.rootLayoutNode;\n  };\n\n  LayoutTreeBuilder.prototype._buildTree = function () {\n    this.rootLayoutNode = this.buildNode(this.rootRenderNode);\n    this.ran = true;\n  };\n\n  LayoutTreeBuilder.prototype.buildNode = function (renderNode) {\n    var _this = this;\n\n    var component = this.componentService.getComponent(renderNode.getComponentId());\n\n    if (!component) {\n      throw new Error(\"Component \" + renderNode.getComponentId() + \" is not registered.\");\n    }\n\n    var layoutNode = component.buildLayoutNode(renderNode);\n\n    if (!layoutNode) {\n      throw new Error(\"Could not build layout node from render node \" + renderNode.getId() + \".\");\n    }\n\n    if (!renderNode.isLeaf() && !layoutNode.isLeaf()) {\n      var childLayoutNodes = renderNode.getChildren().map(function (childRenderNode) {\n        return _this.buildNode(childRenderNode);\n      });\n\n      if (layoutNode instanceof DocLayoutNode) {\n        var pageLayoutNode_1 = this.componentService.getPageComponent().buildPageLayoutNode();\n        childLayoutNodes.forEach(function (childLayoutNode) {\n          pageLayoutNode_1.appendChild(childLayoutNode);\n        });\n        layoutNode.appendChild(pageLayoutNode_1);\n      } else if (layoutNode instanceof BlockLayoutNode) {\n        var lineLayoutNode_1 = this.componentService.getLineComponent().buildLineLayoutNode();\n        childLayoutNodes.forEach(function (childLayoutNode) {\n          lineLayoutNode_1.appendChild(childLayoutNode);\n        });\n        layoutNode.appendChild(lineLayoutNode_1);\n      } else {\n        childLayoutNodes.forEach(function (childLayoutNode) {\n          layoutNode.appendChild(childLayoutNode);\n        });\n      }\n    }\n\n    return layoutNode;\n  };\n\n  return LayoutTreeBuilder;\n}();\n\nexport { LayoutTreeBuilder };","import { EventEmitter } from '../event/emitter';\nimport { LayoutFlower } from './flower';\nimport { NodeJoiner } from './node-joiner';\nimport { LayoutTreeBuilder } from './tree-builder';\nimport { identifyLayoutNodeType } from './utility';\n\nvar LayoutState =\n/** @class */\nfunction () {\n  function LayoutState(componentService, renderService) {\n    var _this = this;\n\n    this.componentService = componentService;\n    this.renderService = renderService;\n    this.didUpdateLayoutStateEventEmitter = new EventEmitter();\n\n    this.handleDidUpdateRenderStateEvent = function (event) {\n      var treeBuilder = new LayoutTreeBuilder(_this.componentService);\n      var updatedNode = treeBuilder.buildTree(event.node);\n\n      var node = _this.docNode.findDescendant(event.node.getId());\n\n      if (!node) {\n        throw new Error(\"Render node \" + event.node.getId() + \" is not found.\");\n      }\n\n      _this.deduplicateNode(node);\n\n      node.onDidUpdate(updatedNode);\n      var flower = new LayoutFlower();\n      var flowedNode = flower.flow(node);\n\n      _this.didUpdateLayoutStateEventEmitter.emit({\n        node: flowedNode\n      });\n    };\n\n    var docRenderNode = renderService.getDocNode();\n    var treeBuilder = new LayoutTreeBuilder(componentService);\n    this.docNode = treeBuilder.buildTree(docRenderNode);\n    var flower = new LayoutFlower();\n    flower.flow(this.docNode);\n    renderService.onDidUpdateRenderState(this.handleDidUpdateRenderStateEvent);\n  }\n\n  LayoutState.prototype.onDidUpdateLayoutState = function (listener) {\n    this.didUpdateLayoutStateEventEmitter.on(listener);\n  };\n\n  LayoutState.prototype.getDocNode = function () {\n    return this.docNode;\n  };\n\n  LayoutState.prototype.deduplicateNode = function (node) {\n    switch (identifyLayoutNodeType(node)) {\n      case 'Inline':\n        this.deduplicateInlineNode(node);\n        break;\n\n      case 'Block':\n        this.deduplicateBlockNode(node);\n        break;\n    }\n  };\n\n  LayoutState.prototype.deduplicateInlineNode = function (node) {\n    var joiner = new NodeJoiner();\n    var nextNode;\n    var lineNode = node.getParent();\n\n    while ((nextNode = node.getNextSiblingAllowCrossParent()) && nextNode.getId() === node.getId()) {\n      var nextLineNode = nextNode.getParent();\n      joiner.join(lineNode, nextLineNode);\n    }\n  };\n\n  LayoutState.prototype.deduplicateBlockNode = function (node) {\n    var joiner = new NodeJoiner();\n    var nextNode;\n    var pageNode = node.getParent();\n\n    while ((nextNode = node.getNextSiblingAllowCrossParent()) && nextNode.getId() === node.getId()) {\n      var nextPageNode = nextNode.getParent();\n      joiner.join(pageNode, nextPageNode);\n    }\n  };\n\n  return LayoutState;\n}();\n\nexport { LayoutState };","import { LayoutState } from './state';\n\nvar LayoutService =\n/** @class */\nfunction () {\n  function LayoutService(componentService, renderService) {\n    this.state = new LayoutState(componentService, renderService);\n  }\n\n  LayoutService.prototype.onDidUpdateLayoutState = function (listener) {\n    this.state.onDidUpdateLayoutState(listener);\n  };\n\n  LayoutService.prototype.getDocNode = function () {\n    return this.state.getDocNode();\n  };\n\n  LayoutService.prototype.resolvePosition = function (offset) {\n    return this.state.getDocNode().resolvePosition(offset);\n  };\n\n  LayoutService.prototype.resolvePageRects = function (from, to) {\n    return this.state.getDocNode().resolvePageRects(from, to);\n  };\n\n  return LayoutService;\n}();\n\nexport { LayoutService };","import { CLOSE_TOKEN } from './token';\nexport function identifyTokenType(token) {\n  if (token === CLOSE_TOKEN) {\n    return 'CloseToken';\n  }\n\n  if (typeof token === 'string') {\n    return 'ContentToken';\n  }\n\n  if (typeof token === 'object' && token.hasOwnProperty('componentId')) {\n    return 'OpenToken';\n  }\n\n  throw new Error(\"Failed to identify token type: \" + token + \".\");\n}","var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport { CLOSE_TOKEN } from './token';\nvar TokenizerState;\n\n(function (TokenizerState) {\n  TokenizerState[TokenizerState[\"NewToken\"] = 0] = \"NewToken\";\n  TokenizerState[TokenizerState[\"NewTag\"] = 1] = \"NewTag\";\n  TokenizerState[TokenizerState[\"Tag\"] = 2] = \"Tag\";\n  TokenizerState[TokenizerState[\"TagAttributes\"] = 3] = \"TagAttributes\";\n  TokenizerState[TokenizerState[\"TagAttributesString\"] = 4] = \"TagAttributesString\";\n  TokenizerState[TokenizerState[\"TagAttributesStringEscape\"] = 5] = \"TagAttributesStringEscape\";\n  TokenizerState[TokenizerState[\"CloseTag\"] = 6] = \"CloseTag\";\n})(TokenizerState || (TokenizerState = {}));\n\nvar Tokenizer =\n/** @class */\nfunction () {\n  function Tokenizer() {\n    this.tokenizerState = TokenizerState.NewToken;\n    this.tagBuffer = '';\n    this.attributesBuffer = '';\n    this.ran = false;\n  }\n\n  Tokenizer.prototype.tokenize = function (markup) {\n    if (this.ran) {\n      throw new Error('Tokenizer has already been run.');\n    }\n\n    this.markup = markup;\n\n    this._tokenize();\n\n    this.ran = true;\n    return this.tokens;\n  };\n\n  Tokenizer.prototype._tokenize = function () {\n    this.tokens = [];\n    var markup = this.markup;\n    var char;\n\n    for (var n = 0, nn = markup.length; n < nn; n++) {\n      char = markup[n];\n\n      switch (this.tokenizerState) {\n        case TokenizerState.NewToken:\n          if (/</.test(char)) {\n            this.newTag(char);\n            break;\n          }\n\n          this.appendChar(char);\n          break;\n\n        case TokenizerState.NewTag:\n          if (/A-Z/.test(char)) {\n            this.appendCharToTag(char);\n            break;\n          }\n\n          if (/\\//.test(char)) {\n            this.closeTag(char);\n            break;\n          }\n\n        case TokenizerState.Tag:\n          if (/[A-Za-z]/.test(char)) {\n            this.appendCharToTag(char);\n            break;\n          }\n\n          if (/{/.test(char)) {\n            this.newAttributes(char);\n            break;\n          }\n\n        case TokenizerState.TagAttributes:\n          if (/\"/.test(char)) {\n            this.newAttributesString(char);\n            break;\n          }\n\n          if (/>/.test(char)) {\n            this.endTag(char);\n            break;\n          }\n\n          this.appendCharToAttributes(char);\n          break;\n\n        case TokenizerState.TagAttributesString:\n          if (/\"/.test(char)) {\n            this.endAttributesString(char);\n            break;\n          }\n\n          if (/\\\\/.test(char)) {\n            this.escapeNextAttributesStringChar(char);\n            break;\n          }\n\n          this.appendCharToAttributes(char);\n          break;\n\n        case TokenizerState.TagAttributesStringEscape:\n          this.appendCharToAttributes(char);\n          break;\n\n        case TokenizerState.CloseTag:\n          if (/>/.test(char)) {\n            this.endCloseTag(char);\n            break;\n          }\n\n        default:\n          throw new Error(\"Unexpected character \" + char + \" at offset \" + n + \".\");\n      }\n    }\n  };\n\n  Tokenizer.prototype.newTag = function (char) {\n    this.tokenizerState = TokenizerState.NewTag;\n  };\n\n  Tokenizer.prototype.appendChar = function (char) {\n    this.tokens.push(char);\n  };\n\n  Tokenizer.prototype.appendCharToTag = function (char) {\n    this.tagBuffer += char;\n    this.tokenizerState = TokenizerState.Tag;\n  };\n\n  Tokenizer.prototype.newAttributes = function (char) {\n    this.attributesBuffer += char;\n    this.tokenizerState = TokenizerState.TagAttributes;\n  };\n\n  Tokenizer.prototype.appendCharToAttributes = function (char) {\n    this.attributesBuffer += char;\n\n    if (this.tokenizerState === TokenizerState.TagAttributesStringEscape) {\n      this.tokenizerState = TokenizerState.TagAttributesString;\n    }\n  };\n\n  Tokenizer.prototype.newAttributesString = function (char) {\n    this.attributesBuffer += char;\n    this.tokenizerState = TokenizerState.TagAttributesString;\n  };\n\n  Tokenizer.prototype.endTag = function (char) {\n    var _a;\n\n    var id;\n    var attributes;\n\n    try {\n      _a = JSON.parse(this.attributesBuffer), (id = _a.id, _a), attributes = __rest(_a, [\"id\"]);\n    } catch (error) {\n      throw new Error(\"Invalid attributes JSON: \" + this.attributesBuffer + \".\");\n    }\n\n    if (!id) {\n      throw new Error(\"Missing id in attributes JSON: \" + this.attributesBuffer + \".\");\n    }\n\n    if (!this.tagBuffer) {\n      throw new Error('Open tag type cannot be empty.');\n    }\n\n    if (this.tagBuffer === 'Doc') {\n      id = 'doc';\n    }\n\n    var _b = this.tagBuffer.split('.', 1),\n        componentId = _b[0],\n        partId = _b[1];\n\n    if (!partId) {\n      partId = componentId;\n    }\n\n    this.tokens.push({\n      componentId: componentId,\n      partId: partId,\n      id: id,\n      attributes: attributes\n    });\n    this.attributesBuffer = '';\n    this.tagBuffer = '';\n    this.tokenizerState = TokenizerState.NewToken;\n  };\n\n  Tokenizer.prototype.endAttributesString = function (char) {\n    this.attributesBuffer += char;\n    this.tokenizerState = TokenizerState.TagAttributes;\n  };\n\n  Tokenizer.prototype.escapeNextAttributesStringChar = function (char) {\n    this.tokenizerState = TokenizerState.TagAttributesStringEscape;\n  };\n\n  Tokenizer.prototype.closeTag = function (char) {\n    this.tokenizerState = TokenizerState.CloseTag;\n  };\n\n  Tokenizer.prototype.endCloseTag = function (char) {\n    this.tokens.push(CLOSE_TOKEN);\n    this.tokenizerState = TokenizerState.NewToken;\n  };\n\n  return Tokenizer;\n}();\n\nexport { Tokenizer };","import { EventEmitter } from '../event/emitter';\nimport { identifyTokenType } from '../state/utility';\nimport { findCommonLineage } from '../tree/utility';\nimport { TokenParser } from './parser';\n\nvar ModelState =\n/** @class */\nfunction () {\n  function ModelState(componentService, stateService) {\n    var _this = this;\n\n    this.componentService = componentService;\n    this.stateService = stateService;\n    this.didUpdateModelStateEventEmitter = new EventEmitter();\n\n    this.handleDidUpdateStateEvent = function (event) {\n      var wrappedDepth = _this.findWrappedDepth(_this.stateService.getTokens(), event.afterFrom, event.afterTo);\n\n      var node = _this.findNodeContainingRange(event.beforeFrom, event.beforeTo, wrappedDepth);\n\n      var updatedTokens = _this.findNodeTokenRange(_this.stateService.getTokens(), node.getId(), event.afterFrom, event.afterTo); // TODO: When there is block insertion or deletion, it\n      // results in reparse of the full token state. While this\n      // is unnoticeable for small documents, it gets noticeably\n      // slow as the documents grows large. There is much room\n      // for optimization, by only reparsing the part of the token\n      // state that got updated.\n\n\n      var parser = new TokenParser(_this.componentService);\n      var updatedNode = parser.parse(updatedTokens);\n      node.onDidUpdate(updatedNode);\n\n      _this.didUpdateModelStateEventEmitter.emit({\n        node: node\n      });\n    };\n\n    var tokens = stateService.getTokens();\n    var parser = new TokenParser(componentService);\n    this.docNode = parser.parse(tokens);\n    stateService.onDidUpdateState(this.handleDidUpdateStateEvent);\n  }\n\n  ModelState.prototype.onDidUpdateModelState = function (listener) {\n    this.didUpdateModelStateEventEmitter.on(listener);\n  };\n\n  ModelState.prototype.getDocNode = function () {\n    return this.docNode;\n  };\n\n  ModelState.prototype.findUpdatedNode = function (tokens, beforeFrom, beforeTo, afterFrom, afterTo) {\n    var beforeFromPosition = this.docNode.resolvePosition(beforeFrom).getLeaf();\n    var beforeToPosition = this.docNode.resolvePosition(beforeTo).getLeaf();\n    var beforeNode = findCommonLineage(beforeFromPosition.getNode(), beforeToPosition.getNode());\n    var afterTokenRange = this.findParentNodeOfTokenRange(tokens, afterFrom, afterTo);\n    var afterNodeID = tokens[afterTokenRange[0]].id;\n    var afterNode = this.findNodeInLineageById(beforeFromPosition.getNode(), afterNodeID);\n    var node = findCommonLineage(beforeNode, afterNode);\n    var updatedTokens = this.findNodeTokenRange(tokens, node.getId(), afterTokenRange[0], afterTokenRange[1]);\n    var parser = new TokenParser(this.componentService);\n    var updatedNode = parser.parse(updatedTokens);\n    return [node, updatedNode];\n  };\n\n  ModelState.prototype.findWrappedDepth = function (tokens, from, to) {\n    var depth = 0;\n    var maxDepth = 0;\n    var position = from;\n    var token;\n\n    while (position < to) {\n      token = tokens[position];\n      position++;\n\n      switch (identifyTokenType(token)) {\n        case 'OpenToken':\n          depth--;\n          break;\n\n        case 'CloseToken':\n          depth++;\n          break;\n      }\n\n      maxDepth = Math.max(maxDepth, depth);\n    }\n\n    return maxDepth;\n  };\n\n  ModelState.prototype.findNodeContainingRange = function (from, to, wrappedDepth) {\n    var fromPosition = this.docNode.resolvePosition(from).getLeaf();\n    var toPosition = this.docNode.resolvePosition(to).getLeaf();\n\n    for (var n = 0; n < wrappedDepth; n++) {\n      fromPosition = fromPosition.getParent();\n      toPosition = toPosition.getParent();\n    }\n\n    return findCommonLineage(fromPosition.getNode(), toPosition.getNode());\n  };\n\n  ModelState.prototype.findParentNodeOfTokenRange = function (tokens, hintFrom, hintTo) {\n    var depthPeak = 0;\n    var depth = 0;\n    tokens.slice(hintFrom, hintTo).forEach(function (token) {\n      switch (identifyTokenType(token)) {\n        case 'OpenToken':\n          depth--;\n          break;\n\n        case 'CloseToken':\n          depth++;\n          break;\n      }\n\n      if (depth > depthPeak) {\n        depthPeak = depth;\n      }\n    });\n    var from = hintFrom;\n    var opensNeeded = depthPeak + 1;\n    var token;\n\n    while (opensNeeded > 0 && from > 0) {\n      from--;\n      token = tokens[from];\n\n      switch (identifyTokenType(token)) {\n        case 'OpenToken':\n          opensNeeded--;\n          break;\n\n        case 'CloseToken':\n          opensNeeded++;\n          break;\n      }\n    }\n\n    var to = hintTo;\n    var closesNeeded = depthPeak + 1;\n    var tokensLength = tokens.length;\n\n    while (closesNeeded > 0 && to < tokensLength) {\n      to++;\n      token = tokens[to - 1];\n\n      switch (identifyTokenType(token)) {\n        case 'OpenToken':\n          closesNeeded++;\n          break;\n\n        case 'CloseToken':\n          closesNeeded--;\n          break;\n      }\n    }\n\n    return [from, to];\n  };\n\n  ModelState.prototype.findNodeInLineageById = function (node, id) {\n    if (node.getId() === id) {\n      return node;\n    }\n\n    if (node.isRoot()) {\n      throw new Error(\"Node \" + id + \" is not found in lineage.\");\n    }\n\n    return this.findNodeInLineageById(node.getParent(), id);\n  };\n\n  ModelState.prototype.findNodeTokenRange = function (tokens, nodeId, hintFrom, hintTo) {\n    var _a = this.findNodeOpenTokenPositionAndDepth(tokens, nodeId, hintFrom),\n        from = _a[0],\n        depth = _a[1];\n\n    var to = this.findNodeCloseTokenPosition(tokens, hintTo, depth);\n    return tokens.slice(from, to);\n  };\n\n  ModelState.prototype.findNodeOpenTokenPositionAndDepth = function (tokens, nodeId, hintPosition) {\n    var position = hintPosition;\n    var depth = 0;\n    var token;\n\n    while (position >= 0) {\n      position--;\n      token = tokens[position];\n\n      switch (identifyTokenType(token)) {\n        case 'OpenToken':\n          depth--;\n\n          if (token.id === nodeId) {\n            return [position, depth];\n          }\n\n          break;\n\n        case 'CloseToken':\n          depth++;\n          break;\n      }\n    }\n\n    return [position, depth];\n  };\n\n  ModelState.prototype.findNodeCloseTokenPosition = function (tokens, hintPosition, depth) {\n    var tokensLength = tokens.length;\n    var position = hintPosition;\n    var currentDepth = depth;\n    var token;\n\n    while (position < tokensLength) {\n      token = tokens[position];\n      position++;\n\n      switch (identifyTokenType(token)) {\n        case 'OpenToken':\n          currentDepth--;\n          break;\n\n        case 'CloseToken':\n          currentDepth++;\n\n          if (currentDepth >= 0) {\n            return position;\n          }\n\n          break;\n      }\n    }\n\n    return position;\n  };\n\n  return ModelState;\n}();\n\nexport { ModelState };","import { ModelState } from './state';\n\nvar ModelService =\n/** @class */\nfunction () {\n  function ModelService(componentService, stateService) {\n    this.state = new ModelState(componentService, stateService);\n  }\n\n  ModelService.prototype.onDidUpdateModelState = function (listener) {\n    this.state.onDidUpdateModelState(listener);\n  };\n\n  ModelService.prototype.getDocNode = function () {\n    return this.state.getDocNode();\n  };\n\n  ModelService.prototype.toDOM = function (from, to) {\n    return this.state.getDocNode().toDOM(from, to);\n  };\n\n  ModelService.prototype.fromDOM = function (domNodes) {\n    return [this.getDocNode()];\n  };\n\n  ModelService.prototype.resolvePosition = function (offset) {\n    return this.state.getDocNode().resolvePosition(offset);\n  };\n\n  return ModelService;\n}();\n\nexport { ModelService };","var RenderTreeBuilder =\n/** @class */\nfunction () {\n  function RenderTreeBuilder(componentService) {\n    this.componentService = componentService;\n    this.ran = false;\n  }\n\n  RenderTreeBuilder.prototype.buildTree = function (modelNode) {\n    if (this.ran) {\n      throw new Error('Tree builder has already been run.');\n    }\n\n    this.rootModelNode = modelNode;\n\n    this._buildTree();\n\n    this.ran = true;\n    return this.rootRenderNode;\n  };\n\n  RenderTreeBuilder.prototype._buildTree = function () {\n    this.rootRenderNode = this.buildNode(this.rootModelNode);\n    this.ran = true;\n  };\n\n  RenderTreeBuilder.prototype.buildNode = function (modelNode) {\n    var _this = this;\n\n    var component = this.componentService.getComponent(modelNode.getComponentId());\n\n    if (!component) {\n      throw new Error(\"Component \" + modelNode.getComponentId() + \" is not registered.\");\n    }\n\n    var renderNode = component.buildRenderNode(modelNode);\n\n    if (!renderNode) {\n      throw new Error(\"Could not build render node from model node \" + modelNode.getId() + \".\");\n    }\n\n    if (!modelNode.isLeaf() && !renderNode.isLeaf()) {\n      modelNode.getChildren().forEach(function (childModelNode) {\n        renderNode.appendChild(_this.buildNode(childModelNode));\n      });\n    }\n\n    return renderNode;\n  };\n\n  return RenderTreeBuilder;\n}();\n\nexport { RenderTreeBuilder };","import { EventEmitter } from '../event/emitter';\nimport { RenderTreeBuilder } from './tree-builder';\n\nvar RenderState =\n/** @class */\nfunction () {\n  function RenderState(componentService, modelService) {\n    var _this = this;\n\n    this.componentService = componentService;\n    this.modelService = modelService;\n    this.didUpdateRenderStateEventEmitter = new EventEmitter();\n\n    this.handleDidUpdateModelStateEvent = function (event) {\n      var treeBuilder = new RenderTreeBuilder(_this.componentService);\n      var updatedNode = treeBuilder.buildTree(event.node);\n\n      var node = _this.docNode.findDescendant(event.node.getId());\n\n      if (!node) {\n        throw new Error(\"Render node \" + event.node.getId() + \" is not found.\");\n      }\n\n      node.onDidUpdate(updatedNode);\n\n      _this.didUpdateRenderStateEventEmitter.emit({\n        node: node\n      });\n    };\n\n    var docModelNode = modelService.getDocNode();\n    var treeBuilder = new RenderTreeBuilder(componentService);\n    this.docNode = treeBuilder.buildTree(docModelNode);\n    modelService.onDidUpdateModelState(this.handleDidUpdateModelStateEvent);\n  }\n\n  RenderState.prototype.onDidUpdateRenderState = function (listener) {\n    this.didUpdateRenderStateEventEmitter.on(listener);\n  };\n\n  RenderState.prototype.getDocNode = function () {\n    return this.docNode;\n  };\n\n  return RenderState;\n}();\n\nexport { RenderState };","import { RenderState } from './state';\n\nvar RenderService =\n/** @class */\nfunction () {\n  function RenderService(componentService, modelService) {\n    this.state = new RenderState(componentService, modelService);\n  }\n\n  RenderService.prototype.onDidUpdateRenderState = function (listener) {\n    this.state.onDidUpdateRenderState(listener);\n  };\n\n  RenderService.prototype.getDocNode = function () {\n    return this.state.getDocNode();\n  };\n\n  RenderService.prototype.getDocSize = function () {\n    return this.state.getDocNode().getSize();\n  };\n\n  RenderService.prototype.convertOffsetToModelOffset = function (offset) {\n    return this.state.getDocNode().convertOffsetToModelOffset(offset);\n  };\n\n  RenderService.prototype.convertModelOffsetToOffset = function (modelOffset) {\n    return this.state.getDocNode().convertModelOffsetToOffset(modelOffset);\n  };\n\n  RenderService.prototype.resolvePosition = function (offset) {\n    return this.state.getDocNode().resolvePosition(offset);\n  };\n\n  RenderService.prototype.getStylesBetween = function (from, to) {\n    var styles = {};\n    var docNode = this.state.getDocNode();\n    this.extractStyle(styles, docNode, from, to);\n    return styles;\n  };\n\n  RenderService.prototype.extractStyle = function (styles, node, from, to) {\n    var _this = this;\n\n    if (from > to) {\n      return;\n    }\n\n    var componentStyles = styles[node.getComponentId()] = styles[node.getComponentId()] || {};\n    var partStyles = componentStyles[node.getPartId()] = componentStyles[node.getPartId()] || [];\n    partStyles.push(node.getStyle());\n    var position = 0;\n\n    if (node.isLeaf()) {\n      return;\n    }\n\n    node.getChildren().forEach(function (child) {\n      var childSize = child.getSize();\n\n      if (0 <= to - position && from - position <= childSize) {\n        var childFrom = Math.max(0, Math.min(childSize, from - position));\n        var childTo = Math.max(0, Math.min(childSize, to - position));\n\n        _this.extractStyle(styles, child, childFrom, childTo);\n      }\n\n      position += childSize;\n    });\n  };\n\n  return RenderService;\n}();\n\nexport { RenderService };","var ServiceRegistry =\n/** @class */\nfunction () {\n  function ServiceRegistry() {\n    this.services = {};\n  }\n\n  ServiceRegistry.prototype.registerService = function (key, service) {\n    this.services[key] = service;\n  };\n\n  ServiceRegistry.prototype.getService = function (key) {\n    var service = this.services[key];\n\n    if (!service) {\n      throw new Error(\"Service \" + key + \" is not registered.\");\n    }\n\n    return service;\n  };\n\n  return ServiceRegistry;\n}();\n\nexport { ServiceRegistry };","import { EventEmitter } from '../event/emitter';\nimport { Tokenizer } from './tokenizer';\nimport { AppliedDeleteOperation, AppliedInsertOperation, AppliedTransformation, DeleteOperation, InsertOperation } from './transformation';\n\nvar State =\n/** @class */\nfunction () {\n  function State(cursorService, initialMarkup) {\n    this.cursorService = cursorService;\n    this.didApplyTransformationEventEmitter = new EventEmitter();\n    this.didUpdateStateEventEmitter = new EventEmitter();\n    var tokenizer = new Tokenizer();\n    this.tokens = tokenizer.tokenize(initialMarkup);\n  }\n\n  State.prototype.onDidApplyTransformation = function (listener) {\n    this.didApplyTransformationEventEmitter.on(listener);\n  };\n\n  State.prototype.onDidUpdateState = function (listener) {\n    this.didUpdateStateEventEmitter.on(listener);\n  };\n\n  State.prototype.getTokens = function () {\n    return this.tokens;\n  };\n\n  State.prototype.applyTransformations = function (transformations) {\n    var _this = this;\n\n    this.assertInitialized();\n    var appliedTransformations = transformations.map(function (transformation) {\n      var appliedTransformation = _this.applyTransformation(transformation);\n\n      _this.didApplyTransformationEventEmitter.emit({\n        transformation: transformation,\n        appliedTransformation: appliedTransformation\n      });\n\n      return appliedTransformation;\n    });\n    var transformedRange = this.findTransformedRange(appliedTransformations);\n\n    if (transformedRange) {\n      this.didUpdateStateEventEmitter.emit({\n        beforeFrom: transformedRange.beforeFrom,\n        beforeTo: transformedRange.beforeTo,\n        afterFrom: transformedRange.afterFrom,\n        afterTo: transformedRange.afterTo\n      });\n    }\n\n    return appliedTransformations;\n  };\n\n  State.prototype.unapplyTransformations = function (appliedTransformations) {\n    var _this = this;\n\n    this.assertInitialized();\n    appliedTransformations.slice().reverse().forEach(function (appliedTransformation) {\n      return _this.unapplyTransformation(appliedTransformation);\n    });\n    var transformedRange = this.findTransformedRange(appliedTransformations);\n\n    if (transformedRange) {\n      this.didUpdateStateEventEmitter.emit({\n        beforeFrom: transformedRange.beforeFrom,\n        beforeTo: transformedRange.beforeTo,\n        afterFrom: transformedRange.afterFrom,\n        afterTo: transformedRange.afterTo\n      });\n    }\n  };\n\n  State.prototype.applyTransformation = function (transformation) {\n    var _this = this;\n\n    var cursorState = this.cursorService.getCursorState();\n    var appliedTransformation = new AppliedTransformation(transformation, cursorState.anchor, cursorState.head, cursorState.leftLock);\n    var operations = transformation.getOperations();\n    var offsetAdjustments = [];\n    operations.forEach(function (unadjustedOperation) {\n      var _a;\n\n      var operation = unadjustedOperation.adjustOffset(offsetAdjustments);\n\n      if (operation instanceof InsertOperation) {\n        (_a = _this.tokens).splice.apply(_a, [operation.getAt(), 0].concat(operation.getTokens()));\n\n        var appliedOperation = new AppliedInsertOperation(operation.getAt(), operation.getTokens());\n        appliedTransformation.addOperation(appliedOperation);\n      } else if (operation instanceof DeleteOperation) {\n        var deletedTokens = _this.tokens.splice(operation.getFrom(), operation.getTo() - operation.getFrom());\n\n        var appliedOperation = new AppliedDeleteOperation(operation.getFrom(), deletedTokens);\n        appliedTransformation.addOperation(appliedOperation);\n      } else {\n        throw new Error('Unknown transformation operation encountered.');\n      }\n\n      offsetAdjustments.push(operation.getOffsetAdjustment());\n    });\n    var cursorAnchor = transformation.getCursorAnchor();\n    var cursorHead = transformation.getCursorHead();\n    this.cursorService.setCursorState({\n      anchor: cursorAnchor === null ? cursorState.anchor : cursorAnchor,\n      head: cursorHead === null ? cursorState.head : cursorHead,\n      leftLock: transformation.getCursorLockLeft()\n    });\n    return appliedTransformation;\n  };\n\n  State.prototype.unapplyTransformation = function (appliedTransformation) {\n    var _this = this;\n\n    appliedTransformation.getOperations().slice().reverse().forEach(function (appliedOperation) {\n      var _a;\n\n      if (appliedOperation instanceof AppliedInsertOperation) {\n        _this.tokens.splice(appliedOperation.getAt(), appliedOperation.getTokens().length);\n      } else if (appliedOperation instanceof AppliedDeleteOperation) {\n        (_a = _this.tokens).splice.apply(_a, [appliedOperation.getAt(), 0].concat(appliedOperation.getTokens()));\n      } else {\n        throw new Error('Unknown applied transformation operation encountered.');\n      }\n    });\n    this.cursorService.setCursorState({\n      anchor: appliedTransformation.getOriginalCursorAnchor(),\n      head: appliedTransformation.getOriginalCursorHead(),\n      leftLock: appliedTransformation.getOriginalCursorLockLeft()\n    });\n  };\n\n  State.prototype.findTransformedRange = function (appliedTransformations) {\n    var beforeFrom = undefined;\n    var beforeTo = undefined;\n    var afterFrom = undefined;\n    var afterTo = undefined;\n    appliedTransformations.forEach(function (appliedTransformation) {\n      var transformedRange = appliedTransformation.getTransformedRange();\n\n      if (transformedRange) {\n        if (beforeFrom === undefined || transformedRange.beforeFrom < beforeFrom) {\n          beforeFrom = transformedRange.beforeFrom;\n        }\n\n        if (beforeTo === undefined || transformedRange.beforeTo > beforeTo) {\n          beforeTo = transformedRange.beforeTo;\n        }\n\n        if (afterFrom === undefined || transformedRange.afterFrom < afterFrom) {\n          afterFrom = transformedRange.afterFrom;\n        }\n\n        if (afterTo === undefined || transformedRange.afterTo < afterTo) {\n          afterTo = transformedRange.afterTo;\n        }\n      }\n    });\n\n    if (beforeFrom === undefined) {\n      return undefined;\n    }\n\n    return {\n      beforeFrom: beforeFrom,\n      beforeTo: beforeTo,\n      afterFrom: afterFrom,\n      afterTo: afterTo\n    };\n  };\n\n  State.prototype.assertInitialized = function () {\n    if (!this.tokens) {\n      throw new Error('State is not initialized.');\n    }\n  };\n\n  return State;\n}();\n\nexport { State };","import { State } from './state';\n\nvar StateService =\n/** @class */\nfunction () {\n  function StateService(cursorService, initialMarkup) {\n    this.state = new State(cursorService, initialMarkup);\n  }\n\n  StateService.prototype.onDidApplyTransformation = function (listener) {\n    this.state.onDidApplyTransformation(listener);\n  };\n\n  StateService.prototype.onDidUpdateState = function (listener) {\n    this.state.onDidUpdateState(listener);\n  };\n\n  StateService.prototype.getTokens = function () {\n    return this.state.getTokens();\n  };\n\n  StateService.prototype.applyTransformations = function (transformations) {\n    var appliedTransformations = this.state.applyTransformations(transformations);\n    return appliedTransformations;\n  };\n\n  StateService.prototype.applyTransformation = function (transformation) {\n    var appliedTransformation = this.state.applyTransformations([transformation])[0];\n    return appliedTransformation;\n  };\n\n  StateService.prototype.unapplyTransformations = function (appliedTransformations) {\n    this.state.unapplyTransformations(appliedTransformations);\n  };\n\n  StateService.prototype.unapplyTransformation = function (appliedTransformation) {\n    return this.state.unapplyTransformations([appliedTransformation]);\n  };\n\n  return StateService;\n}();\n\nexport { StateService };","var CURSOR_HUE = 213;\n\nvar CursorView =\n/** @class */\nfunction () {\n  function CursorView(instanceId, cursorService, renderService, layoutService, viewService) {\n    var _this = this;\n\n    this.instanceId = instanceId;\n    this.cursorService = cursorService;\n    this.renderService = renderService;\n    this.layoutService = layoutService;\n    this.viewService = viewService;\n    this.blinkInterval = null;\n    this.blinkState = true;\n    this.domSelections = [];\n    this.attached = false;\n\n    this.handleDidUpdateCursorState = function () {\n      _this.updateView();\n    };\n\n    this.handleDidUpdateViewState = function () {\n      _this.updateView();\n    };\n\n    this.handleDidFocus = function () {\n      _this.updateView();\n    };\n\n    this.handleDidBlur = function () {\n      _this.updateView();\n    };\n\n    this.domCaret = document.createElement('div');\n    this.domCaret.className = 'tw--cursor--caret';\n    this.domCaret.setAttribute('data-tw-instance', this.instanceId);\n    this.domCaret.style.position = 'absolute';\n    this.domCaret.style.userSelect = 'none';\n    this.domCaret.style.pointerEvents = 'none';\n    this.domCaret.style.width = '2px';\n    this.domCaret.style.marginLeft = '-1px';\n    cursorService.onDidUpdateCursor(this.handleDidUpdateCursorState);\n    viewService.onDidUpdateViewState(this.handleDidUpdateViewState);\n    viewService.onDidFocus(this.handleDidFocus);\n    viewService.onDidBlur(this.handleDidBlur);\n  }\n\n  CursorView.prototype.attach = function () {\n    if (this.attached) {\n      throw new Error('Already attached to the DOM.');\n    }\n\n    this.attached = true;\n    this.updateView();\n  };\n\n  CursorView.prototype.updateView = function () {\n    var _this = this;\n\n    if (!this.attached) {\n      return;\n    }\n\n    this.clearDOMSelections();\n    var cursorState = this.cursorService.getCursorState();\n    var anchor = this.boundCursorPosition(cursorState.anchor);\n    var head = this.boundCursorPosition(cursorState.head);\n    var from = Math.min(anchor, head);\n    var to = Math.max(anchor, head);\n    var pageRects = this.layoutService.resolvePageRects(from, to);\n    var pageViewNodes = this.viewService.getDocNode().getChildren();\n    var focused = this.viewService.isFocused();\n    var firstPageOffset = -1;\n    var firstLayoutRectOffset = -1;\n    var lastPageOffset = -1;\n    var lastLayoutRectOffset = -1;\n    pageRects.forEach(function (rects, pageOffset) {\n      var pageDOMContentContainer = pageViewNodes[pageOffset].getDOMContentContainer();\n      rects.forEach(function (rect, rectOffset) {\n        if (firstPageOffset < 0) {\n          firstPageOffset = pageOffset;\n          firstLayoutRectOffset = rectOffset;\n        }\n\n        lastPageOffset = pageOffset;\n        lastLayoutRectOffset = rectOffset;\n\n        if (rect.width === 0) {\n          return;\n        }\n\n        var domSelection = _this.buildDOMSelection(rect);\n\n        if (focused) {\n          domSelection.style.background = \"hsla(\" + CURSOR_HUE + \", 100%, 50%, 0.2)\";\n        } else {\n          domSelection.style.background = 'hsla(0, 0%, 0%, 0.08)';\n        }\n\n        pageDOMContentContainer.appendChild(domSelection);\n\n        _this.domSelections.push(domSelection);\n      });\n    });\n    var headPageOffset;\n    var headLeft;\n    var headTop;\n    var headHeight;\n\n    if (head < anchor) {\n      headPageOffset = firstPageOffset;\n      var rect = pageRects[firstPageOffset][firstLayoutRectOffset];\n      headLeft = rect.left;\n      headTop = rect.top;\n      headHeight = rect.height;\n    } else {\n      headPageOffset = lastPageOffset;\n      var rect = pageRects[lastPageOffset][lastLayoutRectOffset];\n      headLeft = rect.left + rect.width;\n      headTop = rect.top;\n      headHeight = rect.height;\n    }\n\n    if (head === anchor) {\n      this.domCaret.style.display = 'block';\n      this.domCaret.style.top = headTop + \"px\";\n      this.domCaret.style.left = headLeft + \"px\";\n      this.domCaret.style.height = headHeight + \"px\";\n\n      if (focused) {\n        this.domCaret.style.background = \"hsla(\" + CURSOR_HUE + \", 100%, 50%, 1)\";\n      } else {\n        this.domCaret.style.background = 'hsla(0, 0%, 0%, 0.5)';\n      }\n\n      var pageDOMContentContainer = pageViewNodes[headPageOffset].getDOMContentContainer();\n\n      if (this.domCaret.parentElement && this.domCaret.parentElement !== pageDOMContentContainer) {\n        this.domCaret.parentElement.removeChild(this.domCaret);\n      }\n\n      if (!this.domCaret.parentElement) {\n        pageDOMContentContainer.appendChild(this.domCaret);\n      }\n\n      this.blinkStop();\n\n      if (focused) {\n        this.blinkStart();\n      }\n    } else {\n      this.domCaret.style.display = 'none';\n      this.blinkStop();\n    }\n  };\n\n  CursorView.prototype.blinkStart = function () {\n    var _this = this;\n\n    if (this.blinkInterval !== null) {\n      return;\n    }\n\n    this.blinkState = true;\n    this.blinkInterval = window.setInterval(function () {\n      _this.blinkState = !_this.blinkState;\n\n      _this.updateDOMBlink();\n    }, 500);\n  };\n\n  CursorView.prototype.blinkStop = function () {\n    if (this.blinkInterval === null) {\n      return;\n    }\n\n    this.domCaret.style.visibility = 'visible';\n    clearInterval(this.blinkInterval);\n    this.blinkInterval = null;\n  };\n\n  CursorView.prototype.updateDOMBlink = function () {\n    if (this.blinkState) {\n      this.domCaret.style.visibility = 'visible';\n    } else {\n      this.domCaret.style.visibility = 'hidden';\n    }\n  };\n\n  CursorView.prototype.clearDOMSelections = function () {\n    this.domSelections.forEach(function (domSelection) {\n      if (domSelection.parentElement) {\n        domSelection.parentElement.removeChild(domSelection);\n      }\n    });\n    this.domSelections = [];\n  };\n\n  CursorView.prototype.buildDOMSelection = function (layoutRect) {\n    var domSelection = document.createElement('div');\n    domSelection.className = 'tw--cursor--selection';\n    domSelection.setAttribute('data-tw-instance', this.instanceId);\n    domSelection.style.position = 'absolute';\n    domSelection.style.top = layoutRect.top - layoutRect.paddingTop + \"px\";\n    domSelection.style.left = layoutRect.left + \"px\";\n    domSelection.style.width = layoutRect.paddingLeft + layoutRect.width + layoutRect.paddingRight + \"px\";\n    domSelection.style.height = layoutRect.paddingTop + layoutRect.height + layoutRect.paddingBottom + \"px\";\n    domSelection.style.userSelect = 'none';\n    domSelection.style.pointerEvents = 'none';\n    return domSelection;\n  };\n\n  CursorView.prototype.boundCursorPosition = function (offset) {\n    return Math.min(Math.max(offset, 0), this.renderService.getDocNode().getSize() - 1);\n  };\n\n  return CursorView;\n}();\n\nexport { CursorView };","import { EventEmitter } from '../event/emitter';\n\nvar ClipboardObserver =\n/** @class */\nfunction () {\n  function ClipboardObserver($contentEditable) {\n    var _this = this;\n\n    this.$contentEditable = $contentEditable;\n    this.didCopyEventEmitter = new EventEmitter();\n    this.didPasteEventEmitter = new EventEmitter();\n\n    this.handleCopy = function (event) {\n      event.preventDefault();\n\n      _this.didCopyEventEmitter.emit({});\n    };\n\n    this.handlePaste = function (event) {\n      event.preventDefault();\n      var data = event.clipboardData;\n\n      if (!data) {\n        return;\n      }\n\n      _this.didPasteEventEmitter.emit({\n        data: data\n      });\n    };\n\n    $contentEditable.addEventListener('copy', this.handleCopy);\n    $contentEditable.addEventListener('paste', this.handlePaste);\n  }\n\n  ClipboardObserver.prototype.onDidCopy = function (listener) {\n    this.didCopyEventEmitter.on(listener);\n  };\n\n  ClipboardObserver.prototype.onDidPaste = function (listener) {\n    this.didPasteEventEmitter.on(listener);\n  };\n\n  return ClipboardObserver;\n}();\n\nexport { ClipboardObserver };","import { EventEmitter } from '../event/emitter';\n\nvar FocusObserver =\n/** @class */\nfunction () {\n  function FocusObserver($contentEditable) {\n    var _this = this;\n\n    this.$contentEditable = $contentEditable;\n    this.didFocusEventEmitter = new EventEmitter();\n    this.didBlurEventEmitter = new EventEmitter();\n\n    this.handleFocus = function () {\n      _this.didFocusEventEmitter.emit({});\n    };\n\n    this.handleBlur = function () {\n      _this.didBlurEventEmitter.emit({});\n    };\n\n    $contentEditable.addEventListener('focus', this.handleFocus);\n    $contentEditable.addEventListener('blur', this.handleBlur);\n  }\n\n  FocusObserver.prototype.onDidFocus = function (listener) {\n    this.didFocusEventEmitter.on(listener);\n  };\n\n  FocusObserver.prototype.onDidBlur = function (listener) {\n    this.didBlurEventEmitter.on(listener);\n  };\n\n  return FocusObserver;\n}();\n\nexport { FocusObserver };","import { EventEmitter } from '../event/emitter';\nimport { detectPlatform } from '../util/platform';\n\nvar KeyboardObserver =\n/** @class */\nfunction () {\n  function KeyboardObserver($contentEditable) {\n    var _this = this;\n\n    this.$contentEditable = $contentEditable;\n    this.composing = false;\n    this.didInsertEventEmitter = new EventEmitter();\n    this.didPressKeyEventEmitter = new EventEmitter();\n    this.compositionDidStartEventEmitter = new EventEmitter();\n    this.compositionDidEndEventEmitter = new EventEmitter();\n    this.keyInterpreter = new KeyInterpreter();\n\n    this.handleDidMutate = function () {\n      setTimeout(function () {\n        if (_this.composing) {\n          return;\n        }\n\n        var tokens = _this.parse();\n\n        _this.$contentEditable.innerHTML = '';\n\n        if (tokens.length === 0) {\n          return;\n        }\n\n        _this.didInsertEventEmitter.emit({\n          tokens: tokens\n        });\n      });\n    };\n\n    this.handleKeyDown = function (event) {\n      var key = _this.keyInterpreter.interpretFromKeyboardEvent(event);\n\n      if (!key) {\n        return;\n      }\n\n      _this.didPressKeyEventEmitter.emit({\n        key: key,\n        originalKeyboardEvent: event\n      });\n    };\n\n    this.handleCompositionStart = function () {\n      _this.composing = true;\n    };\n\n    this.handleCompositionEnd = function () {\n      _this.composing = true;\n    };\n\n    this.mutationObserver = new MutationObserver(this.handleDidMutate);\n    $contentEditable.addEventListener('keydown', this.handleKeyDown);\n    $contentEditable.addEventListener('compositionstart', this.handleCompositionStart);\n    $contentEditable.addEventListener('compositionend', this.handleCompositionEnd);\n    this.mutationObserver.observe($contentEditable, {\n      subtree: true,\n      characterData: true,\n      childList: true\n    });\n  }\n\n  KeyboardObserver.prototype.onDidInsert = function (listener) {\n    this.didInsertEventEmitter.on(listener);\n  };\n\n  KeyboardObserver.prototype.onDidPressKey = function (listener) {\n    this.didPressKeyEventEmitter.on(listener);\n  };\n\n  KeyboardObserver.prototype.onCompositionDidStart = function (listener) {\n    this.compositionDidStartEventEmitter.on(listener);\n  };\n\n  KeyboardObserver.prototype.onCompositionDidEnd = function (listener) {\n    this.compositionDidEndEventEmitter.on(listener);\n  };\n\n  KeyboardObserver.prototype.parse = function () {\n    var _this = this;\n\n    var tokens = [];\n    this.$contentEditable.childNodes.forEach(function (child) {\n      tokens.push.apply(tokens, _this.parseNode(child));\n    });\n    return tokens;\n  };\n\n  KeyboardObserver.prototype.parseNode = function (node) {\n    var _this = this;\n\n    if (node.nodeValue) {\n      return node.nodeValue.split('');\n    }\n\n    var tokens = [];\n    node.childNodes.forEach(function (childNode) {\n      tokens.push.apply(tokens, _this.parseNode(childNode));\n    });\n    return tokens;\n  };\n\n  return KeyboardObserver;\n}();\n\nexport { KeyboardObserver };\n\nvar KeyInterpreter =\n/** @class */\nfunction () {\n  function KeyInterpreter() {}\n\n  KeyInterpreter.prototype.interpretFromKeyboardEvent = function (event) {\n    var key;\n\n    switch (event.key) {\n      case 'Control':\n      case 'Shift':\n      case 'Alt':\n      case 'Meta':\n        return undefined;\n\n      case 'ArrowLeft':\n        key = 'left';\n        break;\n\n      case 'ArrowRight':\n        key = 'right';\n        break;\n\n      case 'ArrowUp':\n        key = 'up';\n        break;\n\n      case 'ArrowDown':\n        key = 'down';\n        break;\n\n      default:\n        key = event.key.toLowerCase();\n    }\n\n    if (event.metaKey) {\n      switch (detectPlatform()) {\n        case 'macOS':\n          key = \"cmd+\" + key;\n          break;\n\n        case 'Windows':\n          key = \"win+\" + key;\n          break;\n\n        case 'Linux':\n        default:\n          key = \"meta+\" + key;\n      }\n    }\n\n    if (event.altKey) {\n      key = \"alt+\" + key;\n    }\n\n    if (event.shiftKey) {\n      key = \"shift+\" + key;\n    }\n\n    if (event.ctrlKey) {\n      key = \"ctrl+\" + key;\n    }\n\n    return key;\n  };\n\n  return KeyInterpreter;\n}();","import { EventEmitter } from '../event/emitter';\n\nvar PointerObserver =\n/** @class */\nfunction () {\n  function PointerObserver(instanceId, viewService) {\n    var _this = this;\n\n    this.instanceId = instanceId;\n    this.viewService = viewService;\n    this.clickThreshold = 250;\n    this.consecutiveClickThreshold = 250;\n    this.lastPointerDown = null;\n    this.lastClick = null;\n    this.consecutiveClickCount = 0;\n    this.pointerDidDownEventEmitter = new EventEmitter();\n    this.pointerDidMoveEventEmitter = new EventEmitter();\n    this.pointerDidUpEventEmitter = new EventEmitter();\n    this.pointerDidClickEventEmitter = new EventEmitter();\n\n    this.handleMouseDown = function (event) {\n      var offset = _this.resolveCoordinates(event.clientX, event.clientY);\n\n      if (offset === null) {\n        return;\n      } // Bypass browser selection\n\n\n      event.preventDefault();\n      _this.lastPointerDown = {\n        timestamp: Date.now(),\n        offset: offset\n      };\n\n      var consecutive = _this.lastClick !== null && Date.now() - _this.lastClick.timestamp < _this.consecutiveClickThreshold;\n\n      _this.pointerDidDownEventEmitter.emit({\n        offset: offset,\n        consecutive: consecutive\n      });\n    };\n\n    this.handleMouseMove = function (event) {\n      var offset = _this.resolveCoordinates(event.clientX, event.clientY);\n\n      if (offset === null) {\n        return;\n      }\n\n      _this.pointerDidMoveEventEmitter.emit({\n        pointerDown: _this.lastPointerDown !== null,\n        offset: offset\n      });\n    };\n\n    this.handleMouseUp = function (event) {\n      if (_this.lastPointerDown === null) {\n        return;\n      }\n\n      var lastPointerDown = _this.lastPointerDown;\n      _this.lastPointerDown = null;\n\n      var offset = _this.resolveCoordinates(event.clientX, event.clientY);\n\n      if (offset === null) {\n        return;\n      }\n\n      var now = Date.now();\n      var clicked = lastPointerDown.offset === offset && now - lastPointerDown.timestamp < _this.clickThreshold;\n\n      _this.pointerDidUpEventEmitter.emit({});\n\n      if (clicked) {\n        if (_this.lastClick !== null) {\n          var delta = now - _this.lastClick.timestamp;\n\n          if (delta > _this.consecutiveClickThreshold) {\n            _this.consecutiveClickCount = 0;\n          }\n        }\n\n        _this.consecutiveClickCount++;\n        _this.lastClick = {\n          timestamp: Date.now(),\n          offset: offset\n        };\n\n        _this.pointerDidClickEventEmitter.emit({\n          offset: offset,\n          consecutiveCount: _this.consecutiveClickCount\n        });\n      }\n    };\n\n    window.addEventListener('mousedown', this.handleMouseDown);\n    window.addEventListener('mousemove', this.handleMouseMove);\n    window.addEventListener('mouseup', this.handleMouseUp);\n  }\n\n  PointerObserver.prototype.onPointerDidDown = function (listener) {\n    this.pointerDidDownEventEmitter.on(listener);\n  };\n\n  PointerObserver.prototype.onPointerDidMove = function (listener) {\n    this.pointerDidMoveEventEmitter.on(listener);\n  };\n\n  PointerObserver.prototype.onPointerDidUp = function (listener) {\n    this.pointerDidUpEventEmitter.on(listener);\n  };\n\n  PointerObserver.prototype.onPointerDidClick = function (listener) {\n    this.pointerDidClickEventEmitter.on(listener);\n  };\n\n  PointerObserver.prototype.resolveCoordinates = function (x, y) {\n    var pageViewNodes = this.viewService.getDocNode().getChildren();\n    var cumulatedOffset = 0;\n\n    for (var _i = 0, pageViewNodes_1 = pageViewNodes; _i < pageViewNodes_1.length; _i++) {\n      var pageViewNode = pageViewNodes_1[_i];\n      var pageLayoutNode = pageViewNode.getLayoutNode();\n      var pageDOMContainer = pageViewNode.getDOMContainer();\n      var pageBoundingClientRect = pageDOMContainer.getBoundingClientRect();\n\n      if (pageBoundingClientRect.left <= x && pageBoundingClientRect.right >= x && pageBoundingClientRect.top <= y && pageBoundingClientRect.bottom >= y) {\n        var pageX = x - pageBoundingClientRect.left;\n        var pageY = y - pageBoundingClientRect.top;\n        return cumulatedOffset + pageLayoutNode.convertCoordinatesToOffset(pageX, pageY);\n      }\n\n      cumulatedOffset += pageLayoutNode.getSize();\n    }\n\n    return null;\n  };\n\n  return PointerObserver;\n}();\n\nexport { PointerObserver };","import { createHiddenIframe } from '../util/dom';\nimport { ClipboardObserver } from './clipboard-observer';\nimport { FocusObserver } from './focus-observer';\nimport { KeyboardObserver } from './keyboard-observer';\nimport { PointerObserver } from './pointer-observer';\n\nvar DOMController =\n/** @class */\nfunction () {\n  function DOMController(instanceId, commandService, modelService, viewService) {\n    var _this = this;\n\n    this.instanceId = instanceId;\n    this.commandService = commandService;\n    this.modelService = modelService;\n    this.viewService = viewService;\n    this.focused = false;\n    this.composing = false;\n    this.mouseDown = false;\n\n    this.handleDidInsert = function (event) {\n      _this.commandService.executeCommand('tw.state.insert', event.tokens);\n    };\n\n    this.handleCompositionDidStart = function (event) {\n      _this.composing = true;\n    };\n\n    this.handleCompositionDidEnd = function (event) {\n      _this.composing = false;\n    };\n\n    this.handlePointerDidDown = function (event) {\n      if (!_this.focused) {\n        _this.commandService.executeCommand('tw.view.focus');\n      }\n\n      if (!event.consecutive) {\n        _this.commandService.executeCommand('tw.cursor.move', event.offset);\n      }\n    };\n\n    this.handlePointerDidMove = function (event) {\n      if (event.pointerDown) {\n        _this.commandService.executeCommand('tw.cursor.moveHead', event.offset);\n      }\n    };\n\n    this.handlePointerDidClick = function (event) {\n      switch (event.consecutiveCount) {\n        case 1:\n          {\n            break;\n          }\n\n        case 2:\n          _this.commandService.executeCommand('tw.cursor.selectWord', event.offset);\n\n          break;\n\n        case 3:\n        default:\n          _this.commandService.executeCommand('tw.cursor.selectBlock', event.offset);\n\n          break;\n      }\n    };\n\n    this.handleDidFocus = function (event) {\n      _this.focused = true;\n    };\n\n    this.handleDidBlur = function (event) {\n      _this.focused = false;\n    };\n\n    this.handleCopy = function (event) {\n      _this.commandService.executeCommand('tw.clipboard.copy');\n    };\n\n    this.handlePaste = function (event) {\n      var html = event.data.getData('text/html');\n      var $container = document.createElement('html');\n      $container.innerHTML = html;\n      var $body = $container.querySelector('body');\n\n      if (!$body) {\n        return;\n      }\n\n      var domNodes = Array.prototype.slice.call($body.children);\n\n      var modelNodes = _this.modelService.fromDOM(domNodes); // TODO: Insert modelNodes to cursor location\n\n\n      console.log(modelNodes);\n    };\n\n    this.iframe = createHiddenIframe();\n    this.$contentEditable = this.createContentEditable();\n    this.keyboardObserver = new KeyboardObserver(this.$contentEditable);\n    this.keyboardObserver.onDidInsert(this.handleDidInsert);\n    this.keyboardObserver.onCompositionDidStart(this.handleCompositionDidStart);\n    this.keyboardObserver.onCompositionDidEnd(this.handleCompositionDidEnd);\n    this.pointerObserver = new PointerObserver(instanceId, viewService);\n    this.pointerObserver.onPointerDidDown(this.handlePointerDidDown);\n    this.pointerObserver.onPointerDidMove(this.handlePointerDidMove);\n    this.pointerObserver.onPointerDidClick(this.handlePointerDidClick);\n    this.focusObserver = new FocusObserver(this.$contentEditable);\n    this.focusObserver.onDidFocus(this.handleDidFocus);\n    this.focusObserver.onDidBlur(this.handleDidBlur);\n    this.clipboardObserver = new ClipboardObserver(this.$contentEditable);\n    this.clipboardObserver.onDidCopy(this.handleCopy);\n    this.clipboardObserver.onDidPaste(this.handlePaste);\n  }\n\n  DOMController.prototype.onDidPressKey = function (listener) {\n    this.keyboardObserver.onDidPressKey(listener);\n  };\n\n  DOMController.prototype.onDidFocus = function (listener) {\n    this.focusObserver.onDidFocus(listener);\n  };\n\n  DOMController.prototype.onDidBlur = function (listener) {\n    this.focusObserver.onDidBlur(listener);\n  };\n\n  DOMController.prototype.attach = function () {\n    var _this = this;\n\n    document.body.appendChild(this.iframe);\n    setTimeout(function () {\n      _this.iframe.contentDocument.body.appendChild(_this.$contentEditable);\n    });\n  };\n\n  DOMController.prototype.requestFocus = function () {\n    this.$contentEditable.focus();\n  };\n\n  DOMController.prototype.requestBlur = function () {\n    this.$contentEditable.blur();\n  };\n\n  DOMController.prototype.isFocused = function () {\n    return this.focused;\n  };\n\n  DOMController.prototype.isComposing = function () {\n    return this.composing;\n  };\n\n  DOMController.prototype.createContentEditable = function () {\n    var $contentEditable = document.createElement('div');\n    $contentEditable.contentEditable = 'true';\n    $contentEditable.style.whiteSpace = 'pre';\n    return $contentEditable;\n  };\n\n  return DOMController;\n}();\n\nexport { DOMController };","var ViewTreeBuilder =\n/** @class */\nfunction () {\n  function ViewTreeBuilder(instanceId, componentService) {\n    this.instanceId = instanceId;\n    this.componentService = componentService;\n    this.ran = false;\n  }\n\n  ViewTreeBuilder.prototype.buildTree = function (layoutNode) {\n    if (this.ran) {\n      throw new Error('Tree builder has already been run.');\n    }\n\n    this.rootLayoutNode = layoutNode;\n\n    this._buildTree();\n\n    this.ran = true;\n    return this.rootViewNode;\n  };\n\n  ViewTreeBuilder.prototype._buildTree = function () {\n    this.rootViewNode = this.buildNode(this.rootLayoutNode);\n    this.ran = true;\n  };\n\n  ViewTreeBuilder.prototype.buildNode = function (layoutNode) {\n    var _this = this;\n\n    var component = this.componentService.getComponent(layoutNode.getComponentId());\n\n    if (!component) {\n      throw new Error(\"Component \" + layoutNode.getComponentId() + \" is not registered.\");\n    }\n\n    var viewNode = component.buildViewNode(layoutNode);\n\n    if (!viewNode) {\n      throw new Error(\"Could not build view node from layout node \" + layoutNode.getId() + \".\");\n    }\n\n    if (!viewNode.isLeaf() && !viewNode.isLeaf()) {\n      var childViewNodes = layoutNode.getChildren().map(function (childLayoutNode) {\n        return _this.buildNode(childLayoutNode);\n      });\n      childViewNodes.forEach(function (childViewNode) {\n        return viewNode.appendChild(childViewNode);\n      });\n    }\n\n    this.applyMetadataToDOMContainer(viewNode);\n    viewNode.onLayoutDidUpdate();\n    return viewNode;\n  };\n\n  ViewTreeBuilder.prototype.applyMetadataToDOMContainer = function (viewNode) {\n    var domContainer = viewNode.getDOMContainer();\n    var componentId = viewNode.getComponentId();\n    var partId = viewNode.getPartId();\n    var id = viewNode.getId();\n    domContainer.className = \"tw--\" + componentId + \"--\" + partId;\n    domContainer.setAttribute('data-tw-instance', this.instanceId);\n    domContainer.setAttribute('data-tw-component', componentId);\n    domContainer.setAttribute('data-tw-part', partId);\n    domContainer.setAttribute('data-tw-id', id);\n  };\n\n  return ViewTreeBuilder;\n}();\n\nexport { ViewTreeBuilder };","import { EventEmitter } from '../event/emitter';\nimport { ViewTreeBuilder } from './tree-builder';\n\nvar ViewState =\n/** @class */\nfunction () {\n  function ViewState(instanceId, componentService, layoutService) {\n    var _this = this;\n\n    this.instanceId = instanceId;\n    this.componentService = componentService;\n    this.layoutService = layoutService;\n    this.attached = false;\n    this.didUpdateViewStateEventEmitter = new EventEmitter();\n\n    this.handleDidUpdateLayoutStateEvent = function (event) {\n      var treeBuilder = new ViewTreeBuilder(_this.instanceId, _this.componentService);\n      var updatedNode = treeBuilder.buildTree(event.node);\n\n      var node = _this.docNode.findDescendant(event.node.getId());\n\n      if (!node) {\n        throw new Error(\"Layout node \" + event.node.getId() + \" is not found.\");\n      }\n\n      node.onDidUpdate(updatedNode);\n\n      _this.didUpdateViewStateEventEmitter.emit({\n        node: node\n      });\n    };\n\n    var docLayoutNode = layoutService.getDocNode();\n    var treeBuilder = new ViewTreeBuilder(this.instanceId, componentService);\n    this.docNode = treeBuilder.buildTree(docLayoutNode);\n    layoutService.onDidUpdateLayoutState(this.handleDidUpdateLayoutStateEvent);\n  }\n\n  ViewState.prototype.onDidUpdateViewState = function (listener) {\n    this.didUpdateViewStateEventEmitter.on(listener);\n  };\n\n  ViewState.prototype.getDocNode = function () {\n    return this.docNode;\n  };\n\n  ViewState.prototype.attach = function (domContainer) {\n    if (this.attached) {\n      throw new Error('View is already attached to the DOM.');\n    }\n\n    this.docNode.attach(domContainer);\n    this.attached = true;\n  };\n\n  return ViewState;\n}();\n\nexport { ViewState };","import { CursorView } from './cursor';\nimport { DOMController } from './dom-controller';\nimport { ViewState } from './state';\n\nvar ViewService =\n/** @class */\nfunction () {\n  function ViewService(instanceId, componentService, modelService, layoutService, cursorService, renderService, commandService) {\n    this.state = new ViewState(instanceId, componentService, layoutService);\n    this.domController = new DOMController(instanceId, commandService, modelService, this);\n    this.cursor = new CursorView(instanceId, cursorService, renderService, layoutService, this);\n  }\n\n  ViewService.prototype.onDidUpdateViewState = function (listener) {\n    this.state.onDidUpdateViewState(listener);\n  };\n\n  ViewService.prototype.onDidFocus = function (listener) {\n    this.domController.onDidFocus(listener);\n  };\n\n  ViewService.prototype.onDidBlur = function (listener) {\n    this.domController.onDidBlur(listener);\n  };\n\n  ViewService.prototype.onDidPressKey = function (listener) {\n    this.domController.onDidPressKey(listener);\n  };\n\n  ViewService.prototype.getDocNode = function () {\n    return this.state.getDocNode();\n  };\n\n  ViewService.prototype.isFocused = function () {\n    return this.domController.isFocused();\n  };\n\n  ViewService.prototype.attach = function (domContainer) {\n    this.state.attach(domContainer);\n    this.cursor.attach();\n    this.domController.attach();\n  };\n\n  ViewService.prototype.requestFocus = function () {\n    this.domController.requestFocus();\n  };\n\n  ViewService.prototype.requestBlur = function () {\n    this.domController.requestBlur();\n  };\n\n  return ViewService;\n}();\n\nexport { ViewService };","import * as clipboardCommandHandlers from './command/handlers/clipboard';\nimport * as cursorCommandHandlers from './command/handlers/cursor';\nimport * as historyCommandHandlers from './command/handlers/history';\nimport * as stateCommandHandlers from './command/handlers/state';\nimport * as viewCommandHandlers from './command/handlers/view';\nimport { CommandService } from './command/service';\nimport { DocComponent } from './component/components/doc';\nimport { ParagraphComponent } from './component/components/paragraph';\nimport { TextComponent, TextMeasurer } from './component/components/text';\nimport { ComponentService } from './component/service';\nimport { ConfigService } from './config/service';\nimport { CursorService } from './cursor/service';\nimport { HistoryService } from './history/service';\nimport { KeyBindingService } from './key-binding/service';\nimport { LayoutService } from './layout/service';\nimport { ModelService } from './model/service';\nimport { RenderService } from './render/service';\nimport { ServiceRegistry } from './service/registry';\nimport { StateService } from './state/service';\nimport { generateId } from './util/id';\nimport { ViewService } from './view/service';\n\nvar Taleweaver =\n/** @class */\nfunction () {\n  function Taleweaver(initialMarkup, config) {\n    this.instanceId = generateId();\n    this.serviceRegistry = new ServiceRegistry();\n    this.configService = new ConfigService(this.buildBaseConfig(), config);\n    this.commandService = new CommandService(this.configService, this.serviceRegistry);\n    this.componentService = new ComponentService(this.configService);\n    this.cursorService = new CursorService(this.configService);\n    this.stateService = new StateService(this.cursorService, initialMarkup);\n    this.historyService = new HistoryService(this.configService, this.stateService);\n    this.modelService = new ModelService(this.componentService, this.stateService);\n    this.renderService = new RenderService(this.componentService, this.modelService);\n    this.layoutService = new LayoutService(this.componentService, this.renderService);\n    this.viewService = new ViewService(this.instanceId, this.componentService, this.modelService, this.layoutService, this.cursorService, this.renderService, this.commandService);\n    this.keyBindingService = new KeyBindingService(this.configService, this.commandService, this.viewService);\n    this.registerServices();\n  }\n\n  Taleweaver.prototype.attach = function (domContainer) {\n    this.viewService.attach(domContainer);\n  };\n\n  Taleweaver.prototype.getServiceRegistry = function () {\n    return this.serviceRegistry;\n  };\n\n  Taleweaver.prototype.buildBaseConfig = function () {\n    return {\n      commands: {\n        'tw.clipboard.copy': clipboardCommandHandlers.copy,\n        'tw.clipboard.paste': clipboardCommandHandlers.paste,\n        'tw.cursor.move': cursorCommandHandlers.move,\n        'tw.cursor.moveUp': cursorCommandHandlers.moveUp,\n        'tw.cursor.moveDown': cursorCommandHandlers.moveDown,\n        'tw.cursor.moveLeft': cursorCommandHandlers.moveLeft,\n        'tw.cursor.moveRight': cursorCommandHandlers.moveRight,\n        'tw.cursor.moveLeftByWord': cursorCommandHandlers.moveLeftByWord,\n        'tw.cursor.moveRightByWord': cursorCommandHandlers.moveRightByWord,\n        'tw.cursor.moveToLineStart': cursorCommandHandlers.moveToLineStart,\n        'tw.cursor.moveToLineEnd': cursorCommandHandlers.moveToLineEnd,\n        'tw.cursor.moveToDocStart': cursorCommandHandlers.moveToDocStart,\n        'tw.cursor.moveToDocEnd': cursorCommandHandlers.moveToDocEnd,\n        'tw.cursor.moveHead': cursorCommandHandlers.moveHead,\n        'tw.cursor.moveHeadUp': cursorCommandHandlers.moveHeadUp,\n        'tw.cursor.moveHeadDown': cursorCommandHandlers.moveHeadDown,\n        'tw.cursor.moveHeadLeft': cursorCommandHandlers.moveHeadLeft,\n        'tw.cursor.moveHeadRight': cursorCommandHandlers.moveHeadRight,\n        'tw.cursor.moveHeadLeftByWord': cursorCommandHandlers.moveHeadLeftByWord,\n        'tw.cursor.moveHeadRightByWord': cursorCommandHandlers.moveHeadRightByWord,\n        'tw.cursor.moveHeadToLineStart': cursorCommandHandlers.moveHeadToLineStart,\n        'tw.cursor.moveHeadToLineEnd': cursorCommandHandlers.moveHeadToLineEnd,\n        'tw.cursor.moveHeadToDocStart': cursorCommandHandlers.moveHeadToDocStart,\n        'tw.cursor.moveHeadToDocEnd': cursorCommandHandlers.moveHeadToDocEnd,\n        'tw.cursor.selectAll': cursorCommandHandlers.selectAll,\n        'tw.cursor.selectWord': cursorCommandHandlers.selectWord,\n        'tw.cursor.selectBlock': cursorCommandHandlers.selectBlock,\n        'tw.history.undo': historyCommandHandlers.undo,\n        'tw.history.redo': historyCommandHandlers.redo,\n        'tw.state.insert': stateCommandHandlers.insert,\n        'tw.state.deleteBackward': stateCommandHandlers.deleteBackward,\n        'tw.state.deleteForward': stateCommandHandlers.deleteForward,\n        'tw.state.splitLine': stateCommandHandlers.splitLine,\n        'tw.view.focus': viewCommandHandlers.focus,\n        'tw.view.blur': viewCommandHandlers.blur\n      },\n      components: {\n        doc: new DocComponent('doc'),\n        paragraph: new ParagraphComponent('paragraph'),\n        text: new TextComponent('text', new TextMeasurer())\n      },\n      cursor: {\n        disable: false\n      },\n      history: {\n        collapseThreshold: 500,\n        maxCollapseDuration: 2000\n      },\n      keyBindings: {\n        common: {\n          left: {\n            command: 'tw.cursor.moveLeft'\n          },\n          right: {\n            command: 'tw.cursor.moveRight'\n          },\n          up: {\n            command: 'tw.cursor.moveUp'\n          },\n          down: {\n            command: 'tw.cursor.moveDown'\n          },\n          'shift+left': {\n            command: 'tw.cursor.moveHeadLeft'\n          },\n          'shift+right': {\n            command: 'tw.cursor.moveHeadRight'\n          },\n          'shift+up': {\n            command: 'tw.cursor.moveHeadUp'\n          },\n          'shift+down': {\n            command: 'tw.cursor.moveHeadDown'\n          },\n          backspace: {\n            command: 'tw.state.deleteBackward'\n          },\n          delete: {\n            command: 'tw.state.deleteForward'\n          },\n          enter: {\n            command: 'tw.state.splitLine'\n          }\n        },\n        macos: {\n          'alt+left': {\n            command: 'tw.cursor.moveLeftByWord'\n          },\n          'alt+right': {\n            command: 'tw.cursor.moveRightByWord'\n          },\n          'shift+alt+left': {\n            command: 'tw.cursor.moveHeadLeftByWord'\n          },\n          'shift+alt+right': {\n            command: 'tw.cursor.moveHeadRightByWord'\n          },\n          'cmd+left': {\n            command: 'tw.cursor.moveToLineStart'\n          },\n          'cmd+right': {\n            command: 'tw.cursor.moveToLineEnd'\n          },\n          'cmd+up': {\n            command: 'tw.cursor.moveToDocStart'\n          },\n          'cmd+down': {\n            command: 'tw.cursor.moveToDocEnd'\n          },\n          'shift+cmd+left': {\n            command: 'tw.cursor.moveHeadToLineStart'\n          },\n          'shift+cmd+right': {\n            command: 'tw.cursor.moveHeadToLineEnd'\n          },\n          'shift+cmd+up': {\n            command: 'tw.cursor.moveHeadToDocStart'\n          },\n          'shift+cmd+down': {\n            command: 'tw.cursor.moveHeadToDocEnd'\n          },\n          'cmd+a': {\n            command: 'tw.cursor.selectAll'\n          },\n          'cmd+z': {\n            command: 'tw.history.undo',\n            preventDefault: true\n          },\n          'shift+cmd+z': {\n            command: 'tw.history.redo',\n            preventDefault: true\n          }\n        },\n        windows: {\n          'ctrl+left': {\n            command: 'tw.cursor.moveLeftByWord'\n          },\n          'ctrl+right': {\n            command: 'tw.cursor.moveRightByWord'\n          },\n          'ctrl+shift+left': {\n            command: 'tw.cursor.moveHeadLeftByWord'\n          },\n          'ctrl+shift+right': {\n            command: 'tw.cursor.moveHeadRightByWord'\n          },\n          home: {\n            command: 'tw.cursor.moveToLineStart'\n          },\n          end: {\n            command: 'tw.cursor.moveToLineEnd'\n          },\n          'ctrl+home': {\n            command: 'tw.cursor.moveToDocStart'\n          },\n          'ctrl+end': {\n            command: 'tw.cursor.moveToDocEnd'\n          },\n          'shift+home': {\n            command: 'tw.cursor.moveHeadToLineStart'\n          },\n          'shift+end': {\n            command: 'tw.cursor.moveHeadToLineEnd'\n          },\n          'ctrl+shift+home': {\n            command: 'tw.cursor.moveHeadToDocStart'\n          },\n          'ctrl+shift+end': {\n            command: 'tw.cursor.moveHeadToDocEnd'\n          },\n          'ctrl+a': {\n            command: 'tw.cursor.selectAll'\n          },\n          'ctrl+z': {\n            command: 'tw.history.undo',\n            preventDefault: true\n          },\n          'ctrl+shift+z': {\n            command: 'tw.history.redo',\n            preventDefault: true\n          }\n        },\n        linux: {\n          'ctrl+left': {\n            command: 'tw.cursor.moveLeftByWord'\n          },\n          'ctrl+right': {\n            command: 'tw.cursor.moveRightByWord'\n          },\n          'ctrl+shift+left': {\n            command: 'tw.cursor.moveHeadLeftByWord'\n          },\n          'ctrl+shift+right': {\n            command: 'tw.cursor.moveHeadRightByWord'\n          },\n          home: {\n            command: 'tw.cursor.moveToLineStart'\n          },\n          end: {\n            command: 'tw.cursor.moveToLineEnd'\n          },\n          'ctrl+home': {\n            command: 'tw.cursor.moveToDocStart'\n          },\n          'ctrl+end': {\n            command: 'tw.cursor.moveToDocEnd'\n          },\n          'shift+home': {\n            command: 'tw.cursor.moveHeadToLineStart'\n          },\n          'shift+end': {\n            command: 'tw.cursor.moveHeadToLineEnd'\n          },\n          'ctrl+shift+home': {\n            command: 'tw.cursor.moveHeadToDocStart'\n          },\n          'ctrl+shift+end': {\n            command: 'tw.cursor.moveHeadToDocEnd'\n          },\n          'ctrl+a': {\n            command: 'tw.cursor.selectAll'\n          },\n          'ctrl+z': {\n            command: 'tw.history.undo',\n            preventDefault: true\n          },\n          'ctrl+shift+z': {\n            command: 'tw.history.redo',\n            preventDefault: true\n          }\n        }\n      },\n      page: {\n        width: 816,\n        height: 1056,\n        paddingTop: 40,\n        paddingBottom: 40,\n        paddingLeft: 40,\n        paddingRight: 40\n      }\n    };\n  };\n\n  Taleweaver.prototype.registerServices = function () {\n    this.serviceRegistry.registerService('config', this.configService);\n    this.serviceRegistry.registerService('command', this.commandService);\n    this.serviceRegistry.registerService('component', this.componentService);\n    this.serviceRegistry.registerService('cursor', this.cursorService);\n    this.serviceRegistry.registerService('history', this.historyService);\n    this.serviceRegistry.registerService('state', this.stateService);\n    this.serviceRegistry.registerService('model', this.modelService);\n    this.serviceRegistry.registerService('render', this.renderService);\n    this.serviceRegistry.registerService('layout', this.layoutService);\n    this.serviceRegistry.registerService('view', this.viewService);\n    this.serviceRegistry.registerService('keyBinding', this.keyBindingService);\n  };\n\n  return Taleweaver;\n}();\n\nexport { Taleweaver };","import { Taleweaver } from '@taleweaver/core';\nimport { ITextStyle } from '@taleweaver/core/dist/tw/component/components/text';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport styled from 'styled-components';\n\nconst Wrapper = styled.div`\n    position: sticky;\n    top: 0;\n    padding: 3px 24px;\n    background: white;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.09);\n    z-index: 10;\n`;\n\nconst Container = styled.div`\n    display: flex;\n    margin: 0 auto;\n    width: 816px;\n`;\n\nconst Group = styled.div`\n    flex: 0 0 auto;\n    display: flex;\n    border-radius: 4px;\n    padding: 0 6px;\n    position: relative;\n    &::before {\n        content: '';\n        position: absolute;\n        top: 9px;\n        bottom: 9px;\n        left: 0;\n        width: 1px;\n        background: rgba(0, 0, 0, 0.15);\n    }\n    &:last-child {\n        &::after {\n            content: '';\n            position: absolute;\n            top: 9px;\n            bottom: 9px;\n            right: 0;\n            width: 1px;\n            background: rgba(0, 0, 0, 0.15);\n        }\n    }\n`;\n\ninterface ItemProps {\n    disabled: boolean;\n    active: boolean;\n}\n\nconst Item = styled.button<ItemProps>`\n    flex: 0 0 auto;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 36px;\n    height: 36px;\n    font-size: 18px;\n    position: relative;\n    color: rgba(0, 0, 0, 0.85);\n    background: transparent;\n    padding: 0;\n    border: none;\n    border-radius: 3px;\n    outline: none;\n    &:after {\n        content: '';\n        position: absolute;\n        bottom: 0;\n        left: 3px;\n        right: 3px;\n        height: 3px;\n    }\n    &:hover,\n    &:focus {\n        background: rgba(0, 0, 0, 0.04);\n    }\n    ${({ disabled }) =>\n        disabled &&\n        `\n        opacity: 0.45;\n        &:hover,\n        &:focus {\n            background: transparent;\n        }\n    `}\n    ${({ active }) =>\n        active &&\n        `\n        color: rgba(255, 0, 0, 1);\n        &:after {\n            background: rgba(255, 0, 0, 1);\n        }\n    `}\n`;\n\ninterface SelectItemProps {\n    disabled: boolean;\n    width: number;\n}\n\nconst SelectItem = styled.select<SelectItemProps>`\n    -webkit-appearance: none;\n    border: none;\n    font-size: 12px;\n    font-weight: 500;\n    width: ${({ width }) => width}px;\n    background: white;\n    border-radius: 3px;\n    padding: 0 9px;\n    outline: none;\n    position: relative;\n    &:hover,\n    &:focus {\n        background: rgba(0, 0, 0, 0.04);\n    }\n    option {\n        color: rgba(0, 0, 0, 0.85);\n    }\n    ${({ disabled }) =>\n        disabled &&\n        `\n        opacity: 0.45;\n        &:hover,\n        &:focus {\n            background: transparent;\n        }\n    `}\n`;\n\ninterface ItemColorLineProps {\n    color: string;\n}\n\nconst ItemColorLine = styled.div<ItemColorLineProps>`\n    position: absolute;\n    bottom: 8px;\n    left: 9px;\n    right: 9px;\n    height: 3px;\n    background: ${({ color }) => color};\n`;\n\ninterface Props {\n    taleweaver: Taleweaver | null;\n}\n\nfunction getTextStyles(taleweaver: Taleweaver): ITextStyle[] {\n    const renderService = taleweaver.getServiceRegistry().getService('render');\n    const cursorService = taleweaver.getServiceRegistry().getService('cursor');\n    const cursorState = cursorService.getCursorState();\n    const styles = renderService.getStylesBetween(\n        Math.min(cursorState.anchor, cursorState.head),\n        Math.max(cursorState.anchor, cursorState.head),\n    );\n    if (!styles.text) {\n        return [];\n    }\n    if (!styles.text.text) {\n        return [];\n    }\n    return styles.text.text as ITextStyle[];\n}\n\nexport default function ToolBar({ taleweaver }: Props) {\n    const [textStyles, setTextStyles] = useState<ITextStyle[]>([]);\n    const updateTextStyle = useMemo(\n        () => (taleweaver: Taleweaver) => {\n            setTextStyles(getTextStyles(taleweaver));\n        },\n        [],\n    );\n    useEffect(() => {\n        if (!taleweaver) {\n            return;\n        }\n        const cursorService = taleweaver.getServiceRegistry().getService('cursor');\n        const renderService = taleweaver.getServiceRegistry().getService('render');\n        cursorService.onDidUpdateCursor(event => updateTextStyle(taleweaver));\n        renderService.onDidUpdateRenderState(event => updateTextStyle(taleweaver));\n        updateTextStyle(taleweaver);\n    }, [taleweaver]);\n    const font = new Set(textStyles.map(s => s.font)).size === 1 ? textStyles[0].font : null;\n    const size = new Set(textStyles.map(s => s.size)).size === 1 ? textStyles[0].size : null;\n    const bold = new Set(textStyles.map(s => s.weight > 400)).size === 1 ? textStyles[0].weight > 400 : false;\n    const italic = new Set(textStyles.map(s => s.italic)).size === 1 ? textStyles[0].italic : false;\n    const underline = new Set(textStyles.map(s => s.underline)).size === 1 ? textStyles[0].underline : false;\n    const strikethrough =\n        new Set(textStyles.map(s => s.strikethrough)).size === 1 ? textStyles[0].strikethrough : false;\n    const color = new Set(textStyles.map(s => s.color)).size === 1 ? textStyles[0].color : null;\n    return (\n        <Wrapper>\n            <Container>\n                <Group>\n                    <SelectItem width={120} value={'Normal'} disabled={false} onChange={event => null}>\n                        <option value=\"\" style={{ display: 'none' }}></option>\n                        <option value=\"Normal\">Normal text</option>\n                        <option value=\"Title\">Title</option>\n                        <option value=\"Subtitle\">Subtitle</option>\n                        <option value=\"Heading 1\">Heading 1</option>\n                        <option value=\"Heading 2\">Heading 2</option>\n                        <option value=\"Heading 3\">Heading 3</option>\n                    </SelectItem>\n                </Group>\n                <Group>\n                    <SelectItem width={120} value={font || ''} disabled={font === null} onChange={event => null}>\n                        <option value=\"\" style={{ display: 'none' }}></option>\n                        <option value=\"sans-serif\">sans-serif</option>\n                    </SelectItem>\n                </Group>\n                <Group>\n                    <SelectItem\n                        width={60}\n                        value={size ? size.toString() : ''}\n                        disabled={size === null}\n                        onChange={event => null}\n                    >\n                        <option value=\"\" style={{ display: 'hidden' }} />\n                        <option value=\"10\">10</option>\n                        <option value=\"12\">12</option>\n                        <option value=\"14\">14</option>\n                        <option value=\"16\">16</option>\n                        <option value=\"18\">18</option>\n                        <option value=\"24\">24</option>\n                        <option value=\"30\">30</option>\n                        <option value=\"36\">36</option>\n                        <option value=\"42\">42</option>\n                    </SelectItem>\n                </Group>\n                <Group>\n                    <Item active={bold} disabled={false} onClick={() => null}>\n                        <i className=\"mdi mdi-format-bold\" />\n                    </Item>\n                    <Item active={italic} disabled={false} onClick={() => null}>\n                        <i className=\"mdi mdi-format-italic\" />\n                    </Item>\n                    <Item active={underline} disabled={false} onClick={() => null}>\n                        <i className=\"mdi mdi-format-underline\" />\n                    </Item>\n                    <Item active={strikethrough} disabled={false} onClick={() => null}>\n                        <i className=\"mdi mdi-format-strikethrough-variant\" />\n                    </Item>\n                    <Item active={false} disabled={color === null} onClick={() => null}>\n                        <i className=\"mdi mdi-format-color-text\" style={{ position: 'relative', top: '-2px' }} />\n                        <ItemColorLine color={color || 'transparent'} />\n                    </Item>\n                </Group>\n            </Container>\n        </Wrapper>\n    );\n}\n","import { IConfig, Taleweaver } from '@taleweaver/core';\nimport React, { useEffect, useRef, useState } from 'react';\nimport styled from 'styled-components';\nimport ToolBar from './ToolBar';\n\nconst Wrapper = styled.div``;\n\nconst EditorWrapper = styled.div`\n    text-align: center;\n    .tw--doc--doc {\n        font-family: 'Source Sans Pro', sans-serif;\n        display: inline-block;\n        padding-bottom: 9px;\n        counter-reset: page-counter;\n    }\n    .tw--page--page {\n        background: rgba(255, 255, 255, 1);\n        margin: 9px auto 0;\n        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);\n        position: relative;\n        &::after {\n            counter-increment: page-counter;\n            content: 'Page ' counter(page-counter) '';\n            position: absolute;\n            top: 12px;\n            left: 50%;\n            transform: translateX(-50%);\n            font-size: 10px;\n            font-family: 'Quicksand', sans-serif;\n            font-weight: 500;\n            color: rgba(0, 0, 0, 0.45);\n            pointer-events: none;\n        }\n        *::selection {\n            background: rgba(255, 255, 255, 1);\n        }\n    }\n`;\n\ninterface IProps {\n    initialMarkup: string;\n    config?: IConfig['tw.core'];\n}\n\nexport default function Editor({ initialMarkup, config }: IProps) {\n    const domRef = useRef<HTMLDivElement>(null);\n    const [taleweaver, setTaleweaver] = useState<Taleweaver | null>(null);\n    useEffect(() => {\n        const mergedConfig: IConfig = {};\n        if (config) {\n            mergedConfig['tw.core'] = config;\n        }\n        setTaleweaver(new Taleweaver(initialMarkup, mergedConfig));\n    }, []);\n    useEffect(() => {\n        if (taleweaver && domRef.current) {\n            taleweaver.attach(domRef.current);\n        }\n    }, [taleweaver, domRef.current]);\n    return (\n        <Wrapper>\n            <ToolBar taleweaver={taleweaver} />\n            <EditorWrapper ref={domRef} />\n        </Wrapper>\n    );\n}\n","import Taleweaver from \"./Editor\";\n\nexport default Taleweaver;\n","export default `\n<doc {\"id\": \"doc\"}>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\", \"weight\": 700}>\n      Once upon a time there lived in a certain village a little country girl, the prettiest creature was ever seen. Her mother was excessively fond of her; and her grandmother doted on her still more. This good woman had made for her a little red riding-hood; which became the girl so extremely well that everybody called her Little Red Riding-Hood.\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\", \"italic\": true}>\n      One day her mother, having made some custards, said to her:\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\", \"color\": \"rgba(255, 0, 0, 1)\"}>\n      \"Go, my dear, and see how thy grandmamma does, for I hear she has been very ill; carry her a custard, and this little pot of butter.\"\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\", \"size\": 24}>\n      Little Red Riding-Hood set out immediately to go to her grandmother, who lived in another village.\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\", \"strikethrough\": true, \"underline\": true}>\n      As she was going through the wood, she met with Gaffer Wolf, who had a very great mind to eat her up, but he dared not, because of some faggot-makers hard by in the forest. He asked her whither she was going. The poor child, who did not know that it was dangerous to stay and hear a wolf talk, said to him:\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      \"I am going to see my grandmamma and carry her a custard and a little pot of butter from my mamma.\"\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      \"Does she live far off?\" said the Wolf.\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      \"Oh! ay,\" answered Little Red Riding-Hood; \"it is beyond that mill you see there, at the first house in the village.\"\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      \"Well,\" said the Wolf, \"and I'll go and see her too. I'll go this way and you go that, and we shall see who will be there soonest.\"\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      The Wolf began to run as fast as he could, taking the nearest way, and the little girl went by that farthest about, diverting herself in gathering nuts, running after butterflies, and making nosegays of such little flowers as she met with. The Wolf was not long before he got to the old woman's house. He knocked at the door--tap, tap.\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      \"Who's there?\"\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      \"Your grandchild, Little Red Riding-Hood,\" replied the Wolf, counterfeiting her voice; \"who has brought you a custard and a little pot of butter sent you by mamma.\"\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      The good grandmother, who was in bed, because she was somewhat ill, cried out\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      \"Pull the bobbin, and the latch will go up.\"\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      The Wolf pulled the bobbin, and the door opened, and then presently he fell upon the good woman and ate her up in a moment, for it was above three days that he had not touched a bit. He then shut the door and went into the grandmother's bed, expecting Little Red Riding- Hood, who came some time afterward and knocked at the door--tap, tap.\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      \"Who's there?\"\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      Little Red Riding-Hood, hearing the big voice of the Wolf, was at first afraid; but believing her grandmother had got a cold and was hoarse, answered:\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      \" 'Tis your grandchild, Little Red Riding-Hood, who has brought you a custard and a little pot of butter mamma sends you.\"\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      The Wolf cried out to her, softening his voice as much as he could:\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      \"Pull the bobbin, and the latch will go up.\"\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      Little Red Riding-Hood pulled the bobbin, and the door opened.\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      The Wolf, seeing her come in, said to her, hiding himself under the bed-clothes:\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      \"Put the custard and the little pot of butter upon the stool, and come and lie down with me.\"\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      Little Red Riding-Hood undressed herself and went into bed, where, being greatly amazed to see how her grandmother looked in her night-clothes, she said to her:\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      \"Grandmamma, what great arms you have got!\"\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      \"That is the better to hug thee, my dear.\"\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      \"Grandmamma, what great legs you have got!\"\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      \"That is to run the better, my child.\"\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      \"Grandmamma, what great ears you have got!\"\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      \"That is to hear the better, my child.\"\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      \"Grandmamma, what great eyes you have got!\"\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      \"It is to see the better, my child.\"\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      \"Grandmamma, what great teeth you have got!\"\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      \"That is to eat thee up.\"\n    </>\n  </>\n  <paragraph {\"id\": \"{{id}}\"}>\n    <text {\"id\": \"{{id}}\"}>\n      And, saying these words, this wicked wolf fell upon Little Red Riding-Hood, and ate her all up.\n    </>\n  </>\n</>\n`\n    .split('\\n')\n    .map(line => line.trim())\n    .join('')\n    .replace(\n        /{{id}}/g,\n        () =>\n            `${Math.random()\n                .toString(36)\n                .substring(2)}`,\n    );\n","import React from 'react';\nimport styled from 'styled-components';\nimport './App.css';\nimport Taleweaver from './Editor';\nimport sampleMarkup from './samples/littleRedRidingHood';\n\nconst Wrapper = styled.div``;\n\nconst Hero = styled.div`\n    text-align: center;\n    padding: 90px 60px 30px;\n`;\n\nconst BrandWrapper = styled.div``;\n\nconst Brand = styled.span`\n    color: rgba(0, 0, 0, 0.65);\n    font-size: 42px;\n    letter-spacing: 0.02em;\n    padding-bottom: 10px;\n    border-bottom: 2px solid rgba(0, 0, 0, 0.65);\n`;\n\nconst Tagline = styled.h1`\n    font-size: 30px;\n    font-weight: 500;\n    color: rgba(0, 0, 0, 0.85);\n    margin: 90px 0 0;\n`;\n\nconst SupportingTagline = styled.h2`\n    font-size: 20px;\n    font-weight: 400;\n    color: rgba(0, 0, 0, 0.85);\n    margin: 30px 0 0;\n`;\n\nconst Links = styled.div`\n    margin-top: 90px;\n`;\n\nconst Link = styled.a`\n    display: inline-block;\n    padding: 15px 60px;\n    outline: none;\n    color: rgba(0, 0, 0, 0.85);\n    text-decoration: none;\n    font-size: 20px;\n    background: transparent;\n    border-radius: 3px;\n    border: 1px solid rgba(0, 0, 0, 0.15);\n    &:hover {\n        color: rgba(0, 0, 0, 1);\n        background: rgba(0, 0, 0, 0.04);\n        border-color: rgba(0, 0, 0, 0.25);\n    }\n`;\n\nconst DemoHintWrapper = styled.div`\n    text-align: center;\n    margin-top: 90px;\n`;\n\nconst DemoHint = styled.span`\n    text-transform: uppercase;\n    font-weight: 500;\n    font-size: 14px;\n    color: rgba(0, 0, 0, 0.65);\n    border-top: 1px solid rgba(0, 0, 0, 0.45);\n    padding-top: 10px;\n    cursor: default;\n`;\n\nclass App extends React.Component {\n    render() {\n        return (\n            <Wrapper>\n                <Hero>\n                    <BrandWrapper>\n                        <Brand>Taleweaver</Brand>\n                    </BrandWrapper>\n                    <Tagline>Word processing in your browser.</Tagline>\n                    <SupportingTagline>\n                        Open source editor delivering true word processing experience.\n                    </SupportingTagline>\n                    <Links>\n                        <Link href=\"https://github.com/yuzhenmi/taleweaver\">GitHub</Link>\n                    </Links>\n                    <DemoHintWrapper>\n                        <DemoHint>&darr; Check it out &darr;</DemoHint>\n                    </DemoHintWrapper>\n                </Hero>\n                <Taleweaver\n                    initialMarkup={sampleMarkup}\n                    config={{\n                        page: {\n                            width: 816,\n                            height: 1056,\n                            paddingTop: 60,\n                            paddingBottom: 60,\n                            paddingLeft: 60,\n                            paddingRight: 60,\n                        },\n                    }}\n                />\n            </Wrapper>\n        );\n    }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}
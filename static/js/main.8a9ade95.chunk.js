(this["webpackJsonp@taleweaver/example-react"]=this["webpackJsonp@taleweaver/example-react"]||[]).push([[0],{1:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return a}));var r=n(103),o=n.n(r),i=new Uint8Array(16);function a(){return t.from(String.fromCharCode.apply(String,Array.from(o.a.randomFillSync(i)))).toString("base64")}}).call(this,n(6).Buffer)},107:function(t,e,n){t.exports=n(216)},112:function(t,e,n){},113:function(t,e,n){},117:function(t,e){},119:function(t,e){},131:function(t,e){},133:function(t,e){},160:function(t,e){},162:function(t,e){},163:function(t,e){},170:function(t,e){},172:function(t,e){},190:function(t,e){},193:function(t,e){},209:function(t,e){},212:function(t,e){},216:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),i=n(102),a=n.n(i),s=(n(112),n(4)),c=n(5),u=(n(113),n(34));var d,h=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(e){i(e)}}function s(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},f=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};"undefined"!==typeof window&&(d=function(){var t=document.createElement("iframe");return t.scrolling="no",t.src="about:blank",t.style.width="0",t.style.height="0",t.style.border="none",t.style.position="fixed",t.style.zIndex="-1",t.style.opacity="0",t.style.overflow="hidden",t.style.left="-1000000px",t.style.top="-1000000px",t}(),document.body.appendChild(d));var p=function(t){return h(void 0,void 0,void 0,(function(){var e,n,r,o,i,a,s,c;return f(this,(function(u){return d?(e=t.getService("cursor"),n=t.getService("render"),r=t.getService("model"),e.hasCursor()?(o=e.getCursor(),i=o.anchor,a=o.head,i===a?[2]:(s=r.toDOM(n.convertOffsetToModelOffset(Math.min(i,a)),n.convertOffsetToModelOffset(Math.max(i,a))).outerHTML,(c=d.contentDocument)?(c.body.innerHTML=s,c.execCommand("selectAll"),c.execCommand("copy"),c.body.innerHTML="",[2]):[2])):[2]):[2]}))}))},l=function(t){return h(void 0,void 0,void 0,(function(){return f(this,(function(t){return[2]}))}))},g=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},v=function(){function t(t,e,n,r){void 0===r&&(r=!1),this.changes=t,this.modelCursorHead=e,this.modelCursorAnchor=n,this.keepLeftLock=r}return t.prototype.apply=function(e,n,r,o){var i=void 0,a=void 0;if(n.hasCursor()){var s=n.getCursor(),c=s.anchor,u=s.head;i=r.convertOffsetToModelOffset(c),a=r.convertOffsetToModelOffset(u)}var d=this.applyChanges(e);if(n.hasCursor()){var h=n.getCursor(),f=h.anchor,p=h.head;if(void 0!==this.modelCursorHead&&(f=p=r.convertModelOffsetToOffset(this.boundModelOffset(this.modelCursorHead,e)),void 0!==this.modelCursorAnchor&&(f=r.convertModelOffsetToOffset(this.boundModelOffset(this.modelCursorAnchor,e)))),f=this.boundOffset(f,r),p=this.boundOffset(p,r),n.setCursor(f,p),!this.keepLeftLock){var l=o.resolvePosition(n.getCursor().head).atLineDepth(),g=l.node,v=l.offset;n.setLeftLock(g.resolveBoundingBoxes(v,v).boundingBoxes[0].left)}}for(var y=[],b=[],w=d.length-1;w>=0;w--){var O=d[w];y.push(b.reduce((function(t,e){return t.map(e)}),O.reverseChange)),b.push(O.mapping.reverse())}return new m(this,d,new t(y,a,i,this.keepLeftLock))},t.prototype.applyChanges=function(t){for(var e=[],n=[],r=g(this.changes),o=function(){var o=r.shift(),i=t.applyChange(o),a=i.mapping;n.push(a),r=r.map((function(t){return t.map(a)})),e.push(i)};r.length>0;)o();return e},t.prototype.boundModelOffset=function(t,e){return Math.max(0,Math.min(e.getRootSize()-1,t))},t.prototype.boundOffset=function(t,e){return Math.max(0,Math.min(e.getDocSize()-1,t))},t}(),m=function(t,e,n){this.transformation=t,this.changeResults=e,this.reverseTransformation=n},y=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(e){i(e)}}function s(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},b=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function w(t,e,n){var r=n.resolvePosition(t).atLineDepth(),o=r.node,i=r.offset,a=o.previousCrossParentSibling;return a?t-i-a.size+a.convertCoordinatesToOffset(e,0):t-i}function O(t,e,n){var r=n.resolvePosition(t).atLineDepth(),o=r.node,i=r.offset,a=o.nextCrossParentSibling;return a?t-i+o.size+a.convertCoordinatesToOffset(e,0):t-i+o.size-1}function x(t,e){var n=e.resolvePosition(t).atReverseDepth(0),r=n.node,o=n.offset;if(o>0)return t-o;var i=r.previousCrossParentSibling;return i?t-i.size:t}function S(t,e){var n=e.resolvePosition(t).atReverseDepth(0),r=n.node,o=n.offset;if(o<r.size-1)return t-o+r.size-r.whitespaceSize;var i=r.nextCrossParentSibling;return i?t-o+r.size+i.size-i.whitespaceSize:t}function C(t,e){var n=e.resolvePosition(t).atLineDepth().offset;return 0===n?t:t-n}function E(t,e){var n=e.resolvePosition(t).atLineDepth(),r=n.node,o=n.offset;return o>=r.size-1?t:t-o+r.size-1}var P=function(t,e){return y(void 0,void 0,void 0,(function(){var n,r,o;return b(this,(function(i){return n=t.getService("transform"),r=t.getService("render"),o=r.convertOffsetToModelOffset(e),n.applyTransformation(new v([],o)),[2]}))}))},D=function(t){return y(void 0,void 0,void 0,(function(){var e,n,r,o,i,a,s,c;return b(this,(function(u){return e=t.getService("transform"),n=t.getService("cursor"),r=t.getService("render"),o=n.getCursor(),i=o.anchor,a=o.head,i===a?s=r.convertOffsetToModelOffset(i-1):(c=Math.min(i,a),s=r.convertOffsetToModelOffset(c)),e.applyTransformation(new v([],s)),[2]}))}))},j=function(t){return y(void 0,void 0,void 0,(function(){var e,n,r,o,i,a,s,c;return b(this,(function(u){return e=t.getService("transform"),n=t.getService("cursor"),r=t.getService("render"),o=n.getCursor(),i=o.anchor,a=o.head,i===a?s=r.convertOffsetToModelOffset(i+1):(c=Math.max(i,a),s=r.convertOffsetToModelOffset(c)),e.applyTransformation(new v([],s)),[2]}))}))},T=function(t){return y(void 0,void 0,void 0,(function(){var e,n,r,o,i,a,s,c,u,d,h;return b(this,(function(f){return e=t.getService("transform"),n=t.getService("cursor"),r=t.getService("layout"),n.hasCursor()?(o=n.getCursor(),i=o.anchor,a=o.head,s=o.leftLock,c=Math.min(i,a),u=w(c,s,r),d=t.getService("render"),h=d.convertOffsetToModelOffset(u),e.applyTransformation(new v([],h,h,!0)),[2]):[2]}))}))},I=function(t){return y(void 0,void 0,void 0,(function(){var e,n,r,o,i,a,s,c,u,d,h;return b(this,(function(f){return e=t.getService("transform"),n=t.getService("cursor"),r=t.getService("layout"),n.hasCursor()?(o=n.getCursor(),i=o.anchor,a=o.head,s=o.leftLock,c=Math.max(i,a),u=O(c,s,r),d=t.getService("render"),h=d.convertOffsetToModelOffset(u),e.applyTransformation(new v([],h,h,!0)),[2]):[2]}))}))},_=function(t){return y(void 0,void 0,void 0,(function(){var e,n,r,o,i,a,s,c,u,d;return b(this,(function(h){return e=t.getService("transform"),n=t.getService("cursor"),r=t.getService("layout"),n.hasCursor()?(o=n.getCursor(),i=o.anchor,a=o.head,s=Math.min(i,a),c=x(s,r),u=t.getService("render"),d=u.convertOffsetToModelOffset(c),e.applyTransformation(new v([],d)),[2]):[2]}))}))},k=function(t){return y(void 0,void 0,void 0,(function(){var e,n,r,o,i,a,s,c,u,d;return b(this,(function(h){return e=t.getService("transform"),n=t.getService("cursor"),r=t.getService("layout"),n.hasCursor()?(o=n.getCursor(),i=o.anchor,a=o.head,s=Math.max(i,a),c=S(s,r),u=t.getService("render"),d=u.convertOffsetToModelOffset(c),e.applyTransformation(new v([],d)),[2]):[2]}))}))},M=function(t){return y(void 0,void 0,void 0,(function(){var e,n,r,o,i,a,s,c,u,d;return b(this,(function(h){return e=t.getService("transform"),n=t.getService("cursor"),r=t.getService("layout"),n.hasCursor()?(o=n.getCursor(),i=o.anchor,a=o.head,s=Math.min(i,a),c=C(s,r),u=t.getService("render"),d=u.convertOffsetToModelOffset(c),e.applyTransformation(new v([],d)),[2]):[2]}))}))},z=function(t){return y(void 0,void 0,void 0,(function(){var e,n,r,o,i,a,s,c,u,d;return b(this,(function(h){return e=t.getService("transform"),n=t.getService("cursor"),r=t.getService("layout"),n.hasCursor()?(o=n.getCursor(),i=o.anchor,a=o.head,s=Math.max(i,a),c=E(s,r),u=t.getService("render"),d=u.convertOffsetToModelOffset(c),e.applyTransformation(new v([],d)),[2]):[2]}))}))},B=function(t){return y(void 0,void 0,void 0,(function(){var e,n,r;return b(this,(function(o){return e=t.getService("transform"),n=t.getService("render"),0,r=n.convertOffsetToModelOffset(0),e.applyTransformation(new v([],r)),[2]}))}))},L=function(t){return y(void 0,void 0,void 0,(function(){var e,n,r,o;return b(this,(function(i){return e=t.getService("transform"),n=t.getService("render"),r=n.getDocSize()-1,o=n.convertOffsetToModelOffset(r),e.applyTransformation(new v([],o)),[2]}))}))},R=function(t,e){return y(void 0,void 0,void 0,(function(){var n,r,o,i,a,s;return b(this,(function(c){return n=t.getService("transform"),r=t.getService("cursor"),o=t.getService("render"),i=r.getCursor().anchor,a=o.convertOffsetToModelOffset(i),s=o.convertOffsetToModelOffset(e),n.applyTransformation(new v([],s,a)),[2]}))}))},N=function(t){return y(void 0,void 0,void 0,(function(){var e,n,r,o,i,a,s,c;return b(this,(function(u){return e=t.getService("transform"),n=t.getService("cursor"),r=t.getService("render"),o=n.getCursor(),i=o.anchor,a=o.head,s=r.convertOffsetToModelOffset(i),c=r.convertOffsetToModelOffset(a-1),e.applyTransformation(new v([],c,s)),[2]}))}))},A=function(t){return y(void 0,void 0,void 0,(function(){var e,n,r,o,i,a,s,c;return b(this,(function(u){return e=t.getService("transform"),n=t.getService("cursor"),r=t.getService("render"),o=n.getCursor(),i=o.anchor,a=o.head,s=r.convertOffsetToModelOffset(i),c=r.convertOffsetToModelOffset(a+1),e.applyTransformation(new v([],c,s)),[2]}))}))},H=function(t){return y(void 0,void 0,void 0,(function(){var e,n,r,o,i,a,s,c,u,d,h;return b(this,(function(f){return e=t.getService("transform"),n=t.getService("cursor"),r=t.getService("render"),o=t.getService("layout"),n.hasCursor()?(i=n.getCursor(),a=i.anchor,s=i.head,c=i.leftLock,u=w(s,c,o),d=r.convertOffsetToModelOffset(a),h=r.convertOffsetToModelOffset(u),e.applyTransformation(new v([],h,d)),[2]):[2]}))}))},F=function(t){return y(void 0,void 0,void 0,(function(){var e,n,r,o,i,a,s,c,u,d,h;return b(this,(function(f){return e=t.getService("transform"),n=t.getService("cursor"),r=t.getService("render"),o=t.getService("layout"),n.hasCursor()?(i=n.getCursor(),a=i.anchor,s=i.head,c=i.leftLock,u=O(s,c,o),d=r.convertOffsetToModelOffset(a),h=r.convertOffsetToModelOffset(u),e.applyTransformation(new v([],h,d)),[2]):[2]}))}))},W=function(t){return y(void 0,void 0,void 0,(function(){var e,n,r,o,i,a,s,c,u,d;return b(this,(function(h){return e=t.getService("transform"),n=t.getService("cursor"),r=t.getService("render"),o=t.getService("layout"),n.hasCursor()?(i=n.getCursor(),a=i.anchor,s=i.head,c=x(s,o),u=r.convertOffsetToModelOffset(a),d=r.convertOffsetToModelOffset(c),e.applyTransformation(new v([],d,u)),[2]):[2]}))}))},U=function(t){return y(void 0,void 0,void 0,(function(){var e,n,r,o,i,a,s,c,u,d;return b(this,(function(h){return e=t.getService("transform"),n=t.getService("cursor"),r=t.getService("render"),o=t.getService("layout"),n.hasCursor()?(i=n.getCursor(),a=i.anchor,s=i.head,c=S(s,o),u=r.convertOffsetToModelOffset(a),d=r.convertOffsetToModelOffset(c),e.applyTransformation(new v([],d,u)),[2]):[2]}))}))},V=function(t){return y(void 0,void 0,void 0,(function(){var e,n,r,o,i,a,s,c,u,d;return b(this,(function(h){return e=t.getService("transform"),n=t.getService("cursor"),r=t.getService("render"),o=t.getService("layout"),n.hasCursor()?(i=n.getCursor(),a=i.anchor,s=i.head,c=C(s,o),u=r.convertOffsetToModelOffset(a),d=r.convertOffsetToModelOffset(c),e.applyTransformation(new v([],d,u)),[2]):[2]}))}))},K=function(t){return y(void 0,void 0,void 0,(function(){var e,n,r,o,i,a,s,c,u,d;return b(this,(function(h){return e=t.getService("transform"),n=t.getService("cursor"),r=t.getService("render"),o=t.getService("layout"),n.hasCursor()?(i=n.getCursor(),a=i.anchor,s=i.head,c=E(s,o),u=r.convertOffsetToModelOffset(a),d=r.convertOffsetToModelOffset(c),e.applyTransformation(new v([],d,u)),[2]):[2]}))}))},$=function(t){return y(void 0,void 0,void 0,(function(){var e,n,r,o,i,a;return b(this,(function(s){return e=t.getService("transform"),n=t.getService("cursor"),r=t.getService("render"),o=n.getCursor().anchor,0,i=r.convertOffsetToModelOffset(o),a=r.convertOffsetToModelOffset(0),e.applyTransformation(new v([],a,i)),[2]}))}))},G=function(t){return y(void 0,void 0,void 0,(function(){var e,n,r,o,i,a,s;return b(this,(function(c){return e=t.getService("transform"),n=t.getService("cursor"),r=t.getService("render"),o=n.getCursor().anchor,i=r.getDocSize()-1,a=r.convertOffsetToModelOffset(o),s=r.convertOffsetToModelOffset(i),e.applyTransformation(new v([],s,a)),[2]}))}))},q=function(t){return y(void 0,void 0,void 0,(function(){var e,n,r,o,i,a;return b(this,(function(s){return e=t.getService("transform"),n=t.getService("cursor"),r=t.getService("render"),n.hasCursor()?(0,o=r.getDocSize()-1,i=r.convertOffsetToModelOffset(0),a=r.convertOffsetToModelOffset(o),e.applyTransformation(new v([],a,i)),[2]):[2]}))}))},J=function(t,e){return y(void 0,void 0,void 0,(function(){var n,r,o,i,a,s,c,u,d,h,f,p;return b(this,(function(l){if(n=t.getService("transform"),r=t.getService("cursor"),o=t.getService("render"),i=t.getService("layout"),!r.hasCursor())return[2];if(a=i.resolvePosition(e).atReverseDepth(0),s=a.node,c=a.offset,s.size-s.whitespaceSize===0){if(!(u=s.previousCrossParentSibling))return[2];c+=(s=u).size}return d=e-c+s.size-s.whitespaceSize,h=e-c,f=o.convertOffsetToModelOffset(d),p=o.convertOffsetToModelOffset(h),n.applyTransformation(new v([],f,p)),[2]}))}))},X=function(t,e){return y(void 0,void 0,void 0,(function(){var n,r,o,i,a,s,c,u,d,h,f;return b(this,(function(p){return n=t.getService("transform"),r=t.getService("cursor"),o=t.getService("render"),i=t.getService("layout"),r.hasCursor()?(a=i.resolvePosition(e).atBlockDepth(),s=a.node,c=a.offset,u=e-c+s.size-1,d=e-c,h=o.convertOffsetToModelOffset(u),f=o.convertOffsetToModelOffset(d),n.applyTransformation(new v([],h,f)),[2]):[2]}))}))},Y=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(e){i(e)}}function s(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},Q=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Z=function(t){return Y(void 0,void 0,void 0,(function(){return Q(this,(function(e){return t.getService("history").undo(),[2]}))}))},tt=function(t){return Y(void 0,void 0,void 0,(function(){return Q(this,(function(e){return t.getService("history").redo(),[2]}))}))},et=function(){},nt=function(){function t(t,e,n){this.from=t,this.oldSize=e,this.newSize=n}return t.prototype.map=function(t){if(t<=this.from)return t;if(t>=this.from+this.oldSize)return t-this.oldSize+this.newSize;throw new Error("Offset no longer exists.")},t.prototype.mapRender=function(t,e){var n=e.convertOffsetToModelOffset(t),r=this.map(n);return e.convertModelOffsetToOffset(r)},t.prototype.reverse=function(){return new t(this.from,this.newSize,this.oldSize)},t}(),rt={map:function(t){return t},mapRender:function(t,e){return t},reverse:function(){return rt}},ot=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),it=function(t){function e(e,n,r){var o=t.call(this)||this;return o.path=e,o.key=n,o.value=r,o}return ot(e,t),e.prototype.map=function(t){return this},e.prototype.apply=function(t,n){var r=t,o=this.path.slice(),i=o.shift();if(i!==r.id)throw new Error("Path cannot be resolved.");for(;i=o.shift();){var a=r.children.find((function(t){return t.id===i}));if(!a)throw new Error("Path cannot be resolved.");r=a}var s=r.applyAttribute(this.key,this.value);return{change:this,reverseChange:new e(this.path,this.key,s),mapping:rt}},e}(et),at=n(1),st=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},ct=function(){function t(){this.ran=!1,this.inProgress=!1}return t.prototype.run=function(){if(this.ran)throw new Error("Already ran.");for(this.inProgress=!0;this.inProgress;)this.next();this.ran=!0},t.prototype.joinNodes=function(t,e){t.leaf?t.replace(0,t.text.length,t.text+e.text):t.replace(0,t.children.length,st(t.children.slice(),e.children.slice()));var n=t.parent;n.replace(0,n.children.length,n.children.filter((function(t){return t!==e})))},t}(),ut=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),dt=function(t){function e(e,n,r,o){var i=t.call(this)||this;return i.root=e,i.fragments=r,i.componentService=o,i.internalInsertedSize=0,i.depth=e.resolvePosition(n).depth,i.current={offset:n,index:0},i}return ut(e,t),Object.defineProperty(e.prototype,"insertedSize",{get:function(){return this.internalInsertedSize},enumerable:!1,configurable:!0}),e.prototype.next=function(){switch(this.state){case"text":this.handleText();break;case"split":this.handleSplit();break;case"leave":this.handleLeave();break;case"node":this.handleNode();break;case"end":this.handleEnd()}},e.prototype.handleText=function(){var t=this.root.resolvePosition(this.current.offset).atReverseDepth(0),e=t.node,n=t.index,r=this.currentFragment,o=r.content;e.replace(n,n,o),this.current={offset:this.current.offset+r.size,index:this.current.index+1},this.internalInsertedSize+=r.size},e.prototype.handleSplit=function(){var t=this.root.resolvePosition(this.current.offset).atReverseDepth(this.currentFragment.depth-1),e=t.node,n=t.offset,r=this.splitNode(e,n);this.current={offset:this.current.offset+r/2,index:this.current.index},this.internalInsertedSize+=r},e.prototype.handleLeave=function(){this.current={offset:this.current.offset+1,index:this.current.index}},e.prototype.handleNode=function(){var t=this.root.resolvePosition(this.current.offset).atReverseDepth(0),e=t.node,n=t.index,r=this.currentFragment,o=r.content;e.replace(n,n,o),o.length>0&&(this.joinNodeWithNextSibling(o[o.length-1]),this.joinNodeWithPreviousSibling(o[0])),this.current={offset:this.current.offset+r.size,index:this.current.index+1},this.internalInsertedSize+=r.size},e.prototype.handleEnd=function(){this.inProgress=!1},Object.defineProperty(e.prototype,"state",{get:function(){if(!this.currentFragment)return"end";var t=this.root.resolvePosition(this.current.offset);return t.depth>this.depth-this.currentFragment.depth?"split":t.depth<this.depth-this.currentFragment.depth?"leave":0===this.currentFragment.depth?"text":"node"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFragment",{get:function(){return this.current.index>=this.fragments.length?null:this.fragments[this.current.index]},enumerable:!1,configurable:!0}),e.prototype.splitNode=function(t,e){var n,r,o=0,i=this.componentService.getComponent(t.componentId),a=t.resolvePosition(e);1===a.depth?(n=i.buildModelNode(t.partId,t.id,t.text.substring(0,e-1),t.attributes,[]),r=i.buildModelNode(t.partId,Object(at.a)(),t.text.substring(e-1),t.attributes,[])):(0!==a.atDepth(1).offset&&(o+=this.splitNode(a.atDepth(1).node,a.atDepth(1).offset)),a=t.resolvePosition(e+o/2),n=i.buildModelNode(t.partId,t.id,"",t.attributes,t.children.slice(0,a.atDepth(0).index)),r=i.buildModelNode(t.partId,Object(at.a)(),"",t.attributes,t.children.slice(a.atDepth(0).index)));var s=t.parent,c=s.children.indexOf(t);return s.replace(c,c+1,[n,r]),o+=2},e.prototype.joinNodeWithNextSibling=function(t){var e=t.nextSibling;e&&t.canJoin(e)&&this.joinNodes(t,e)},e.prototype.joinNodeWithPreviousSibling=function(t){var e=t.previousSibling;e&&e.canJoin(t)&&this.joinNodes(e,t)},e}(ct),ht=function(t,e){this.content=t,this.depth=e,Array.isArray(t)?(this.contentType="nodes",this.size=t.reduce((function(t,e){return t+e.size}),0)):(this.contentType="text",this.size=t.length)},ft=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pt=function(t){function e(e,n,r){var o=t.call(this)||this;o.root=e,o.from=n,o.to=r,o.removedFragments=[];var i=e.resolvePosition(n).atReverseDepth(0).node;return o.current={offset:n,node:i,nodeFrom:-1,nodeTo:-1},o.updateCurrentNode(i),o}return ft(e,t),e.prototype.next=function(){switch(this.state){case"fullNode":this.handleFullNode();break;case"partialNode":this.handlePartialNode();break;case"text":this.handleText();break;case"forward":this.handleForward();break;case"enter":this.handleEnter();break;case"end":this.handleEnd()}},e.prototype.handleFullNode=function(){this.stepUp()},e.prototype.handlePartialNode=function(){var t=this.current.node.resolvePosition(this.current.offset-this.current.nodeFrom);if(1===t.depth){for(var e=t.atDepth(0).index,n=[],r=Math.min(this.to-this.current.nodeFrom,this.current.node.size),o=t.atDepth(0).offset,i=this.current.node.children.at(e);i&&o+i.size<=r;)n.push(i),o+=i.size,i=i.nextSibling;var a=e+n.length;this.recordRemovedNodes(n,t.depth),this.current.node.replace(e,a,[]),i&&this.joinNodeWithPreviousSibling(i)}this.stepDown()},e.prototype.handleText=function(){var t=this.current.offset-this.current.nodeFrom-1,e=Math.min(this.to-this.current.nodeFrom-1,this.current.node.size-2),n=this.current.node.replace(t,e,"");this.recordRemovedText(n)},e.prototype.handleForward=function(){this.stepForward()},e.prototype.handleEnter=function(){this.current.offset++},e.prototype.handleEnd=function(){this.inProgress=!1},e.prototype.stepUp=function(){var t=this.current.node.parent;this.updateCurrentNode(t)},e.prototype.stepDown=function(){if(0!==this.current.node.children.length){var t=this.current.offset-this.current.nodeFrom,e=this.current.node.resolvePosition(t),n=this.current.node.children.at(e.atDepth(0).index);this.updateCurrentNode(n)}},e.prototype.stepForward=function(){var t=this.current.node.nextSibling;if(t)this.updateCurrentNode(t),this.current.offset=this.current.nodeFrom;else{var e=this.current.node.parent;this.current.offset=this.current.nodeTo,this.updateCurrentNode(e)}},Object.defineProperty(e.prototype,"state",{get:function(){return this.current.offset>=this.to?"end":this.current.nodeTo-this.current.offset===1?"forward":this.current.offset===this.current.nodeFrom&&this.current.nodeTo<=this.to?"fullNode":this.current.offset===this.current.nodeFrom?"enter":this.current.node.leaf?"text":"partialNode"},enumerable:!1,configurable:!0}),e.prototype.recordRemovedNodes=function(t,e){this.removedFragments.push(new ht(t,e));var n=t.reduce((function(t,e){return t+e.size}),0);this.current.nodeTo-=n,this.to-=n},e.prototype.recordRemovedText=function(t){this.removedFragments.push(new ht(t,0)),this.current.nodeTo-=t.length,this.to-=t.length},e.prototype.joinNodeWithPreviousSibling=function(t){var e=t.previousSibling;if(e){var n=this.getOffsetToRoot(t);this.current.offset>=n-1&&(this.current.offset>n&&this.current.offset--,this.current.offset--),this.to-=2;var r=t.firstChild;this.joinNodes(e,t),r&&this.joinNodeWithPreviousSibling(r),this.current.node===t&&this.updateCurrentNode(e)}else t.parent&&this.joinNodeWithPreviousSibling(t.parent)},e.prototype.updateCurrentNode=function(t){this.current.node=t,this.current.nodeFrom=this.getOffsetToRoot(t),this.current.nodeTo=this.current.nodeFrom+t.size},e.prototype.getOffsetToRoot=function(t){for(var e=0,n=t;n.parent;)e+=this.getOffsetToParent(n),n=n.parent;return e},e.prototype.getOffsetToParent=function(t){for(var e=1,n=t.previousSibling;n;)e+=n.size,n=n.previousSibling;return e},e}(ct),lt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gt=function(t){function e(e,n,r){var o=t.call(this)||this;return o.from=e,o.to=n,o.fragments=r,o.validateInput(),o}return lt(e,t),e.prototype.map=function(t){return new e(t.map(this.from),t.map(this.to),this.fragments)},e.prototype.apply=function(t,n){this.validateFit(t);var r=new pt(t,this.from,this.to);r.run();var o=new dt(t,this.from,this.fragments,n);return o.run(),{change:this,reverseChange:new e(this.from,this.from+o.insertedSize,r.removedFragments),mapping:new nt(this.from,this.to-this.from,o.insertedSize)}},e.prototype.validateInput=function(){if(this.from>this.to)throw new Error("Range is invalid.");if(this.fragments.length>0)for(var t=!0,e=!1,n=this.fragments[0].depth,r=1,o=this.fragments.length;r<o;r++){var i=this.fragments[r];if(i.depth>n){if(!t)throw new Error("Fragments have invalid depths.")}else if(i.depth<n&&(t&&(t=!1,e=!0),!e))throw new Error("Fragments have invalid depths.");n=i.depth}},e.prototype.validateFit=function(t){var e=t.resolvePosition(this.from);if(Math.max.apply(Math,this.fragments.map((function(t){return t.depth})))>=e.depth)throw new Error("Fragments do not fit in range.")},e}(et),vt=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(e){i(e)}}function s(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},mt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};var yt=function(t,e){return vt(void 0,void 0,void 0,(function(){var n,r,o,i,a,s,c,u,d,h,f;return mt(this,(function(p){return n=t.getService("transform"),r=t.getService("cursor"),o=t.getService("render"),r.hasCursor()?(i=r.getCursor(),a=i.anchor,s=i.head,c=Math.min(a,s),u=Math.max(a,s),d=o.convertOffsetToModelOffset(c),h=o.convertOffsetToModelOffset(u),f=d+e.length,n.applyTransformation(new v([new gt(d,h,[new ht(e,0)])],f)),[2]):[2]}))}))},bt=function(t){return vt(void 0,void 0,void 0,(function(){var e,n,r,o,i,a,s,c,u,d;return mt(this,(function(h){if(e=t.getService("transform"),n=t.getService("cursor"),r=t.getService("render"),!n.hasCursor())return[2];if(o=n.getCursor(),i=o.anchor,a=o.head,i===a){if(0===a)return[2];s=a-1,c=a}else s=Math.min(i,a),c=Math.max(i,a);return u=r.convertOffsetToModelOffset(s),d=r.convertOffsetToModelOffset(c),e.applyTransformation(new v([new gt(u,d,[])],u)),[2]}))}))},wt=function(t){return vt(void 0,void 0,void 0,(function(){var e,n,r,o,i,a,s,c,u,d;return mt(this,(function(h){if(e=t.getService("transform"),n=t.getService("cursor"),r=t.getService("render"),!n.hasCursor())return[2];if(o=n.getCursor(),i=o.anchor,a=o.head,i===a){if(a>=r.getDocSize()-1)return[2];s=a,c=a+1}else s=Math.min(i,a),c=Math.max(i,a);return u=r.convertOffsetToModelOffset(s),d=r.convertOffsetToModelOffset(c),e.applyTransformation(new v([new gt(u,d,[])],u)),[2]}))}))},Ot=function(t){return vt(void 0,void 0,void 0,(function(){var e,n,r,o,i,a,s,c,u,d,h;return mt(this,(function(f){return e=t.getService("transform"),n=t.getService("cursor"),r=t.getService("render"),n.hasCursor()?(o=n.getCursor(),i=o.anchor,a=o.head,s=Math.min(i,a),c=Math.max(i,a),u=r.convertOffsetToModelOffset(s),d=r.convertOffsetToModelOffset(c),h=u+4,e.applyTransformation(new v([new gt(u,d,[new ht([],2)])],h)),[2]):[2]}))}))},xt=function(t,e,n,r,o){return vt(void 0,void 0,void 0,(function(){var i,a,s,c,u,d,h,f,p,l,g,m;return mt(this,(function(y){return i=t.getService("transform"),a=t.getService("cursor"),s=t.getService("render"),c=t.getService("model"),u=a.getCursor(),d=u.anchor,h=u.head,f=Math.min(d,h),p=Math.max(d,h),l=s.convertOffsetToModelOffset(f),g=s.convertOffsetToModelOffset(p),m=function t(e,n,r,o,i){var a=[];e.componentId===n&&e.partId===r&&a.push(e);var s=1;return e.children.forEach((function(e){if(s<=i&&o<=s+e.size){var c=Math.max(0,o-s),u=Math.min(e.size,i-s);a.push.apply(a,t(e,n,r,c,u))}s+=e.size})),a}(c.getRoot(),e,n,l,g),i.applyTransformation(new v(m.map((function(t){return new it(function(t){for(var e=[],n=t;n;)e.unshift(n.id),n=n.parent;return e}(t),r,o)})))),[2]}))}))},St=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(e){i(e)}}function s(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},Ct=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Et=function(t){return St(void 0,void 0,void 0,(function(){return Ct(this,(function(e){return t.getService("view").requestFocus(),[2]}))}))},Pt=function(t){return St(void 0,void 0,void 0,(function(){return Ct(this,(function(e){return t.getService("view").requestBlur(),[2]}))}))},Dt=function(){function t(){this.listeners=[]}return t.prototype.on=function(t){var e=this;return this.listeners.push(t),{dispose:function(){var n=e.listeners.indexOf(t);n<0||e.listeners.splice(n,1)}}},t.prototype.emit=function(t){this.listeners.forEach((function(e){return e(t)}))},t}(),jt=function(){function t(){this.commandsMap=new Map}return t.prototype.registerCommand=function(t,e){this.commandsMap.set(t,e)},t.prototype.getCommandHandler=function(t){return this.commandsMap.get(t)},t}(),Tt=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(e){i(e)}}function s(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},It=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},_t=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},kt=function(){function t(t,e){this.serviceRegistry=e,this.willExecuteCommandEventEmitter=new Dt,this.didExecuteCommandEventEmitter=new Dt,this.registry=new jt;for(var n=0,r=Object.entries(t.getConfig().commands);n<r.length;n++){var o=r[n],i=o[0],a=o[1];this.registry.registerCommand(i,a)}}return t.prototype.onWillExecuteCommand=function(t){return this.willExecuteCommandEventEmitter.on(t)},t.prototype.onDidExecuteCommand=function(t){return this.didExecuteCommandEventEmitter.on(t)},t.prototype.executeCommand=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return Tt(this,void 0,void 0,(function(){var n;return It(this,(function(r){switch(r.label){case 0:return(n=this.registry.getCommandHandler(t))?(this.willExecuteCommandEventEmitter.emit({commandId:t,args:e}),[4,n.apply(void 0,_t([this.serviceRegistry],e))]):[2];case 1:return r.sent(),this.didExecuteCommandEventEmitter.emit({commandId:t,args:e}),[2]}}))}))},t}(),Mt=function(){function t(t){void 0===t&&(t=[]),this.nodes=t}return Object.defineProperty(t.prototype,"length",{get:function(){return this.nodes.length},enumerable:!1,configurable:!0}),t.prototype.at=function(t){if(t<0||t>=this.nodes.length)throw new Error("Index "+t+" is out of range.");return this.nodes[t]},t.prototype.indexOf=function(t){return this.nodes.findIndex((function(e){return e.id===t.id}))},t.prototype.forEach=function(t){return this.nodes.forEach(t)},t.prototype.map=function(t){return this.nodes.map(t)},t.prototype.reduce=function(t,e){return this.nodes.reduce(t,e)},t.prototype.filter=function(t){return this.nodes.filter(t)},t.prototype.slice=function(t,e){return this.nodes.slice(t,e)},t.prototype.find=function(t){return this.nodes.find(t)},t}(),zt=function(){function t(t){this.id=t,this.parent=null,this.internalChildren=new Mt}return Object.defineProperty(t.prototype,"children",{get:function(){return this.internalChildren},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return 0===this.children.length?null:this.children.at(0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return 0===this.children.length?null:this.children.at(this.children.length-1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){if(!this.parent)return null;var t=this.parent.children,e=t.indexOf(this);if(e<0)throw new Error("Node is not a child of parent.");return 0===e?null:t.at(e-1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){if(!this.parent)return null;var t=this.parent.children,e=t.indexOf(this);if(e<0)throw new Error("Node is not a child of parent.");return e===t.length-1?null:t.at(e+1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousCrossParentSibling",{get:function(){var t=this.previousSibling;if(t)return t;var e=this.parent;if(!e||e.root)return null;var n=e.previousCrossParentSibling;return n?n.lastChild:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextCrossParentSibling",{get:function(){var t=this.nextSibling;if(t)return t;var e=this.parent;if(!e||e.root)return null;var n=e.nextCrossParentSibling;return n?n.firstChild:null},enumerable:!1,configurable:!0}),t.prototype.findDescendant=function(t){if(this.id===t)return this;if(this.leaf)return null;for(var e=0,n=this.children.length;e<n;e++){var r=this.children.at(e).findDescendant(t);if(r)return r}return null},t}(),Bt=function(){function t(t){this.depths=t}return Object.defineProperty(t.prototype,"depth",{get:function(){return this.depths.length},enumerable:!1,configurable:!0}),t.prototype.atDepth=function(t){if(t<0||t>=this.depths.length)throw new Error("Depth out of range.");return this.depths[t]},t.prototype.atReverseDepth=function(t){if(t<0||t>=this.depths.length)throw new Error("Reverse depth out of range.");return this.depths[this.depth-t-1]},t}(),Lt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rt=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},Nt=function(t){function e(e,n,r,o,i){var a=t.call(this,n)||this;return a.componentId=e,a.attributes=o,a.internalNeedRender=!0,a.childDidUpdateDisposableMap=new Map,a.didUpdateEventEmitter=new Dt,a.handleChildDidUpdate=function(){a.didUpdateEventEmitter.emit({})},a.internalText=r,a.internalChildren=new Mt(i),i.forEach((function(t){t.parent=a,a.childDidUpdateDisposableMap.set(t.id,t.onDidUpdate(a.handleChildDidUpdate))})),a.onDidUpdate((function(){a.internalSize=void 0,a.internalNeedRender=!0})),a}return Lt(e,t),Object.defineProperty(e.prototype,"text",{get:function(){return this.internalText},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return void 0===this.internalSize&&(this.leaf?this.internalSize=2+this.text.length:this.internalSize=this.children.reduce((function(t,e){return t+e.size}),2)),this.internalSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"needRender",{get:function(){return this.internalNeedRender},enumerable:!1,configurable:!0}),e.prototype.canJoin=function(t){return!1},e.prototype.clearNeedRender=function(){this.internalNeedRender=!1},e.prototype.applyAttribute=function(t,e){var n=this.attributes[t];return this.attributes[t]=e,this.didUpdateEventEmitter.emit({}),n},e.prototype.replace=function(t,e,n){var r,o=this;if(t>e)throw new Error("Range is invalid.");if(this.leaf){if("string"!==typeof n)throw new Error("Leaf node content must be string.");if(t<0||e>this.text.length)throw new Error("Range is invalid.")}else{if("string"===typeof n)throw new Error("Non-leaf node content must not be string.");if(t<0||e>this.children.length)throw new Error("Range is invalid.")}"string"===typeof n?(r=this.internalText.substring(t,e),this.internalText=this.internalText.slice(0,t)+n+this.internalText.slice(e)):(r=this.children.slice(t,e),this.internalChildren=new Mt(Rt(this.children.slice(0,t),n,this.children.slice(e))),this.children.slice(t,e).forEach((function(t){var e;return null===(e=o.childDidUpdateDisposableMap.get(t.id))||void 0===e?void 0:e.dispose()})),n.forEach((function(t){t.parent=o,o.childDidUpdateDisposableMap.set(t.id,t.onDidUpdate(o.handleChildDidUpdate))})));return this.didUpdateEventEmitter.emit({}),r},e.prototype.resolvePosition=function(t){if(t<0||t>=this.size)throw new Error("Offset "+t+" is out of range.");if(0===t)return new At([{node:this,offset:t,index:-1}]);if(this.leaf)return new At([{node:this,offset:t,index:t-1}]);for(var e=1,n=0,r=this.children.length;n<r;n++){if(e===t)return new At([{node:this,offset:t,index:n}]);var o=this.children.at(n),i=o.size;if(e+i>t){for(var a=o.resolvePosition(t-e),s=[{node:this,offset:t,index:n}],c=0;c<a.depth;c++)s.push(a.atDepth(c));return new At(s)}e+=i}return new At([{node:this,offset:t,index:this.children.length}])},e.prototype.onDidUpdate=function(t){return this.didUpdateEventEmitter.on(t)},e}(zt),At=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Lt(e,t),e}(Bt),Ht=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ft=function(t){function e(e,n,r,o){var i=t.call(this,e,n,"",r,o)||this;if(0===o.length)throw new Error("Doc node must have children.");return i}return Ht(e,t),Object.defineProperty(e.prototype,"root",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leaf",{get:function(){return!1},enumerable:!1,configurable:!0}),e}(Nt),Wt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ut=function(t){function e(e,n,r,o,i){var a=t.call(this,Object(at.a)())||this;return a.componentId=e,a.modelId=n,a.text=r,a.attributes=o,a.internalNeedLayout=!0,a.internalChildren=new Mt(i),i.forEach((function(t){t.parent=a})),a}return Wt(e,t),Object.defineProperty(e.prototype,"size",{get:function(){return void 0===this.internalSize&&(this.leaf?this.internalSize=this.text.length:this.internalSize=this.children.reduce((function(t,e){return t+e.size}),0)),this.internalSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"modelSize",{get:function(){return this.pseudo?0:(void 0===this.internalChildrenModelSize&&(this.internalChildrenModelSize=this.children.reduce((function(t,e){return t+e.modelSize}),0)),this.internalChildrenModelSize+2+this.text.length)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"needLayout",{get:function(){return this.internalNeedLayout},enumerable:!1,configurable:!0}),e.prototype.clearNeedLayout=function(){this.internalNeedLayout=!1},e.prototype.resolvePosition=function(t){if(t<0||t>=this.size)throw new Error("Offset "+t+" is out of range.");if(this.leaf)return new Vt([{node:this,offset:t,index:t}]);for(var e=0,n=0,r=this.children.length;n<r;n++){var o=this.children.at(n),i=o.size;if(e+i>t){for(var a=o.resolvePosition(t-e),s=[{node:this,offset:t,index:n}],c=0;c<a.depth;c++)s.push(a.atDepth(c));return new Vt(s)}e+=i}throw new Error("Offset cannot be resolved.")},e.prototype.convertOffsetToModelOffset=function(t){if(t<0||t>=this.size)throw new Error("Offset is out of range.");var e=0,n=this.pseudo?0:1;if(this.leaf)return n+t;for(var r=0,o=this.children.length;r<o;r++){var i=this.children.at(r),a=i.size;if(e+a>t)return n+i.convertOffsetToModelOffset(t-e);e+=a,n+=i.modelSize}throw new Error("Offset "+t+" is out of range.")},e.prototype.convertModelOffsetToOffset=function(t){if(t<0||t>=this.modelSize)throw new Error("Model offset is out of range.");var e=this.pseudo?0:1,n=0;if(t<=e)return 0;if(this.leaf)return t-e;for(var r=0,o=this.children.length;r<o;r++){var i=this.children.at(r),a=i.modelSize;if(e+a>t)return n+i.convertModelOffsetToOffset(t-e);e+=a,n+=i.size}throw new Error("Model offset "+t+" is out of range.")},e}(zt),Vt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Wt(e,t),e}(Bt),Kt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$t=function(t){function e(e,n,r,o){return t.call(this,e,n,"",r,o)||this}return Kt(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"doc"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leaf",{get:function(){return!1},enumerable:!1,configurable:!0}),e}(Ut),Gt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qt=function(t){function e(e,n,r,o,i,a,s,c){var u=t.call(this,o)||this;return u.domContainer=e,u.componentId=n,u.renderId=r,u.layoutId=o,u.text=i,u.style=a,u.domService=c,u.internalChildren=new Mt(s),s.forEach((function(t){t.parent=u})),u}return Gt(e,t),Object.defineProperty(e.prototype,"size",{get:function(){return void 0===this.internalSize&&(this.leaf?this.internalSize=this.text.length:this.internalSize=this.children.reduce((function(t,e){return t+e.size}),0)),this.internalSize},enumerable:!1,configurable:!0}),e}(zt),Jt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xt=function(t){function e(e,n,r,o,i,a,s){var c=t.call(this,e,n,r,o,"",i,a,s)||this;return c.attached=!1,c}return Jt(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"doc"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leaf",{get:function(){return!1},enumerable:!1,configurable:!0}),e}(qt),Yt=function(t,e){this.id=t,this.serviceRegistry=e},Qt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qt(e,t),Object.defineProperty(e.prototype,"partId",{get:function(){return"doc"},enumerable:!1,configurable:!0}),e.prototype.toDOM=function(t,e){for(var n=document.createElement("div"),r=1,o=this.children,i=0,a=o.length;i<a&&r<e;i++){var s=o.at(i),c=s.size,u=Math.max(0,t-r),d=Math.min(u+c,e-r);if(r+=c,!(u>c||d<0)){var h=s.toDOM(u,d);n.appendChild(h)}}return n},e}(Ft),te=function(t){function e(e,n,r,o,i,a,s,c,u,d){var h=t.call(this,e,n,r,o)||this;return h.width=i,h.height=a,h.paddingTop=s,h.paddingBottom=c,h.paddingLeft=u,h.paddingRight=d,h}return Qt(e,t),Object.defineProperty(e.prototype,"partId",{get:function(){return"doc"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pseudo",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return{}},enumerable:!1,configurable:!0}),e}($t),ee=function(t){function e(e,n,r,o,i,a,s){var c=t.call(this,e,n,r,o,i,a,s)||this;c.domContainer.style.textAlign="left",c.domContainer.style.cursor="text",c.domContainer.style.userSelect="none",c.domContainer.innerHTML="";var u=s.createElement("div");return u.setAttribute("data-tw-role","content-container"),a.map((function(t){return u.appendChild(t.domContainer)})),c.domContainer.appendChild(u),c}return Qt(e,t),Object.defineProperty(e.prototype,"partId",{get:function(){return"doc"},enumerable:!1,configurable:!0}),e}(Xt),ne=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qt(e,t),e.prototype.buildModelNode=function(t,e,n,r,o){return new Zt(this.id,e,r,o)},e.prototype.buildRenderNode=function(t,e,n,r,o){var i=this.serviceRegistry.getService("config");switch(t){case"doc":var a=i.getConfig().page;return new te(this.id,e,r,o,a.width,a.height,a.paddingTop,a.paddingBottom,a.paddingLeft,a.paddingRight);default:throw new Error("Invalid part ID.")}},e.prototype.buildViewNode=function(t,e,n,r,o,i,a,s,c,u,d,h,f){var p=this.serviceRegistry.getService("dom");switch(e){case"doc":return new ee(t,this.id,n,r,i,a,p);default:throw new Error("Invalid part ID.")}},e}(Yt),re=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),oe=function(t){function e(e,n,r,o){var i=t.call(this,e,n,"",r,o)||this;if(0===o.length)throw new Error("Branch node must have children.");return i}return re(e,t),Object.defineProperty(e.prototype,"root",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leaf",{get:function(){return!1},enumerable:!1,configurable:!0}),e}(Nt),ie=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ae=function(t){function e(e,n,r,o){return t.call(this,e,n,"",r,o)||this}return ie(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"block"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leaf",{get:function(){return!1},enumerable:!1,configurable:!0}),e}(Ut),se=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ce=function(t){function e(e,n,r,o){return t.call(this,e,n,r,o,[])||this}return se(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"text"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leaf",{get:function(){return!0},enumerable:!1,configurable:!0}),e}(Ut),ue={weight:400,size:16,family:"sans-serif",letterSpacing:0,underline:!1,italic:!1,strikethrough:!1,color:"black"},de=[" ","\n","\t"],he=function(){function t(t){this.$canvas=t.createElement("canvas")}return t.prototype.measure=function(t,e){var n=this.applyDefaultFont(e),r=this.$canvas.getContext("2d"),o=n.weight,i=n.size,a=this.fixFontFamily(n.family),s=n.letterSpacing;r.font=o+" "+i+"px "+a;var c=r.measureText(t);return{width:0===s||t.length<=1?c.width:c.width+(t.length-1)*s,height:i}},t.prototype.breakIntoWords=function(t){for(var e=[],n="",r=0,o=t.length;r<o;r++){var i=t[r];n+=i,de.includes(i)&&(e.push({text:n,whitespaceSize:1}),n="")}return n.length>0&&e.push({text:n,whitespaceSize:0}),e},t.prototype.applyDefaultFont=function(t){var e={};for(var n in ue)n in t&&void 0!==t[n]?e[n]=t[n]:e[n]=ue[n];return e},t.prototype.fixFontFamily=function(t){return t.indexOf(" ")>=0?"'"+t+"'":t},t}(),fe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pe=function(t){function e(e,n,r,o,i,a,s){return t.call(this,e,n,r,o,"",i,a,s)||this}return fe(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"block"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leaf",{get:function(){return!1},enumerable:!1,configurable:!0}),e}(qt),le=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ge=function(t){function e(e,n,r,o,i,a,s){return t.call(this,e,n,r,o,i,a,[],s)||this}return le(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"text"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leaf",{get:function(){return!0},enumerable:!1,configurable:!0}),e}(qt),ve=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),me=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},ye=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ve(e,t),Object.defineProperty(e.prototype,"partId",{get:function(){return"paragraph"},enumerable:!1,configurable:!0}),e.prototype.toDOM=function(t,e){for(var n=document.createElement("p"),r=1,o=this.children,i=0,a=o.length;i<a&&r<e;i++){var s=o.at(i),c=s.size,u=Math.max(0,t-r),d=Math.min(u+c,e-r);if(r+=c,!(u>c||d<0)){var h=s.toDOM(u,d);n.appendChild(h)}}return n},e}(oe),be=function(t){function e(e,n,r,o){return t.call(this,e,n,r,me(o,[new we(e,n)]))||this}return ve(e,t),Object.defineProperty(e.prototype,"partId",{get:function(){return"paragraph"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pseudo",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingTop",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingBottom",{get:function(){return 12},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingLeft",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingRight",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return{}},enumerable:!1,configurable:!0}),e.prototype.convertOffsetToModelOffset=function(e){return 1===this.size?this.resolvePosition(0).depth:e===this.size-1?t.prototype.convertOffsetToModelOffset.call(this,e-1)+1:t.prototype.convertOffsetToModelOffset.call(this,e)},e.prototype.convertModelOffsetToOffset=function(e){return e<=this.resolvePosition(0).depth?0:t.prototype.convertModelOffsetToOffset.call(this,e-1)+1>=this.size-1?this.size-1:t.prototype.convertModelOffsetToOffset.call(this,e)},e}(ae),we=function(t){function e(e,n){var r=t.call(this,e,n+".line-break"," ",null)||this;return r.componentId=e,r.paragraphModelId=n,r}return ve(e,t),Object.defineProperty(e.prototype,"partId",{get:function(){return"line-break"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pseudo",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingTop",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingBottom",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingLeft",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingRight",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"font",{get:function(){for(var t=this.previousSibling;t;){if("text"===t.type)return t.font;t=t.previousSibling}return ue},enumerable:!1,configurable:!0}),e}(ce),Oe=function(t){function e(e,n,r,o,i,a,s,c,u,d,h,f,p){var l=t.call(this,e,n,r,o,i,a,p)||this;return l.domContainer.style.width=s+"px",l.domContainer.style.height=c+"px",l.domContainer.style.paddingTop=u+"px",l.domContainer.style.paddingBottom=d+"px",l.domContainer.style.paddingLeft=h+"px",l.domContainer.style.paddingRight=f+"px",l.domContainer.style.lineHeight="1em",l.domContainer.innerHTML="",a.map((function(t){return l.domContainer.appendChild(t.domContainer)})),l}return ve(e,t),Object.defineProperty(e.prototype,"partId",{get:function(){return"paragraph"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"domContentContainer",{get:function(){return this.domContainer},enumerable:!1,configurable:!0}),e}(pe),xe=function(t){function e(e,n,r,o,i){return t.call(this,e,n,r,o," ",null,i)||this}return ve(e,t),Object.defineProperty(e.prototype,"partId",{get:function(){return"line-break"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"domContentContainer",{get:function(){return this.domContainer},enumerable:!1,configurable:!0}),e}(ge),Se=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ve(e,t),e.prototype.buildModelNode=function(t,e,n,r,o){return new ye(this.id,e,r,o)},e.prototype.buildRenderNode=function(t,e,n,r,o){switch(t){case"paragraph":return new be(this.id,e,r,o);default:throw new Error("Invalid part ID.")}},e.prototype.buildViewNode=function(t,e,n,r,o,i,a,s,c,u,d,h,f){var p=this.serviceRegistry.getService("dom");switch(e){case"paragraph":return new Oe(t,this.id,n,r,i,a,s,c,u,d,h,f,p);case"line-break":return new xe(t,this.id,n,r,p);default:throw new Error("Invalid part ID.")}},e}(Yt),Ce=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ee=function(t){function e(e,n,r,o){return t.call(this,e,n,r,o,[])||this}return Ce(e,t),Object.defineProperty(e.prototype,"root",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leaf",{get:function(){return!0},enumerable:!1,configurable:!0}),e}(Nt),Pe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),De=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Pe(e,t),Object.defineProperty(e.prototype,"partId",{get:function(){return"text"},enumerable:!1,configurable:!0}),e.prototype.canJoin=function(t){return this.componentId===t.componentId&&(this.partId===t.partId&&JSON.stringify(this.attributes)===JSON.stringify(t.attributes))},e.prototype.toDOM=function(t,e){var n=document.createElement("span");return n.innerText=this.text.substring(t-1,e-1),n},e}(Ee),je=function(t){function e(e,n,r,o,i){var a=t.call(this,e,n,o,i)||this;return a.textService=r,a}return Pe(e,t),Object.defineProperty(e.prototype,"partId",{get:function(){return"text"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pseudo",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingTop",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingBottom",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingLeft",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingRight",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this.textService.applyDefaultFont(this.attributes)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"font",{get:function(){return this.style},enumerable:!1,configurable:!0}),e}(ce),Te=function(t){function e(e,n,r,o,i,a,s,c,u,d,h,f,p){var l=t.call(this,e,n,r,o,i,a,p)||this;l.domContainer.style.display="inline-block",l.domContainer.style.whiteSpace="pre",l.domContainer.style.lineHeight="1em",l.domContainer.style.width=s+"px",l.domContainer.style.height=c+"px",l.domContainer.style.paddingTop=u+"px",l.domContainer.style.paddingBottom=d+"px",l.domContainer.style.paddingLeft=h+"px",l.domContainer.style.paddingRight=f+"px",l.domContainer.style.fontFamily=a.family,l.domContainer.style.fontSize=a.size+"px",l.domContainer.style.letterSpacing=a.letterSpacing+"px",l.domContainer.style.fontWeight=""+a.weight,l.domContainer.style.color=a.color,l.domContainer.style.textDecoration=a.underline?"underline":"",l.domContainer.style.fontStyle=a.italic?"italic":"",l.domContainer.innerHTML="";var g=l.findOrCreateDOMContentContainer();return g.setAttribute("data-tw-role","content-container"),g.style.textDecoration=a.strikethrough?"line-through":"",g.innerHTML=i,l.domContainer.appendChild(g),l}return Pe(e,t),Object.defineProperty(e.prototype,"partId",{get:function(){return"text"},enumerable:!1,configurable:!0}),e.prototype.findOrCreateDOMContentContainer=function(){for(var t=0,e=this.domContainer.children.length;t<e;t++){var n=this.domContainer.children[t];if("content-container"===n.getAttribute("data-tw-role"))return n}return this.domService.createElement("span")},e}(ge),Ie=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Pe(e,t),e.prototype.buildModelNode=function(t,e,n,r,o){return new De(this.id,e,n,r)},e.prototype.buildRenderNode=function(t,e,n,r,o){var i=this.serviceRegistry.getService("text");switch(t){case"text":return new je(this.id,e,i,n,r);default:throw new Error("Invalid part ID.")}},e.prototype.buildViewNode=function(t,e,n,r,o,i,a,s,c,u,d,h,f){var p=this.serviceRegistry.getService("dom");switch(e){case"text":return new Te(t,this.id,n,r,o,i,s,c,u,d,h,f,p);default:throw new Error("Invalid part ID.")}},e}(Yt),_e=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ke=function(t){function e(e,n,r,o,i){var a=t.call(this,e,n,null,r,"",null,o,i)||this;return a.layoutId=r,a}return _e(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"line"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leaf",{get:function(){return!1},enumerable:!1,configurable:!0}),e}(qt),Me=function(t,e){this.id=t,this.serviceRegistry=e},ze=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Be=function(t){function e(e,n,r,o,i,a,s,c,u,d,h){var f=t.call(this,e,n,r,o,h)||this;return f.width=i,f.height=a,f.paddingTop=s,f.paddingBottom=c,f.paddingLeft=u,f.paddingRight=d,f.domContainer.style.width=i+"px",f.domContainer.style.height=a+"px",f.domContainer.style.paddingTop=s+"px",f.domContainer.style.paddingBottom=c+"px",f.domContainer.style.paddingLeft=u+"px",f.domContainer.style.paddingRight=d+"px",f.domContainer.innerHTML="",o.map((function(t){return f.domContainer.appendChild(t.domContainer)})),f}return ze(e,t),Object.defineProperty(e.prototype,"partId",{get:function(){return"line"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"domContentContainer",{get:function(){return this.domContainer},enumerable:!1,configurable:!0}),e}(ke),Le=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ze(e,t),e.prototype.buildViewNode=function(t,e,n,r,o,i,a,s,c){var u=this.serviceRegistry.getService("dom");return new Be(t,this.id,e,n,r,o,i,a,s,c,u)},e}(Me),Re=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ne=function(t){function e(e,n,r,o,i){var a=t.call(this,e,n,null,r,"",null,o,i)||this;return a.layoutId=r,a}return Re(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"page"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leaf",{get:function(){return!1},enumerable:!1,configurable:!0}),e}(qt),Ae=function(t,e){this.id=t,this.serviceRegistry=e},He=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fe=function(t){function e(e,n,r,o,i,a,s,c,u,d,h){var f=t.call(this,e,n,r,o,h)||this;return f.domContainer.style.position="relative",f.domContainer.style.marginLeft="auto",f.domContainer.style.marginRight="auto",f.domContainer.style.width=i+"px",f.domContainer.style.height=a+"px",f.domContainer.style.paddingTop=s+"px",f.domContainer.style.paddingBottom=c+"px",f.domContainer.style.paddingLeft=u+"px",f.domContainer.style.paddingRight=d+"px",f.domContainer.innerHTML="",f.domContentContainer=f.findOrCreateDOMContentContainer(),f.domContentContainer.setAttribute("data-tw-role","content-container"),o.map((function(t){return f.domContentContainer.appendChild(t.domContainer)})),f.domContainer.appendChild(f.domContentContainer),f}return He(e,t),Object.defineProperty(e.prototype,"partId",{get:function(){return"page"},enumerable:!1,configurable:!0}),e.prototype.findOrCreateDOMContentContainer=function(){for(var t=0,e=this.domContainer.children.length;t<e;t++){var n=this.domContainer.children[t];if("content-container"===n.getAttribute("data-tw-role"))return n}return this.domService.createElement("div")},e}(Ne),We=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return He(e,t),e.prototype.buildViewNode=function(t,e,n,r,o,i,a,s,c){var u=this.serviceRegistry.getService("dom");return new Fe(t,this.id,e,n,r,o,i,a,s,c,u)},e}(Ae),Ue=function(){function t(){this.componentsMap=new Map}return t.prototype.registerComponent=function(t,e){this.componentsMap.set(t,e)},t.prototype.registerPageComponent=function(t){this.pageComponent=t},t.prototype.registerLineComponent=function(t){this.lineComponent=t},t.prototype.getComponent=function(t){var e=this.componentsMap.get(t);if(!e)throw new Error("Component "+t+" is not registered.");return e},t.prototype.getPageComponent=function(){if(!this.pageComponent)throw new Error("Page component is not registered.");return this.pageComponent},t.prototype.getLineComponent=function(){if(!this.lineComponent)throw new Error("Line component is not registered.");return this.lineComponent},t}(),Ve=function(){function t(t,e){this.configService=t,this.serviceRegistry=e,this.registry=new Ue;for(var n=0,r=Object.entries(t.getConfig().components);n<r.length;n++){var o=r[n],i=o[0],a=o[1];this.registry.registerComponent(i,new a(i,e))}this.registry.registerPageComponent(new We("page",e)),this.registry.registerLineComponent(new Le("line",e))}return t.prototype.getComponent=function(t){return this.registry.getComponent(t)},t.prototype.getPageComponent=function(){return this.registry.getPageComponent()},t.prototype.getLineComponent=function(){return this.registry.getLineComponent()},t}(),Ke=function(){function t(t,e){this.config=t,this.applyExternalConfig(e)}return t.prototype.getConfig=function(){return this.config},t.prototype.applyExternalConfig=function(t){var e=t["tw.core"];e&&e.page&&(this.config.page=e.page)},t}(),$e=function(){return($e=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Ge=function(){function t(t,e,n){this.renderService=e,this.modelService=n,this.internalCursor=null,this.didUpdateEventEmitter=new Dt,t.getConfig().cursor.disable||(this.internalCursor={anchor:0,head:0,leftLock:0})}return Object.defineProperty(t.prototype,"hasCursor",{get:function(){return!!this.internalCursor},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{get:function(){return this.assertCursor(),$e({},this.internalCursor)},enumerable:!1,configurable:!0}),t.prototype.set=function(t,e){this.assertCursor(),this.internalCursor={anchor:t,head:e,leftLock:this.internalCursor.leftLock},this.didUpdateEventEmitter.emit({})},t.prototype.setLeftLock=function(t){this.assertCursor(),this.internalCursor={anchor:this.internalCursor.anchor,head:this.internalCursor.head,leftLock:t}},t.prototype.onDidUpdate=function(t){return this.didUpdateEventEmitter.on(t)},t.prototype.assertCursor=function(){if(!this.internalCursor)throw new Error("Cursor is disabled.")},t}(),qe=function(){function t(t,e,n){this.state=new Ge(t,e,n)}return t.prototype.hasCursor=function(){return this.state.hasCursor},t.prototype.getCursor=function(){return this.state.cursor},t.prototype.setCursor=function(t,e){this.state.set(t,e)},t.prototype.setLeftLock=function(t){this.state.setLeftLock(t)},t.prototype.onDidUpdate=function(t){return this.state.onDidUpdate(t)},t}(),Je=function(){function t(){}return t.prototype.getWindow=function(){return window},t.prototype.getDocument=function(){return document},t.prototype.getBody=function(){return document.body},t.prototype.createElement=function(t){return document.createElement(t)},t.prototype.createContainer=function(){var t=this.createElement("div");return t.setAttribute("data-tw-role","container"),t},t.prototype.createHiddenIframe=function(){var t=this.createElement("iframe");return t.scrolling="no",t.src="about:blank",t.style.width="0",t.style.height="0",t.style.border="none",t.style.position="fixed",t.style.zIndex="-1",t.style.opacity="0",t.style.overflow="hidden",t.style.left="-1000000px",t.style.top="-1000000px",t},t.prototype.createMutationObserver=function(t){return new MutationObserver(t)},t}(),Xe=function(){function t(){this.internalTransformationResults=[],this.beganAt=Date.now(),this.internalEndedAt=this.beganAt}return Object.defineProperty(t.prototype,"endedAt",{get:function(){return this.internalEndedAt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformationResults",{get:function(){return this.internalTransformationResults},enumerable:!1,configurable:!0}),t.prototype.recordTransformationResult=function(t){this.transformationResults.push(t),this.internalEndedAt=Date.now()},t}(),Ye=function(){function t(t,e){var n=this;this.configService=t,this.transformService=e,this.actions=[],this.offset=-1,this.handleDidApplyTransformation=function(t){var e=t.result;if(!(n.offset+1<n.actions.length&&n.actions[n.offset+1].transformationResults.some((function(t){return t.reverseTransformation===e.transformation})))&&!(n.offset>=0&&n.actions[n.offset].transformationResults.some((function(t){return t.transformation===e.transformation}))))if(n.offset<0)n.recordToNewAction(e);else{var r=n.actions[n.offset],o=Date.now();o-r.beganAt<n.maxCollapseDuration&&o-r.endedAt<n.collapseThreshold?n.recordToLastAction(e):n.recordToNewAction(e)}};var r=t.getConfig();this.maxCollapseDuration=r.history.maxCollapseDuration,this.collapseThreshold=r.history.collapseThreshold,e.onDidApplyTransformation(this.handleDidApplyTransformation)}return t.prototype.undo=function(){var t=this.consumeNextUndoableAction();if(t){var e=t.transformationResults;if(0!==e.length)for(var n=e.length-1;n>=0;n--){var r=e[n];this.transformService.applyTransformation(r.reverseTransformation)}}},t.prototype.redo=function(){var t=this,e=this.consumeNextRedoableAction();e&&e.transformationResults.forEach((function(e){return t.transformService.applyTransformation(e.transformation)}))},t.prototype.consumeNextUndoableAction=function(){if(!(this.offset<0)){var t=this.actions[this.offset];return this.offset--,t}},t.prototype.consumeNextRedoableAction=function(){if(!(this.offset>=this.actions.length-1))return this.offset++,this.actions[this.offset]},t.prototype.recordToNewAction=function(t){if(0!==t.changeResults.length){this.offset<this.actions.length-1&&this.actions.splice(this.offset+1,this.actions.length-1-this.offset);var e=new Xe;e.recordTransformationResult(t),this.actions.push(e),this.offset++}},t.prototype.recordToLastAction=function(t){var e=this.actions[this.offset];if(!e)throw new Error("Error recording applied transformation, history is empty.");this.offset<this.actions.length-1&&this.actions.splice(this.offset+1,this.actions.length-1-this.offset),e.recordTransformationResult(t)},t}(),Qe=function(){function t(t,e){this.state=new Ye(t,e)}return t.prototype.undo=function(){this.state.undo()},t.prototype.redo=function(){this.state.redo()},t}();function Ze(){return navigator.platform.startsWith("Linux")?"Linux":["Windows","Win16","Win32"].includes(navigator.platform)?"Windows":["Macintosh","MacIntel","MacPPC","Mac68K"].includes(navigator.platform)?"macOS":"Unknown"}var tn=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},en=function(){function t(t,e,n){var r=this;this.configService=t,this.commandService=e,this.viewService=n,this.keyBindings=new Map,this.handleDidPressKey=function(t){var e,n=r.keyBindings.get(t.key);n&&(n.preventDefault&&t.originalKeyboardEvent.preventDefault(),(e=r.commandService).executeCommand.apply(e,tn([n.command],n.args)))};var o=this.configService.getConfig().keyBindings;switch(this.bindKeys(o.common),Ze()){case"macOS":o.macos&&this.bindKeys(o.macos);break;case"Windows":o.windows&&this.bindKeys(o.windows);break;case"Linux":o.linux&&this.bindKeys(o.linux)}n.onDidPressKey(this.handleDidPressKey)}return t.prototype.bindKeys=function(t){for(var e in t){var n=t[e];this.keyBindings.set(e,{command:n.command,args:n.args||[],preventDefault:n.preventDefault||!1})}},t}(),nn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rn=function(t){function e(e,n,r,o,i,a,s){var c=t.call(this,Object(at.a)())||this;return c.renderId=e,c.text=n,c.paddingTop=o,c.paddingBottom=i,c.paddingLeft=a,c.paddingRight=s,c.internalNeedView=!0,c.internalChildren=new Mt(r),r.forEach((function(t){t.parent=c})),c}return nn(e,t),Object.defineProperty(e.prototype,"size",{get:function(){return void 0===this.internalSize&&(this.leaf?this.internalSize=this.text.length:this.internalSize=this.children.reduce((function(t,e){return t+e.size}),0)),this.internalSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingVertical",{get:function(){return this.paddingTop+this.paddingBottom},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingHorizontal",{get:function(){return this.paddingLeft+this.paddingRight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"innerWidth",{get:function(){return this.width-this.paddingHorizontal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"innerHeight",{get:function(){return this.height-this.paddingVertical},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"needView",{get:function(){return this.internalNeedView},enumerable:!1,configurable:!0}),e.prototype.clearNeedView=function(){this.internalNeedView=!1},e.prototype.resolvePosition=function(t){if(t<0||t>=this.size)throw new Error("Offset "+t+" is out of range.");if(this.leaf)return new on([{node:this,offset:t,index:t}]);for(var e=0,n=0,r=this.children.length;n<r;n++){var o=this.children.at(n),i=o.size;if(e+i>t){for(var a=o.resolvePosition(t-e),s=[{node:this,offset:t,index:n}],c=0;c<a.depth;c++)s.push(a.atDepth(c));return new on(s)}e+=i}throw new Error("Offset cannot be resolved.")},e}(zt),on=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return nn(e,t),e.prototype.atLineDepth=function(){for(var t=this.depth-1;t>=0;t--){var e=this.atDepth(t);if("line"===e.node.type)return e}throw new Error("Line depth not found.")},e.prototype.atBlockDepth=function(){for(var t=this.depth-1;t>=0;t--){var e=this.atDepth(t);if("block"===e.node.type)return e}throw new Error("Block depth not found.")},e}(Bt),an=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sn=function(t){function e(e,n,r){var o=t.call(this,e," ",[],0,0,0,0)||this;return o.width=n,o.height=r,o}return an(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"atom"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leaf",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.convertCoordinatesToOffset=function(t,e){return t<this.innerWidth/2?0:1},e.prototype.resolveBoundingBoxes=function(t,e){if(t<0||e>this.size||t>e)throw new Error("Invalid range.");return{node:this,boundingBoxes:[{from:t,to:e,width:t===e?0:this.innerWidth,height:this.innerHeight,left:0===t?this.paddingLeft:this.paddingLeft+this.innerWidth,right:1===e?this.paddingRight:this.paddingRight+this.innerWidth,top:this.paddingTop,bottom:this.paddingBottom}],children:[]}},e}(rn),cn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),un=function(t){function e(e,n,r,o,i,a,s){var c=t.call(this,e,"",n,o,i,a,s)||this;return c.width=r,c}return cn(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"block"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leaf",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return void 0===this.internalHeight&&(this.internalHeight=this.children.reduce((function(t,e){return t+e.height}),this.paddingVertical)),this.internalHeight},enumerable:!1,configurable:!0}),e.prototype.convertCoordinatesToOffset=function(t,e){for(var n=0,r=0,o=0,i=this.children.length;o<i;o++){var a=this.children.at(o),s=a.height;if(e>=r&&e<=r+s){n+=a.convertCoordinatesToOffset(t,0);break}n+=a.size,r+=s}if(n===this.size){var c=this.lastChild;c&&(n-=c.size,n+=c.convertCoordinatesToOffset(t,c.height))}return n},e.prototype.resolveBoundingBoxes=function(t,e){var n=this;if(t<0||e>this.size||t>e)throw new Error("Invalid range.");var r=[],o=[],i=0,a=0;return this.children.forEach((function(s){if(i+s.size>t&&i<=e){var c=Math.max(0,t-i),u=Math.min(s.size,e-i),d=s.resolveBoundingBoxes(c,u);r.push(d),d.boundingBoxes.forEach((function(t){o.push({from:i+c,to:i+u,width:t.width,height:t.height,top:a+n.paddingTop+t.top,bottom:n.height-n.paddingTop-a-s.height+t.bottom,left:t.left,right:t.right})}))}i+=s.size,a+=s.height})),{node:this,boundingBoxes:o,children:r}},e}(rn),dn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hn=function(t){function e(e,n,r,o,i,a,s,c){var u=t.call(this,e,"",n,i,a,s,c)||this;return u.width=r,u.height=o,u}return dn(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"doc"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leaf",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.convertCoordinatesToOffset=function(t,e){throw new Error("Use page to convert coordinates to offset.")},e.prototype.resolveBoundingBoxes=function(t,e){if(t<0||e>this.size||t>e)throw new Error("Invalid range.");var n=[],r=0;return this.children.forEach((function(o){if(r+o.size>t&&r<=e){var i=Math.max(0,t-r),a=Math.min(o.size,e-r),s=o.resolveBoundingBoxes(i,a);n.push(s)}r+=o.size})),{node:this,boundingBoxes:[],children:n}},e}(rn),fn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pn=function(t){function e(e,n){var r=t.call(this,null,"",e,0,8,0,0)||this;return r.width=n,r}return fn(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"line"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leaf",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return void 0===this.internalHeight&&(this.internalHeight=this.children.reduce((function(t,e){return Math.max(t,e.height)}),0)+this.paddingVertical),this.internalHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentWidth",{get:function(){return void 0===this.internalContentWidth&&(this.internalContentWidth=this.children.reduce((function(t,e){return t+e.width}),0)),this.internalContentWidth},enumerable:!1,configurable:!0}),e.prototype.convertCoordinatesToOffset=function(t,e){for(var n=0,r=0,o=0,i=this.children.length;o<i;o++){var a=this.children.at(o),s=a.width;if(t>=r&&t<=r+s){n+=a.convertCoordinatesToOffset(t-r,0);break}n+=a.size,r+=s}if(n===this.size){var c=this.lastChild;if(c&&"text"===c.type){var u=c.lastChild;u&&u.whitespaceSize>0&&n--}}return n},e.prototype.resolveBoundingBoxes=function(t,e){if(t<0||e>this.size||t>e)throw new Error("Invalid range.");for(var n=[],r=0,o=null,i=0,a=0,s=this.children.length;a<s&&!(r>e);a++){var c=this.children.at(a);if(r+c.size>t){var u=Math.max(0,t-r),d=Math.min(c.size,e-r),h=c.resolveBoundingBoxes(u,d);n.push(h),null===o&&(o=i+h.boundingBoxes[0].left),i+=h.boundingBoxes.slice(0,h.boundingBoxes.length-1).reduce((function(t,e){return t+e.left+e.width+e.right}),0),i+=h.boundingBoxes[0].left+h.boundingBoxes[0].width}else i+=c.width;r+=c.size}return{node:this,boundingBoxes:[{from:t,to:e,width:i-o,height:t===e?this.innerHeight:this.height,left:this.paddingLeft+o,right:this.width-this.paddingLeft-i,top:t===e?this.paddingTop:0,bottom:t===e?this.paddingBottom:0}],children:n}},e}(rn),ln=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gn=function(t){function e(e,n,r,o,i,a,s){var c=t.call(this,null,"",e,o,i,a,s)||this;return c.width=n,c.height=r,c}return ln(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"page"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leaf",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentHeight",{get:function(){return void 0===this.internalContentHeight&&(this.internalContentHeight=this.children.reduce((function(t,e){return t+e.height}),0)),this.internalContentHeight},enumerable:!1,configurable:!0}),e.prototype.convertCoordinatesToOffset=function(t,e){for(var n=0,r=0,o=Math.min(Math.max(t-this.paddingLeft,0),this.innerWidth),i=Math.min(Math.max(e-this.paddingTop,0),this.innerHeight),a=0,s=this.children.length;a<s;a++){var c=this.children.at(a),u=c.height;if(i>=r&&i<=r+u){n+=c.convertCoordinatesToOffset(o,i-r);break}n+=c.size,r+=u}if(n===this.size){var d=this.lastChild;d&&(n-=d.size,n+=d.convertCoordinatesToOffset(o,d.height))}return n},e.prototype.resolveBoundingBoxes=function(t,e){var n=this;if(t<0||e>this.size||t>e)throw new Error("Invalid range.");var r=[],o=[],i=0,a=0;return this.children.forEach((function(s){if(i+s.size>t&&i<=e){var c=Math.max(0,t-i),u=Math.min(s.size,e-i),d=s.resolveBoundingBoxes(c,u);r.push(d),d.boundingBoxes.forEach((function(t){o.push({from:i+c,to:i+u,width:t.width,height:t.height,top:a+n.paddingTop+t.top,bottom:n.height-n.paddingTop-a-s.height+t.bottom,left:t.left+n.paddingLeft,right:t.right+n.paddingRight})}))}i+=s.size,a+=s.height})),{node:this,boundingBoxes:o,children:r}},e}(rn),vn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mn=function(t){function e(e,n,r,o,i,a,s){var c=t.call(this,e,"",n,r,o,i,a)||this;return c.font=s,c}return vn(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"text"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leaf",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return void 0===this.internalWidth&&(this.internalWidth=this.children.reduce((function(t,e){return t+e.width}),this.paddingHorizontal)),this.internalWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return void 0===this.internalHeight&&(this.internalHeight=this.children.reduce((function(t,e){return Math.max(t,e.height)}),0)+this.paddingVertical),this.internalHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trimmedWidth",{get:function(){if(void 0===this.internalTrimmedWidth){var t=this.lastChild;this.internalTrimmedWidth=t?this.width-t.width+t.trimmedWidth:0}return this.internalTrimmedWidth},enumerable:!1,configurable:!0}),e.prototype.convertCoordinatesToOffset=function(t,e){for(var n=0,r=0,o=0,i=this.children.length;o<i;o++){var a=this.children.at(o),s=a.width;if(r+s>=t){n+=a.convertCoordinatesToOffset(t-r,0);break}n+=a.size,r+=s}return n},e.prototype.resolveBoundingBoxes=function(t,e){if(t<0||e>this.size||t>e)throw new Error("Invalid range.");for(var n=[],r=0,o=null,i=0,a=0,s=this.children.length;a<s&&!(r>e);a++){var c=this.children.at(a);if(r+c.size>t){var u=Math.max(0,t-r),d=Math.min(c.size,e-r),h=c.resolveBoundingBoxes(u,d);n.push(h),null===o&&(o=i+h.boundingBoxes[0].left),i+=h.boundingBoxes.slice(0,h.boundingBoxes.length-1).reduce((function(t,e){return t+e.left+e.width+e.right}),0),i+=h.boundingBoxes[0].left+h.boundingBoxes[0].width}else i+=c.width;r+=c.size}return{node:this,boundingBoxes:[{from:t,to:e,width:i-o,height:this.innerHeight,left:this.paddingLeft+o,right:this.width-this.paddingLeft-i,top:this.paddingTop,bottom:this.paddingBottom}],children:n}},e}(rn),yn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bn=function(t){function e(e,n,r,o,i){var a=t.call(this,e,n,[],0,0,0,0)||this;return a.whitespaceSize=r,a.font=o,a.textService=i,a}return yn(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"word"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leaf",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){var t;return void 0===this.internalWidth&&(t=this.measure(),this.internalWidth=t[0],this.internalHeight=t[1]),this.internalWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t;return void 0===this.internalHeight&&(t=this.measure(),this.internalWidth=t[0],this.internalHeight=t[1]),this.internalHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trimmedWidth",{get:function(){if(void 0===this.internalTrimmedWidth){var t=this.text.substring(0,this.text.length-this.whitespaceSize);this.internalTrimmedWidth=this.textService.measure(t,this.font).width}return this.internalTrimmedWidth},enumerable:!1,configurable:!0}),e.prototype.convertCoordinatesToOffset=function(t,e){for(var n=0,r=this.text,o=0,i=r.length;o<i;o++){var a=this.textService.measure(r.substring(0,o),this.font).width;if(!(a<t))return t-n<a-t?o-1:o;n=a}return t-n<this.width-t?r.length-1:r.length},e.prototype.resolveBoundingBoxes=function(t,e){if(t<0||e>this.size||t>e)throw new Error("Invalid range.");if(0===t&&e===this.size)return{node:this,boundingBoxes:[{from:t,to:e,width:this.innerWidth,height:this.innerHeight,left:this.paddingLeft,right:this.paddingRight,top:this.paddingTop,bottom:this.paddingBottom}],children:[]};if(t===e){var n=this.textService.measure(this.text.slice(0,t),this.font).width;return{node:this,boundingBoxes:[{from:t,to:e,width:0,height:this.innerHeight,left:this.paddingLeft+n,right:this.width-this.paddingLeft-n,top:this.paddingTop,bottom:this.paddingBottom}],children:[]}}var r=this.textService.measure(this.text.slice(0,t),this.font).width,o=this.textService.measure(this.text.slice(0,e),this.font).width;return{node:this,boundingBoxes:[{from:t,to:e,width:o-r,height:this.innerHeight,left:this.paddingLeft+r,right:this.innerWidth-this.paddingLeft-o,top:this.paddingTop,bottom:this.paddingBottom}],children:[]}},e.prototype.breakAt=function(t){return[new e(this.renderId,this.text.substring(0,t),0,this.font,this.textService),new e(this.renderId,this.text.substring(t),this.whitespaceSize,this.font,this.textService)]},e.prototype.measure=function(){var t=this.textService.measure(this.text,this.font);return[t.width,t.height]},e}(rn),wn=function(){function t(t){this.textService=t}return t.prototype.updateDoc=function(t,e){var n=this;if(!e.needLayout&&t)return t;var r=[],o={};t&&t.children.forEach((function(t){r.push(t),t.children.forEach((function(t){if(!t.renderId)throw new Error("Render ID missing on layout node.");o[t.renderId]=o[t.renderId]||[],o[t.renderId].push(t)}))}));var i=[];return e.children.forEach((function(t){switch(t.type){case"block":i.push.apply(i,n.updateBlock(o[t.id]||[],t,e.width-e.paddingLeft-e.paddingRight));break;default:throw new Error("Child type "+t.type+" is invalid.")}})),e.clearNeedLayout(),this.buildDoc(e,this.reflowPages(r,i,e.width,e.height,e.paddingTop,e.paddingBottom,e.paddingLeft,e.paddingRight))},t.prototype.updateBlock=function(t,e,n){var r=this;if(!e.needLayout&&t.length>0)return t;for(var o=[],i={},a=0,s=t;a<s.length;a++){s[a].children.forEach((function(t){o.push(t),t.children.forEach((function(t){if(!t.renderId)throw new Error("Render ID missing on layout node.");i[t.renderId]=i[t.renderId]||[],i[t.renderId].push(t)}))}))}var c=[];return e.children.forEach((function(t){switch(t.type){case"text":c.push.apply(c,r.updateText(i[t.id]||[],t));break;case"atom":c.push.apply(c,r.updateAtom(i[t.id]||[],t));break;default:throw new Error("Child type "+t.type+" is invalid.")}})),e.clearNeedLayout(),[this.buildBlock(e,this.reflowLines(o,c,n-e.paddingLeft-e.paddingRight),n)]},t.prototype.updateText=function(t,e){var n=this;if(!e.needLayout&&t.length>0)return t;var r=[];return this.textService.breakIntoWords(e.text).forEach((function(t){r.push(n.buildWord(e,t.text,t.whitespaceSize))})),e.clearNeedLayout(),[this.buildText(e,r)]},t.prototype.updateAtom=function(t,e){return!e.needLayout&&t.length>0?t:(e.clearNeedLayout(),[this.buildAtom(e)])},t.prototype.buildDoc=function(t,e){return new hn(t.id,e,t.width,t.height,t.paddingTop,t.paddingBottom,t.paddingLeft,t.paddingRight)},t.prototype.buildBlock=function(t,e,n){if("block"!==t.type)throw new Error("Expected block.");return new un(t.id,e,n,t.paddingTop,t.paddingBottom,t.paddingLeft,t.paddingRight)},t.prototype.buildText=function(t,e){if("text"!==t.type)throw new Error("Expected text.");return new mn(t.id,e,t.paddingTop,t.paddingBottom,t.paddingLeft,t.paddingRight,t.font)},t.prototype.buildWord=function(t,e,n){if("text"!==t.type)throw new Error("Expected text.");return new bn(t.id,e,n,t.font,this.textService)},t.prototype.buildAtom=function(t){if("atom"!==t.type)throw new Error("Expected atom.");return new sn(t.id,t.width,t.height)},t.prototype.reflowPages=function(t,e,n,r,o,i,a,s){var c=r-o-i;e=e.slice();for(var u=[];e.length>0;){if(u.length<t.length){for(var d=t[u.length],h=!1,f=0,p=d.children.length;f<p;f++){if(d.children.at(f).id!==e[f].id){h=!0;break}}if(!h){u.push(d),e.splice(0,d.children.length);continue}}for(var l=[],g=0,v=e.shift();v&&g+v.height<=c;)l.push(v),g+=v.height,v=e.shift();if(v){for(var m=[],y=0,b=v.children.length;y<b;y++){var w=v.children.at(y);if(g+w.height+v.paddingVertical>c)break;m.push(w),g+=w.height}if(m.length>0)switch(v.type){case"block":var O=new un(v.renderId,m,n,v.paddingTop,v.paddingBottom,v.paddingLeft,v.paddingRight);l.push(O),g+=O.height;var x=new un(v.renderId,v.children.slice(m.length),n,v.paddingTop,v.paddingBottom,v.paddingLeft,v.paddingRight);e.unshift(x);break;default:throw new Error("Invalid node type encountered while reflowing page.")}else e.unshift(v)}var S=new gn(l,n,r,o,i,a,s);u.push(S)}return u},t.prototype.reflowLines=function(t,e,n){e=e.slice();for(var r=[];e.length>0;){if(r.length<r.length){for(var o=t[r.length],i=!1,a=0,s=o.children.length;a<s;a++){if(o.children.at(a).id!==e[a].id){i=!0;break}}if(!i){r.push(o),e.splice(0,o.children.length);continue}}for(var c=[],u=0,d=e.shift();d&&u+d.width<=n;)c.push(d),u+=d.width,d=e.shift();if(d){for(var h=d.children.slice(),f=[],p=0;p<h.length;p++){var l=h[p];if("word"===l.type&&l.width>n){var g=l.convertCoordinatesToOffset(n,0);l.resolveBoundingBoxes(g,g).boundingBoxes[0].left>n&&g--;var v=l.breakAt(g),m=v[0],y=v[1];l=m,h.splice(p,1,m,y)}if(u+l.width>n)break;f.push(l),u+=l.width}if(f.length>0)switch(d.type){case"text":var b=d,w=new mn(b.renderId,f,b.paddingTop,b.paddingBottom,b.paddingLeft,b.paddingRight,b.font);c.push(w),u+=w.width;var O=new mn(b.renderId,h.slice(f.length),b.paddingTop,b.paddingBottom,b.paddingLeft,b.paddingRight,b.font);e.unshift(O);break;case"atom":d.width>n&&0===c.length?c.push(d):e.unshift(d);break;default:throw new Error("Invalid node type encountered while reflowing page.")}else e.unshift(d)}var x=new pn(c,n);r.push(x)}return r},t}(),On=function(){function t(t,e){var n=this;this.renderService=t,this.textService=e,this.didUpdateLayoutStateEventEmitter=new Dt,this.engine=new wn(e),this.internalDoc=this.engine.updateDoc(null,t.getDoc()),t.onDidUpdateRenderState((function(t){return n.handleDidUpdateRenderStateEvent(t)}))}return Object.defineProperty(t.prototype,"doc",{get:function(){return this.internalDoc},enumerable:!1,configurable:!0}),t.prototype.onDidUpdateLayoutState=function(t){return this.didUpdateLayoutStateEventEmitter.on(t)},t.prototype.handleDidUpdateRenderStateEvent=function(t){this.update()},t.prototype.update=function(){var t=this.renderService.getDoc();this.internalDoc=this.engine.updateDoc(this.doc,t),this.didUpdateLayoutStateEventEmitter.emit({})},t}(),xn=function(){function t(t,e){this.state=new On(t,e)}return t.prototype.onDidUpdateLayoutState=function(t){this.state.onDidUpdateLayoutState(t)},t.prototype.getDoc=function(){return this.state.doc},t.prototype.resolvePosition=function(t){return this.state.doc.resolvePosition(t)},t.prototype.resolveBoundingBoxes=function(t,e){return this.state.doc.resolveBoundingBoxes(t,e)},t}(),Sn=function(){function t(t,e){this.root=t,this.componentService=e,this.didUpdateEventEmitter=new Dt}return t.prototype.applyChange=function(t){var e=t.apply(this.root,this.componentService);return this.didUpdateEventEmitter.emit({changeResult:e}),e},t.prototype.onDidUpdate=function(t){return this.didUpdateEventEmitter.on(t)},t}(),Cn=function(){function t(t,e){this.state=new Sn(t,e)}return t.prototype.getRoot=function(){return this.state.root},t.prototype.getRootSize=function(){return this.state.root.size},t.prototype.applyChange=function(t){return this.state.applyChange(t)},t.prototype.resolvePosition=function(t){return this.state.root.resolvePosition(t)},t.prototype.toDOM=function(t,e){return this.state.root.toDOM(t,e)},t.prototype.fromDOM=function(t){return[this.getRoot()]},t.prototype.onDidUpdateModelState=function(t){this.state.onDidUpdate(t)},t}(),En=function(){function t(t,e){var n=this;this.componentService=t,this.modelService=e,this.didUpdateRenderStateEventEmitter=new Dt;var r=e.getRoot();this.internalDoc=this.updateNode(null,r),e.onDidUpdateModelState((function(t){return n.handleDidUpdateModelState(t)}))}return t.prototype.onDidUpdateRenderState=function(t){return this.didUpdateRenderStateEventEmitter.on(t)},Object.defineProperty(t.prototype,"doc",{get:function(){return this.internalDoc},enumerable:!1,configurable:!0}),t.prototype.handleDidUpdateModelState=function(t){this.update()},t.prototype.update=function(){var t=this.modelService.getRoot();this.internalDoc=this.updateNode(this.doc,t),this.didUpdateRenderStateEventEmitter.emit({})},t.prototype.updateNode=function(t,e){var n=this;if(!e.needRender&&t)return t;var r={};t&&t.children.forEach((function(t){t.modelId&&(r[t.modelId]=t)}));var o=[];return e.children.forEach((function(t){o.push(n.updateNode(r[t.id]||null,t))})),e.clearNeedRender(),this.buildNode(e,o)},t.prototype.buildNode=function(t,e){var n=this.componentService.getComponent(t.componentId).buildRenderNode(t.partId,t.id,t.text,t.attributes,e);if(!n)throw new Error("Error building render node from model node "+t.id+".");return n},t}(),Pn=function(){function t(t,e){this.state=new En(t,e)}return t.prototype.onDidUpdateRenderState=function(t){this.state.onDidUpdateRenderState(t)},t.prototype.getDoc=function(){return this.state.doc},t.prototype.getDocSize=function(){return this.state.doc.size},t.prototype.convertOffsetToModelOffset=function(t){return this.state.doc.convertOffsetToModelOffset(t)},t.prototype.convertModelOffsetToOffset=function(t){return this.state.doc.convertModelOffsetToOffset(t)},t.prototype.resolvePosition=function(t){return this.state.doc.resolvePosition(t)},t.prototype.getStylesBetween=function(t,e){var n={},r=this.state.doc;return this.extractStyle(n,r,t,e),n},t.prototype.extractStyle=function(t,e,n,r){var o=this;if(!(n>r)){var i=t[e.componentId]=t[e.componentId]||{};(i[e.partId||""]=i[e.partId||""]||[]).push(e.style);var a=0;e.children.forEach((function(e){var i=e.size;if(r-a>=0&&n-a<i){var s=Math.max(0,Math.min(i,n-a)),c=Math.max(0,Math.min(i,r-a));o.extractStyle(t,e,s,c)}a+=i}))}},t}(),Dn=function(){function t(){this.services={}}return t.prototype.registerService=function(t,e){this.services[t]=e},t.prototype.getService=function(t){var e=this.services[t];if(!e)throw new Error("Service "+t+" is not registered.");return e},t}(),jn=function(){function t(t,e,n,r,o){this.modelService=t,this.componentService=e,this.cursorService=n,this.renderService=r,this.layoutService=o,this.didApplyTransformationEventEmitter=new Dt}return t.prototype.applyTransformation=function(t){var e=t.apply(this.modelService,this.cursorService,this.renderService,this.layoutService);return this.didApplyTransformationEventEmitter.emit({result:e}),e},t.prototype.onDidApplyTransformation=function(t){return this.didApplyTransformationEventEmitter.on(t)},t}(),Tn=function(){function t(t,e,n,r,o,i,a){var s=this;this.instanceId=t,this.configService=e,this.domService=n,this.cursorService=r,this.layoutService=o,this.viewService=i,this.transformService=a,this.blinkInterval=null,this.blinkState=!0,this.domSelections=[],this.attached=!1;var c=e.getConfig().cursor;this.caretColor=c.caretColor,this.caretInactiveColor=c.caretInactiveColor,this.selectionColor=c.selectionColor,this.selectionInactiveColor=c.selectionInactiveColor,this.domCaret=n.createElement("div"),this.domCaret.className="tw--cursor--caret",this.domCaret.setAttribute("data-tw-instance",this.instanceId),this.domCaret.style.position="absolute",this.domCaret.style.userSelect="none",this.domCaret.style.pointerEvents="none",this.domCaret.style.width="2px",this.domCaret.style.marginLeft="-1px",a.onDidApplyTransformation((function(t){return s.handleDidApplyTransformation(t)})),i.onDidFocus((function(t){return s.handleDidFocus(t)})),i.onDidBlur((function(t){return s.handleDidBlur(t)}))}return t.prototype.attach=function(){if(this.attached)throw new Error("Already attached to the DOM.");this.attached=!0,this.updateView()},t.prototype.updateView=function(){var t=this;if(this.attached){this.clearDOMSelections();var e,n,r,o,i,a=this.cursorService.getCursor(),s=a.anchor,c=a.head,u=Math.min(s,c),d=Math.max(s,c),h=this.layoutService.resolveBoundingBoxes(u,d),f=this.viewService.getDoc(),p=this.layoutService.getDoc(),l=this.viewService.isFocused(),g="",v=-1,m="",y=-1;if(h.children.forEach((function(e){var n=p.children.indexOf(e.node),r=f.children.at(n).domContentContainer;e.boundingBoxes.forEach((function(n,o){if(g||(g=e.node.id,v=o),m=e.node.id,y=o,0!==n.width){var i=t.buildDOMSelection(n);i.style.background=l?t.selectionColor:t.selectionInactiveColor,r.appendChild(i),t.domSelections.push(i)}}))})),c<s)e=g,n=(i=h.children.find((function(t){return t.node.id===g})).boundingBoxes[v]).left,r=i.top,o=i.height;else e=m,n=(i=h.children.find((function(t){return t.node.id===m})).boundingBoxes[y]).left+i.width,r=i.top,o=i.height;if(c===s){this.domCaret.style.display="block",this.domCaret.style.top=r+"px",this.domCaret.style.left=n+"px",this.domCaret.style.height=o+"px",this.domCaret.style.background=l?this.caretColor:this.caretInactiveColor;var b=f.children.find((function(t){return t.id===e})).domContentContainer;this.domCaret.parentElement&&this.domCaret.parentElement!==b&&this.domCaret.parentElement.removeChild(this.domCaret),this.domCaret.parentElement||b.appendChild(this.domCaret),this.blinkStop(),l&&this.blinkStart()}else this.domCaret.style.display="none",this.blinkStop()}},t.prototype.blinkStart=function(){var t=this;null===this.blinkInterval&&(this.blinkState=!0,this.blinkInterval=window.setInterval((function(){t.blinkState=!t.blinkState,t.updateDOMBlink()}),500))},t.prototype.blinkStop=function(){null!==this.blinkInterval&&(this.domCaret.style.visibility="visible",clearInterval(this.blinkInterval),this.blinkInterval=null)},t.prototype.updateDOMBlink=function(){this.blinkState?this.domCaret.style.visibility="visible":this.domCaret.style.visibility="hidden"},t.prototype.clearDOMSelections=function(){this.domSelections.forEach((function(t){t.parentElement&&t.parentElement.removeChild(t)})),this.domSelections=[]},t.prototype.buildDOMSelection=function(t){var e=document.createElement("div");return e.className="tw--cursor--selection",e.setAttribute("data-tw-instance",this.instanceId),e.style.position="absolute",e.style.top=t.top+"px",e.style.left=t.left+"px",e.style.width=t.width+"px",e.style.height=t.height+"px",e.style.userSelect="none",e.style.pointerEvents="none",e},t.prototype.handleDidApplyTransformation=function(t){this.updateView()},t.prototype.handleDidFocus=function(t){this.updateView()},t.prototype.handleDidBlur=function(t){this.updateView()},t}(),In=function(){function t(t){var e=this;this.$contentEditable=t,this.didCopyEventEmitter=new Dt,this.didPasteEventEmitter=new Dt,this.handleCopy=function(t){t.preventDefault(),e.didCopyEventEmitter.emit({})},this.handlePaste=function(t){t.preventDefault();var n=t.clipboardData;n&&e.didPasteEventEmitter.emit({data:n})},t.addEventListener("copy",this.handleCopy),t.addEventListener("paste",this.handlePaste)}return t.prototype.onDidCopy=function(t){return this.didCopyEventEmitter.on(t)},t.prototype.onDidPaste=function(t){return this.didPasteEventEmitter.on(t)},t}(),_n=function(){function t(t){var e=this;this.$contentEditable=t,this.didFocusEventEmitter=new Dt,this.didBlurEventEmitter=new Dt,this.handleFocus=function(){e.didFocusEventEmitter.emit({})},this.handleBlur=function(){e.didBlurEventEmitter.emit({})},t.addEventListener("focus",this.handleFocus),t.addEventListener("blur",this.handleBlur)}return t.prototype.onDidFocus=function(t){return this.didFocusEventEmitter.on(t)},t.prototype.onDidBlur=function(t){return this.didBlurEventEmitter.on(t)},t}(),kn=function(){function t(t,e){var n=this;this.$contentEditable=t,this.domService=e,this.composing=!1,this.didInsertEventEmitter=new Dt,this.didPressKeyEventEmitter=new Dt,this.compositionDidStartEventEmitter=new Dt,this.compositionDidEndEventEmitter=new Dt,this.keyInterpreter=new Mn,this.handleDidMutate=function(){setTimeout((function(){if(!n.composing){var t=n.$contentEditable.innerText;n.$contentEditable.innerHTML="",0!==t.length&&n.didInsertEventEmitter.emit({content:t})}}))},this.handleKeyDown=function(t){var e=n.keyInterpreter.interpretFromKeyboardEvent(t);e&&n.didPressKeyEventEmitter.emit({key:e,originalKeyboardEvent:t})},this.handleCompositionStart=function(){n.composing=!0},this.handleCompositionEnd=function(){n.composing=!0},this.mutationObserver=e.createMutationObserver(this.handleDidMutate),t.addEventListener("keydown",this.handleKeyDown),t.addEventListener("compositionstart",this.handleCompositionStart),t.addEventListener("compositionend",this.handleCompositionEnd),this.mutationObserver.observe(t,{subtree:!0,characterData:!0,childList:!0})}return t.prototype.onDidInsert=function(t){return this.didInsertEventEmitter.on(t)},t.prototype.onDidPressKey=function(t){return this.didPressKeyEventEmitter.on(t)},t.prototype.onCompositionDidStart=function(t){return this.compositionDidStartEventEmitter.on(t)},t.prototype.onCompositionDidEnd=function(t){return this.compositionDidEndEventEmitter.on(t)},t}(),Mn=function(){function t(){}return t.prototype.interpretFromKeyboardEvent=function(t){var e;switch(t.key){case"Control":case"Shift":case"Alt":case"Meta":return;case"ArrowLeft":e="left";break;case"ArrowRight":e="right";break;case"ArrowUp":e="up";break;case"ArrowDown":e="down";break;default:e=t.key.toLowerCase()}if(t.metaKey)switch(Ze()){case"macOS":e="cmd+"+e;break;case"Windows":e="win+"+e;break;case"Linux":default:e="meta+"+e}return t.altKey&&(e="alt+"+e),t.shiftKey&&(e="shift+"+e),t.ctrlKey&&(e="ctrl+"+e),e},t}(),zn=function(){function t(t,e,n,r){var o=this;this.instanceId=t,this.viewService=e,this.domService=n,this.layoutService=r,this.clickThreshold=250,this.consecutiveClickThreshold=250,this.lastPointerDown=null,this.lastClick=null,this.consecutiveClickCount=0,this.pointerDidDownEventEmitter=new Dt,this.pointerDidMoveEventEmitter=new Dt,this.pointerDidUpEventEmitter=new Dt,this.pointerDidClickEventEmitter=new Dt,this.handleMouseDown=function(t){var e=o.resolveOffset(t.clientX,t.clientY);if(null!==e){t.preventDefault(),o.lastPointerDown={timestamp:Date.now(),offset:e};var n=null!==o.lastClick&&Date.now()-o.lastClick.timestamp<o.consecutiveClickThreshold;o.pointerDidDownEventEmitter.emit({offset:e,consecutive:n})}},this.handleMouseMove=function(t){var e=o.resolveOffset(t.clientX,t.clientY);null!==e&&o.pointerDidMoveEventEmitter.emit({pointerDown:null!==o.lastPointerDown,offset:e})},this.handleMouseUp=function(t){if(null!==o.lastPointerDown){var e=o.lastPointerDown;o.lastPointerDown=null;var n=o.resolveOffset(t.clientX,t.clientY);if(null!==n){var r=Date.now(),i=e.offset===n&&r-e.timestamp<o.clickThreshold;if(o.pointerDidUpEventEmitter.emit({}),i){if(null!==o.lastClick)r-o.lastClick.timestamp>o.consecutiveClickThreshold&&(o.consecutiveClickCount=0);o.consecutiveClickCount++,o.lastClick={timestamp:Date.now(),offset:n},o.pointerDidClickEventEmitter.emit({offset:n,consecutiveCount:o.consecutiveClickCount})}}}};var i=n.getWindow();i.addEventListener("mousedown",this.handleMouseDown),i.addEventListener("mousemove",this.handleMouseMove),i.addEventListener("mouseup",this.handleMouseUp)}return t.prototype.onPointerDidDown=function(t){return this.pointerDidDownEventEmitter.on(t)},t.prototype.onPointerDidMove=function(t){return this.pointerDidMoveEventEmitter.on(t)},t.prototype.onPointerDidUp=function(t){return this.pointerDidUpEventEmitter.on(t)},t.prototype.onPointerDidClick=function(t){return this.pointerDidClickEventEmitter.on(t)},t.prototype.resolveOffset=function(t,e){for(var n=this.viewService.getDoc(),r=this.layoutService.getDoc(),o=0,i=0,a=n.children.length;i<a;i++){var s=n.children.at(i),c=r.children.at(i),u=s.domContainer.getBoundingClientRect();if(u.left<=t&&u.right>=t&&u.top<=e&&u.bottom>=e){var d=t-u.left,h=e-u.top;return o+c.convertCoordinatesToOffset(d,h)}o+=c.size}return null},t}(),Bn=function(){function t(t,e,n,r,o,i){var a=this;this.instanceId=t,this.domService=e,this.commandService=n,this.modelService=r,this.viewService=o,this.layoutService=i,this.focused=!1,this.composing=!1,this.mouseDown=!1,this.handleDidInsert=function(t){a.commandService.executeCommand("tw.state.insert",t.content)},this.handleCompositionDidStart=function(t){a.composing=!0},this.handleCompositionDidEnd=function(t){a.composing=!1},this.handlePointerDidDown=function(t){a.focused||a.commandService.executeCommand("tw.view.focus"),t.consecutive||a.commandService.executeCommand("tw.cursor.move",t.offset)},this.handlePointerDidMove=function(t){t.pointerDown&&a.commandService.executeCommand("tw.cursor.moveHead",t.offset)},this.handlePointerDidClick=function(t){switch(t.consecutiveCount){case 1:break;case 2:a.commandService.executeCommand("tw.cursor.selectWord",t.offset);break;case 3:default:a.commandService.executeCommand("tw.cursor.selectBlock",t.offset)}},this.handleDidFocus=function(t){a.focused=!0},this.handleDidBlur=function(t){a.focused=!1},this.handleCopy=function(t){a.commandService.executeCommand("tw.clipboard.copy")},this.handlePaste=function(t){var e=t.data.getData("text/html"),n=a.domService.createElement("html");n.innerHTML=e;var r=n.querySelector("body");if(r){var o=Array.prototype.slice.call(r.children),i=a.modelService.fromDOM(o);console.log(i)}},this.iframe=e.createHiddenIframe(),this.$contentEditable=this.createContentEditable(),this.keyboardObserver=new kn(this.$contentEditable,e),this.keyboardObserver.onDidInsert(this.handleDidInsert),this.keyboardObserver.onCompositionDidStart(this.handleCompositionDidStart),this.keyboardObserver.onCompositionDidEnd(this.handleCompositionDidEnd),this.pointerObserver=new zn(t,o,e,i),this.pointerObserver.onPointerDidDown(this.handlePointerDidDown),this.pointerObserver.onPointerDidMove(this.handlePointerDidMove),this.pointerObserver.onPointerDidClick(this.handlePointerDidClick),this.focusObserver=new _n(this.$contentEditable),this.focusObserver.onDidFocus(this.handleDidFocus),this.focusObserver.onDidBlur(this.handleDidBlur),this.clipboardObserver=new In(this.$contentEditable),this.clipboardObserver.onDidCopy(this.handleCopy),this.clipboardObserver.onDidPaste(this.handlePaste)}return t.prototype.onDidPressKey=function(t){this.keyboardObserver.onDidPressKey(t)},t.prototype.onDidFocus=function(t){this.focusObserver.onDidFocus(t)},t.prototype.onDidBlur=function(t){this.focusObserver.onDidBlur(t)},t.prototype.attach=function(){var t=this;this.domService.getBody().appendChild(this.iframe),setTimeout((function(){t.iframe.contentDocument.body.appendChild(t.$contentEditable)}))},t.prototype.requestFocus=function(){this.$contentEditable.focus()},t.prototype.requestBlur=function(){this.$contentEditable.blur()},t.prototype.isFocused=function(){return this.focused},t.prototype.isComposing=function(){return this.composing},t.prototype.createContentEditable=function(){var t=this.domService.createElement("div");return t.contentEditable="true",t.style.whiteSpace="pre",t},t}(),Ln=function(){function t(t,e,n,r,o){var i=this;this.instanceId=t,this.componentService=e,this.layoutService=n,this.renderService=r,this.domService=o,this.didUpdateViewStateEventEmitter=new Dt,this.domContainer=null;var a=n.getDoc(),s=r.getDoc();this.internalDoc=this.updateNode(null,a,s),n.onDidUpdateLayoutState((function(t){return i.handleDidUpdateLayoutStateEvent(t)}))}return t.prototype.onDidUpdateViewState=function(t){return this.didUpdateViewStateEventEmitter.on(t)},Object.defineProperty(t.prototype,"doc",{get:function(){return this.internalDoc},enumerable:!1,configurable:!0}),t.prototype.attach=function(t){this.domContainer=t,this.reattachDoc()},t.prototype.handleDidUpdateLayoutStateEvent=function(t){this.update()},t.prototype.update=function(){var t=this.layoutService.getDoc(),e=this.renderService.getDoc();this.internalDoc=this.updateNode(this.doc,t,e),this.reattachDoc(),this.didUpdateViewStateEventEmitter.emit({})},t.prototype.reattachDoc=function(){this.domContainer&&(this.domContainer.innerHTML="",this.domContainer.appendChild(this.doc.domContainer))},t.prototype.updateNode=function(t,e,n){var r=this;if(!e.needView&&t)return t;var o={};t&&t.children.forEach((function(t){t.layoutId&&(o[t.layoutId]=t)}));var i={};n&&n.children.forEach((function(t){i[t.id]=t}));var a=[];"text"!==e.type&&e.children.forEach((function(t){var e=o[t.id]||null,s=null;if(t.renderId&&!(s=i[t.renderId]||null))throw new Error("Render node not found.");a.push(r.updateNode(e,t,s||n))})),e.clearNeedView();var s=t?t.domContainer:this.domService.createContainer();return this.buildNode(s,e,n,a)},t.prototype.buildNode=function(t,e,n,r){switch(e.type){case"page":return this.buildPageNode(t,e,r);case"line":return this.buildLineNode(t,e,r)}var o=this.componentService.getComponent(n.componentId),i="text"===e.type?e.children.map((function(t){return t.text})).join(""):e.text,a=o.buildViewNode(t,n.partId,n.id,e.id,i,n.style,r,e.width,e.height,e.paddingTop,e.paddingBottom,e.paddingLeft,e.paddingRight);if(!a)throw new Error("Error building view node from render node "+n.id+".");return this.applyMetadataToDOMContainer(a),a},t.prototype.buildPageNode=function(t,e,n){var r=this.componentService.getPageComponent().buildViewNode(t,e.id,n,e.width,e.height,e.paddingTop,e.paddingBottom,e.paddingLeft,e.paddingRight);return this.applyMetadataToDOMContainer(r),r},t.prototype.buildLineNode=function(t,e,n){var r=this.componentService.getLineComponent().buildViewNode(t,e.id,n,e.width,e.height,e.paddingTop,e.paddingBottom,e.paddingLeft,e.paddingRight);return this.applyMetadataToDOMContainer(r),r},t.prototype.applyMetadataToDOMContainer=function(t){var e=t.domContainer,n=t.componentId,r=t.partId,o=t.id;e.className="tw--"+n+"--"+r,e.setAttribute("data-tw-instance",this.instanceId),n&&e.setAttribute("data-tw-component",n),r&&e.setAttribute("data-tw-part",r),e.setAttribute("data-tw-id",o)},t}(),Rn=function(){function t(t,e,n,r,o,i,a,s,c,u){this.state=new Ln(t,r,i,s,n),this.domController=new Bn(t,n,c,o,this,i),this.cursor=new Tn(t,e,n,a,i,this,u)}return t.prototype.onDidUpdateViewState=function(t){this.state.onDidUpdateViewState(t)},t.prototype.onDidFocus=function(t){this.domController.onDidFocus(t)},t.prototype.onDidBlur=function(t){this.domController.onDidBlur(t)},t.prototype.onDidPressKey=function(t){this.domController.onDidPressKey(t)},t.prototype.getDoc=function(){return this.state.doc},t.prototype.isFocused=function(){return this.domController.isFocused()},t.prototype.attach=function(t){this.state.attach(t),this.cursor.attach(),this.domController.attach()},t.prototype.requestFocus=function(){this.domController.requestFocus()},t.prototype.requestBlur=function(){this.domController.requestBlur()},t}(),Nn=function(){function t(t,e){this.instanceId=Object(at.a)(),this.serviceRegistry=new Dn,this.configService=new Ke(this.buildBaseConfig(),e),this.serviceRegistry.registerService("config",this.configService),this.domService=new Je,this.serviceRegistry.registerService("dom",this.domService),this.textService=new he(this.domService),this.serviceRegistry.registerService("text",this.textService),this.commandService=new kt(this.configService,this.serviceRegistry),this.serviceRegistry.registerService("command",this.commandService),this.componentService=new Ve(this.configService,this.serviceRegistry),this.serviceRegistry.registerService("component",this.componentService),this.modelService=new Cn(t,this.componentService),this.serviceRegistry.registerService("model",this.modelService),this.renderService=new Pn(this.componentService,this.modelService),this.serviceRegistry.registerService("render",this.renderService),this.cursorService=new qe(this.configService,this.renderService,this.modelService),this.serviceRegistry.registerService("cursor",this.cursorService),this.layoutService=new xn(this.renderService,this.textService),this.serviceRegistry.registerService("layout",this.layoutService),this.transformService=new jn(this.modelService,this.componentService,this.cursorService,this.renderService,this.layoutService),this.serviceRegistry.registerService("transform",this.transformService),this.viewService=new Rn(this.instanceId,this.configService,this.domService,this.componentService,this.modelService,this.layoutService,this.cursorService,this.renderService,this.commandService,this.transformService),this.serviceRegistry.registerService("view",this.viewService),this.historyService=new Qe(this.configService,this.transformService),this.serviceRegistry.registerService("history",this.historyService),this.keyBindingService=new en(this.configService,this.commandService,this.viewService),this.serviceRegistry.registerService("keyBinding",this.keyBindingService)}return t.prototype.setContent=function(t){this.transformService.applyTransformation(new v([new gt(1,this.modelService.getRootSize()-1,[new ht(t.children.slice(),0)])]))},t.prototype.attach=function(t){this.viewService.attach(t)},t.prototype.getServiceRegistry=function(){return this.serviceRegistry},t.prototype.buildBaseConfig=function(){return{commands:{"tw.clipboard.copy":p,"tw.clipboard.paste":l,"tw.cursor.move":P,"tw.cursor.moveBackwardByLine":T,"tw.cursor.moveForwardByLine":I,"tw.cursor.moveBackward":D,"tw.cursor.moveForward":j,"tw.cursor.moveBackwardByWord":_,"tw.cursor.moveForwardByWord":k,"tw.cursor.moveToLineStart":M,"tw.cursor.moveToLineEnd":z,"tw.cursor.moveToDocStart":B,"tw.cursor.moveToDocEnd":L,"tw.cursor.moveHead":R,"tw.cursor.moveHeadBackwardByLine":H,"tw.cursor.moveHeadForwardByLine":F,"tw.cursor.moveHeadBackward":N,"tw.cursor.moveHeadForward":A,"tw.cursor.moveHeadBackwardByWord":W,"tw.cursor.moveHeadForwardByWord":U,"tw.cursor.moveHeadToLineStart":V,"tw.cursor.moveHeadToLineEnd":K,"tw.cursor.moveHeadToDocStart":$,"tw.cursor.moveHeadToDocEnd":G,"tw.cursor.selectAll":q,"tw.cursor.selectWord":J,"tw.cursor.selectBlock":X,"tw.history.undo":Z,"tw.history.redo":tt,"tw.state.insert":yt,"tw.state.deleteBackward":bt,"tw.state.deleteForward":wt,"tw.state.breakLine":Ot,"tw.state.applyAttribute":xt,"tw.view.focus":Et,"tw.view.blur":Pt},components:{doc:ne,paragraph:Se,text:Ie},cursor:{disable:!1,caretColor:"hsla(213, 100%, 50%, 1)",caretInactiveColor:"hsla(0, 0%, 0%, 0.5)",selectionColor:"hsla(213, 100%, 50%, 0.2)",selectionInactiveColor:"hsla(0, 0%, 0%, 0.08)"},history:{collapseThreshold:500,maxCollapseDuration:2e3},keyBindings:{common:{left:{command:"tw.cursor.moveBackward",preventDefault:!0},right:{command:"tw.cursor.moveForward",preventDefault:!0},up:{command:"tw.cursor.moveBackwardByLine",preventDefault:!0},down:{command:"tw.cursor.moveForwardByLine",preventDefault:!0},"shift+left":{command:"tw.cursor.moveHeadBackward",preventDefault:!0},"shift+right":{command:"tw.cursor.moveHeadForward",preventDefault:!0},"shift+up":{command:"tw.cursor.moveHeadBackwardByLine",preventDefault:!0},"shift+down":{command:"tw.cursor.moveHeadForwardByLine",preventDefault:!0},backspace:{command:"tw.state.deleteBackward",preventDefault:!0},delete:{command:"tw.state.deleteForward",preventDefault:!0},enter:{command:"tw.state.breakLine",preventDefault:!0}},macos:{"alt+left":{command:"tw.cursor.moveBackwardByWord"},"alt+right":{command:"tw.cursor.moveForwardByWord"},"shift+alt+left":{command:"tw.cursor.moveHeadBackwardByWord"},"shift+alt+right":{command:"tw.cursor.moveHeadForwardByWord"},"cmd+left":{command:"tw.cursor.moveToLineStart"},"cmd+right":{command:"tw.cursor.moveToLineEnd"},"cmd+up":{command:"tw.cursor.moveToDocStart"},"cmd+down":{command:"tw.cursor.moveToDocEnd"},"shift+cmd+left":{command:"tw.cursor.moveHeadToLineStart"},"shift+cmd+right":{command:"tw.cursor.moveHeadToLineEnd"},"shift+cmd+up":{command:"tw.cursor.moveHeadToDocStart"},"shift+cmd+down":{command:"tw.cursor.moveHeadToDocEnd"},"cmd+a":{command:"tw.cursor.selectAll"},"cmd+z":{command:"tw.history.undo",preventDefault:!0},"shift+cmd+z":{command:"tw.history.redo",preventDefault:!0}},windows:{"ctrl+left":{command:"tw.cursor.moveBackwardByWord"},"ctrl+right":{command:"tw.cursor.moveForwardByWord"},"ctrl+shift+left":{command:"tw.cursor.moveHeadBackwardByWord"},"ctrl+shift+right":{command:"tw.cursor.moveHeadForwardByWord"},home:{command:"tw.cursor.moveToLineStart"},end:{command:"tw.cursor.moveToLineEnd"},"ctrl+home":{command:"tw.cursor.moveToDocStart"},"ctrl+end":{command:"tw.cursor.moveToDocEnd"},"shift+home":{command:"tw.cursor.moveHeadToLineStart"},"shift+end":{command:"tw.cursor.moveHeadToLineEnd"},"ctrl+shift+home":{command:"tw.cursor.moveHeadToDocStart"},"ctrl+shift+end":{command:"tw.cursor.moveHeadToDocEnd"},"ctrl+a":{command:"tw.cursor.selectAll"},"ctrl+z":{command:"tw.history.undo",preventDefault:!0},"ctrl+shift+z":{command:"tw.history.redo",preventDefault:!0}},linux:{"ctrl+left":{command:"tw.cursor.moveBackwardByWord"},"ctrl+right":{command:"tw.cursor.moveForwardByWord"},"ctrl+shift+left":{command:"tw.cursor.moveHeadBackwardByWord"},"ctrl+shift+right":{command:"tw.cursor.moveHeadForwardByWord"},home:{command:"tw.cursor.moveToLineStart"},end:{command:"tw.cursor.moveToLineEnd"},"ctrl+home":{command:"tw.cursor.moveToDocStart"},"ctrl+end":{command:"tw.cursor.moveToDocEnd"},"shift+home":{command:"tw.cursor.moveHeadToLineStart"},"shift+end":{command:"tw.cursor.moveHeadToLineEnd"},"ctrl+shift+home":{command:"tw.cursor.moveHeadToDocStart"},"ctrl+shift+end":{command:"tw.cursor.moveHeadToDocEnd"},"ctrl+a":{command:"tw.cursor.selectAll"},"ctrl+z":{command:"tw.history.undo",preventDefault:!0},"ctrl+shift+z":{command:"tw.history.redo",preventDefault:!0}}},page:{width:816,height:1056,paddingTop:40,paddingBottom:40,paddingLeft:40,paddingRight:40}}},t}();function An(){const t=Object(s.a)(["\n    position: absolute;\n    bottom: 8px;\n    left: 9px;\n    right: 9px;\n    height: 3px;\n    background: ",";\n"]);return An=function(){return t},t}function Hn(){const t=Object(s.a)(["\n    -webkit-appearance: none;\n    border: none;\n    font-size: 12px;\n    font-weight: 500;\n    width: ","px;\n    background: white;\n    border-radius: 3px;\n    padding: 0 9px;\n    outline: none;\n    position: relative;\n    &:hover,\n    &:focus {\n        background: rgba(0, 0, 0, 0.04);\n    }\n    option {\n        color: rgba(0, 0, 0, 0.85);\n    }\n    ","\n"]);return Hn=function(){return t},t}function Fn(){const t=Object(s.a)(["\n    flex: 0 0 auto;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 36px;\n    height: 36px;\n    font-size: 18px;\n    position: relative;\n    color: rgba(0, 0, 0, 0.85);\n    background: transparent;\n    padding: 0;\n    border: none;\n    border-radius: 3px;\n    outline: none;\n    &:after {\n        content: '';\n        position: absolute;\n        bottom: 0;\n        left: 3px;\n        right: 3px;\n        height: 3px;\n    }\n    &:hover,\n    &:focus {\n        background: rgba(0, 0, 0, 0.04);\n    }\n    ","\n    ","\n"]);return Fn=function(){return t},t}function Wn(){const t=Object(s.a)(["\n    flex: 0 0 auto;\n    display: flex;\n    border-radius: 4px;\n    padding: 0 6px;\n    position: relative;\n    &::before {\n        content: '';\n        position: absolute;\n        top: 9px;\n        bottom: 9px;\n        left: 0;\n        width: 1px;\n        background: rgba(0, 0, 0, 0.15);\n    }\n    &:last-child {\n        &::after {\n            content: '';\n            position: absolute;\n            top: 9px;\n            bottom: 9px;\n            right: 0;\n            width: 1px;\n            background: rgba(0, 0, 0, 0.15);\n        }\n    }\n"]);return Wn=function(){return t},t}function Un(){const t=Object(s.a)(["\n    display: flex;\n    margin: 0 auto;\n    width: 816px;\n"]);return Un=function(){return t},t}function Vn(){const t=Object(s.a)(["\n    position: sticky;\n    top: 0;\n    padding: 3px 24px;\n    background: white;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.09);\n    z-index: 10;\n"]);return Vn=function(){return t},t}const Kn=c.a.div(Vn()),$n=c.a.div(Un()),Gn=c.a.div(Wn()),qn=c.a.button(Fn(),({disabled:t})=>t&&"\n        opacity: 0.45;\n        &:hover,\n        &:focus {\n            background: transparent;\n        }\n    ",({active:t})=>t&&"\n        color: rgba(255, 0, 0, 1);\n        &:after {\n            background: rgba(255, 0, 0, 1);\n        }\n    "),Jn=c.a.select(Hn(),({width:t})=>t,({disabled:t})=>t&&"\n        opacity: 0.45;\n        &:hover,\n        &:focus {\n            background: transparent;\n        }\n    "),Xn=c.a.div(An(),({color:t})=>t);function Yn(t){const e=t.getServiceRegistry().getService("cursor").getCursor(),n=e.anchor,r=e.head;return function t(e,n,r){const o=e.getServiceRegistry().getService("render").getStylesBetween(n,r);return o.text&&o.text.text?o.text.text:o.paragraph&&o.paragraph["line-break"]&&n===r?t(e,n-1,r-1):[]}(t,Math.min(n,r),Math.max(n,r))}function Qn({taleweaver:t}){const e=Object(r.useState)([]),n=Object(u.a)(e,2),i=n[0],a=n[1],s=Object(r.useCallback)(t=>{a(Yn(t))},[]);Object(r.useEffect)(()=>{if(!t)return;const e=t.getServiceRegistry().getService("cursor"),n=t.getServiceRegistry().getService("render");e.onDidUpdate(e=>s(t)),n.onDidUpdateRenderState(e=>s(t)),s(t)},[t,s]);const c=1===new Set(i.map(t=>t.family)).size?i[0].family:null,d=1===new Set(i.map(t=>t.size)).size?i[0].size:null,h=1===new Set(i.map(t=>t.weight>400)).size&&i[0].weight>400,f=1===new Set(i.map(t=>t.italic)).size&&i[0].italic,p=1===new Set(i.map(t=>t.underline)).size&&i[0].underline,l=1===new Set(i.map(t=>t.strikethrough)).size&&i[0].strikethrough,g=1===new Set(i.map(t=>t.color)).size?i[0].color:null,v=null===t||void 0===t?void 0:t.getServiceRegistry().getService("command");return o.a.createElement(Kn,null,o.a.createElement($n,null,o.a.createElement(Gn,null,o.a.createElement(Jn,{width:120,value:"Normal",disabled:!1,onChange:t=>null},o.a.createElement("option",{value:"",style:{display:"none"}}),o.a.createElement("option",{value:"Normal"},"Normal text"),o.a.createElement("option",{value:"Title"},"Title"),o.a.createElement("option",{value:"Subtitle"},"Subtitle"),o.a.createElement("option",{value:"Heading 1"},"Heading 1"),o.a.createElement("option",{value:"Heading 2"},"Heading 2"),o.a.createElement("option",{value:"Heading 3"},"Heading 3"))),o.a.createElement(Gn,null,o.a.createElement(Jn,{width:120,value:c||"",disabled:null===c,onChange:t=>null},o.a.createElement("option",{value:"",style:{display:"none"}}),o.a.createElement("option",{value:"sans-serif"},"sans-serif"))),o.a.createElement(Gn,null,o.a.createElement(Jn,{width:60,value:d?d.toString():"",disabled:null===d,onChange:t=>null},o.a.createElement("option",{value:"",style:{display:"hidden"}}),o.a.createElement("option",{value:"10"},"10"),o.a.createElement("option",{value:"12"},"12"),o.a.createElement("option",{value:"14"},"14"),o.a.createElement("option",{value:"16"},"16"),o.a.createElement("option",{value:"18"},"18"),o.a.createElement("option",{value:"24"},"24"),o.a.createElement("option",{value:"30"},"30"),o.a.createElement("option",{value:"36"},"36"),o.a.createElement("option",{value:"42"},"42"))),o.a.createElement(Gn,null,o.a.createElement(qn,{active:h,disabled:!1,onClick:()=>v.executeCommand("tw.state.applyAttribute","text","text","weight",h?400:700)},o.a.createElement("i",{className:"mdi mdi-format-bold"})),o.a.createElement(qn,{active:f,disabled:!1,onClick:()=>v.executeCommand("tw.state.applyAttribute","text","text","italic",!f)},o.a.createElement("i",{className:"mdi mdi-format-italic"})),o.a.createElement(qn,{active:p,disabled:!1,onClick:()=>v.executeCommand("tw.state.applyAttribute","text","text","underline",!p)},o.a.createElement("i",{className:"mdi mdi-format-underline"})),o.a.createElement(qn,{active:l,disabled:!1,onClick:()=>v.executeCommand("tw.state.applyAttribute","text","text","strikethrough",!l)},o.a.createElement("i",{className:"mdi mdi-format-strikethrough-variant"})),o.a.createElement(qn,{active:!1,disabled:null===g,onClick:()=>null},o.a.createElement("i",{className:"mdi mdi-format-color-text",style:{position:"relative",top:"-2px"}}),o.a.createElement(Xn,{color:g||"transparent"})))))}function Zn(){const t=Object(s.a)(["\n    text-align: center;\n    .tw--doc--doc {\n        font-family: 'Source Sans Pro', sans-serif;\n        display: inline-block;\n        padding-bottom: 9px;\n        counter-reset: page-counter;\n    }\n    .tw--page--page {\n        background: rgba(255, 255, 255, 1);\n        margin: 9px auto 0;\n        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);\n        position: relative;\n        &::after {\n            counter-increment: page-counter;\n            content: 'Page ' counter(page-counter) '';\n            position: absolute;\n            top: 12px;\n            left: 50%;\n            transform: translateX(-50%);\n            font-size: 10px;\n            font-family: 'Quicksand', sans-serif;\n            font-weight: 500;\n            color: rgba(0, 0, 0, 0.45);\n            pointer-events: none;\n        }\n        *::selection {\n            background: rgba(255, 255, 255, 1);\n        }\n    }\n"]);return Zn=function(){return t},t}function tr(){const t=Object(s.a)([""]);return tr=function(){return t},t}const er=c.a.div(tr()),nr=c.a.div(Zn());var rr=function({initialDoc:t,config:e}){const n=Object(r.useRef)(null),i=n.current,a=Object(r.useState)(null),s=Object(u.a)(a,2),c=s[0],d=s[1];return Object(r.useEffect)(()=>{const t={};e&&(t["tw.core"]=e),d(new Nn(new Zt("doc",Object(at.a)(),{},[new ye("paragraph",Object(at.a)(),{},[new De("text",Object(at.a)(),"",{})])]),t))},[e]),Object(r.useEffect)(()=>{c&&i&&(c.setContent(function t(e,n){return n.getComponent(e.componentId).buildModelNode(e.partId,e.id,e.text,e.attributes,e.children.map((function(e){return t(e,n)})))}(t,c.getServiceRegistry().getService("component"))),c.attach(i))},[c,i,t]),o.a.createElement(er,null,o.a.createElement(Qn,{taleweaver:c}),o.a.createElement(nr,{ref:n}))};var or={componentId:"doc",partId:"doc",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:"Once upon a time there lived in a certain village a little country girl, the prettiest creature was ever seen. Her mother was excessively fond of her; and her grandmother doted on her still more. This good woman had made for her a little red riding-hood; which became the girl so extremely well that everybody called her Little Red Riding-Hood.",attributes:{weight:700},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:"One day her mother, having made some custards, said to her:",attributes:{italic:!0},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:'"Go, my dear, and see how thy grandmamma does, for I hear she has been very ill; carry her a custard, and this little pot of butter."',attributes:{color:"rgba(255, 0, 0, 1)"},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:"Little Red Riding-Hood set out immediately to go to her grandmother, who lived in another village.",attributes:{size:24},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:"As she was going through the wood, she met with Gaffer Wolf, who had a very great mind to eat her up, but he dared not, because of some faggot-makers hard by in the forest. He asked her whither she was going. The poor child, who did not know that it was dangerous to stay and hear a wolf talk, said to him:",attributes:{strikethrough:!0,underline:!0},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:'"I am going to see my grandmamma and carry her a custard and a little pot of butter from my mamma."',attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:'"Does she live far off?" said the Wolf.',attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:'"Oh! ay," answered Little Red Riding-Hood; "it is beyond that mill you see there, at the first house in the village."',attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:'"Well," said the Wolf, "and I\'ll go and see her too. I\'ll go this way and you go that, and we shall see who will be there soonest."',attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:"The Wolf began to run as fast as he could, taking the nearest way, and the little girl went by that farthest about, diverting herself in gathering nuts, running after butterflies, and making nosegays of such little flowers as she met with. The Wolf was not long before he got to the old woman's house. He knocked at the door--tap, tap.",attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:'"Your grandchild, Little Red Riding-Hood," replied the Wolf, counterfeiting her voice; "who has brought you a custard and a little pot of butter sent you by mamma."',attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:"The good grandmother, who was in bed, because she was somewhat ill, cried out",attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:'"Pull the bobbin, and the latch will go up."',attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:"The Wolf pulled the bobbin, and the door opened, and then presently he fell upon the good woman and ate her up in a moment, for it was above three days that he had not touched a bit. He then shut the door and went into the grandmother's bed, expecting Little Red Riding- Hood, who came some time afterward and knocked at the door--tap, tap.",attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:'"Who\'s there?"',attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:"Little Red Riding-Hood, hearing the big voice of the Wolf, was at first afraid; but believing her grandmother had got a cold and was hoarse, answered:",attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:'" \'Tis your grandchild, Little Red Riding-Hood, who has brought you a custard and a little pot of butter mamma sends you."',attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:"The Wolf cried out to her, softening his voice as much as he could:",attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:'"Pull the bobbin, and the latch will go up."',attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:"Little Red Riding-Hood pulled the bobbin, and the door opened.",attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:"The Wolf, seeing her come in, said to her, hiding himself under the bed-clothes:",attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:'"Put the custard and the little pot of butter upon the stool, and come and lie down with me."',attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:"Little Red Riding-Hood undressed herself and went into bed, where, being greatly amazed to see how her grandmother looked in her night-clothes, she said to her:",attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:'"Grandmamma, what great arms you have got!"',attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:'"That is the better to hug thee, my dear."',attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:'"Grandmamma, what great legs you have got!"',attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:'"That is to run the better, my child."',attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:'"Grandmamma, what great ears you have got!"',attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:'"That is to hear the better, my child."',attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:'"Grandmamma, what great eyes you have got!"',attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:'"It is to see the better, my child."',attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:'"Grandmamma, what great teeth you have got!"',attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:'"That is to eat thee up."',attributes:{},children:[]}]},{componentId:"paragraph",partId:"paragraph",id:Object(at.a)(),text:"",attributes:{},children:[{componentId:"text",partId:"text",id:Object(at.a)(),text:"And, saying these words, this wicked wolf fell upon Little Red Riding-Hood, and ate her all up.",attributes:{},children:[]}]}]};function ir(){const t=Object(s.a)(["\n    text-transform: uppercase;\n    font-weight: 500;\n    font-size: 14px;\n    color: rgba(0, 0, 0, 0.65);\n    border-top: 1px solid rgba(0, 0, 0, 0.45);\n    padding-top: 10px;\n    cursor: default;\n"]);return ir=function(){return t},t}function ar(){const t=Object(s.a)(["\n    text-align: center;\n    margin-top: 90px;\n"]);return ar=function(){return t},t}function sr(){const t=Object(s.a)(["\n    display: inline-block;\n    padding: 15px 60px;\n    outline: none;\n    color: rgba(0, 0, 0, 0.85);\n    text-decoration: none;\n    font-size: 20px;\n    background: transparent;\n    border-radius: 3px;\n    border: 1px solid rgba(0, 0, 0, 0.15);\n    &:hover {\n        color: rgba(0, 0, 0, 1);\n        background: rgba(0, 0, 0, 0.04);\n        border-color: rgba(0, 0, 0, 0.25);\n    }\n"]);return sr=function(){return t},t}function cr(){const t=Object(s.a)(["\n    margin-top: 90px;\n"]);return cr=function(){return t},t}function ur(){const t=Object(s.a)(["\n    font-size: 20px;\n    font-weight: 400;\n    color: rgba(0, 0, 0, 0.85);\n    margin: 30px 0 0;\n"]);return ur=function(){return t},t}function dr(){const t=Object(s.a)(["\n    font-size: 30px;\n    font-weight: 500;\n    color: rgba(0, 0, 0, 0.85);\n    margin: 90px 0 0;\n"]);return dr=function(){return t},t}function hr(){const t=Object(s.a)(["\n    color: rgba(0, 0, 0, 0.65);\n    font-size: 42px;\n    letter-spacing: 0.02em;\n    padding-bottom: 10px;\n    border-bottom: 2px solid rgba(0, 0, 0, 0.65);\n"]);return hr=function(){return t},t}function fr(){const t=Object(s.a)([""]);return fr=function(){return t},t}function pr(){const t=Object(s.a)(["\n    text-align: center;\n    padding: 90px 60px 30px;\n"]);return pr=function(){return t},t}function lr(){const t=Object(s.a)([""]);return lr=function(){return t},t}const gr=c.a.div(lr()),vr=c.a.div(pr()),mr=c.a.div(fr()),yr=c.a.span(hr()),br=c.a.h1(dr()),wr=c.a.h2(ur()),Or=c.a.div(cr()),xr=c.a.a(sr()),Sr=c.a.div(ar()),Cr=c.a.span(ir());class Er extends o.a.Component{render(){return o.a.createElement(gr,null,o.a.createElement(vr,null,o.a.createElement(mr,null,o.a.createElement(yr,null,"Taleweaver")),o.a.createElement(br,null,"Word processing in your browser."),o.a.createElement(wr,null,"Open source editor delivering true word processing experience."),o.a.createElement(Or,null,o.a.createElement(xr,{href:"https://github.com/yuzhenmi/taleweaver"},"GitHub")),o.a.createElement(Sr,null,o.a.createElement(Cr,null,"\u2193 Check it out \u2193"))),o.a.createElement(rr,{initialDoc:or,config:{page:{width:816,height:1056,paddingTop:60,paddingBottom:60,paddingLeft:60,paddingRight:60}}}))}}var Pr=Er;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(Pr,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(t=>{t.unregister()})}},[[107,1,2]]]);
//# sourceMappingURL=main.8a9ade95.chunk.js.map